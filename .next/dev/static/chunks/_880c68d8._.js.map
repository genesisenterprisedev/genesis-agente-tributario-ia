{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/services/geminiService.ts"],"sourcesContent":["import { WebSource } from \"../types\";\n\n\n\nfunction getOpenRouterModel(modelName: string): string {\n  return process.env.NEXT_PUBLIC_OPENROUTER_MODEL || modelName;\n}\n\nasync function callOpenRouter(\n  prompt: string,\n  modelName: string\n): Promise<string> {\n  const model = getOpenRouterModel(modelName);\n\n  console.log(`[OpenRouter] Proxying to internal API: /api/chat`);\n  console.log(`[OpenRouter] Model: ${model}`);\n\n  try {\n    const response = await fetch(\"/api/chat\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        model,\n        prompt,\n      }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({ error: response.statusText }));\n      const errorMessage = `OpenRouter request failed: ${response.status} - ${errorData.error || response.statusText}`;\n      console.error(`[OpenRouter] ${errorMessage}`);\n      throw new Error(errorMessage);\n    }\n\n    const data = (await response.json()) as {\n      choices?: { message?: { content?: string } }[];\n    };\n\n    const text = data.choices?.[0]?.message?.content ?? \"\";\n\n    if (!text) {\n      console.warn(\"[OpenRouter] Response received but no content found\");\n    }\n\n    return text;\n  } catch (error: any) {\n    // Enhanced error logging for fetch failures\n    if (error.message?.includes(\"fetch failed\")) {\n      console.error(\"[OpenRouter] Network error - fetch failed. Possible causes:\");\n      console.error(\"  - Next.js dev server not running\");\n      console.error(\"  - Network connectivity issues\");\n      console.error(\"  - CORS or firewall blocking the request\");\n      console.error(\"  - Invalid API endpoint configuration\");\n    }\n    console.error(\"[OpenRouter] Full error:\", error);\n    throw new Error(`OpenRouter request failed: ${error.message || \"fetch failed\"}`);\n  }\n}\n\n// Wrapper with fallback to DEFAULT_MODEL\nasync function callOpenRouterWithFallback(\n  prompt: string,\n  primaryModel: string\n): Promise<string> {\n  try {\n    return await callOpenRouter(prompt, primaryModel);\n  } catch (error: any) {\n    if (primaryModel !== DEFAULT_MODEL) {\n      console.warn(\n        `[OpenRouter] Falha com modelo ${primaryModel}. Tentando fallback ${DEFAULT_MODEL}`\n      );\n      try {\n        return await callOpenRouter(prompt, DEFAULT_MODEL);\n      } catch (fallbackError: any) {\n        console.error('[OpenRouter] Falha tamb√©m com fallback:', fallbackError);\n        throw fallbackError; // Propaga erro final\n      }\n    }\n    // Se j√° era o modelo padr√£o, apenas propaga\n    throw error;\n  }\n}\n\n// *** Duplicated OpenRouter request block removed ‚Äì keep only the original implementation above ***\n\n// ============================================\n// CONFIGURA√á√ÉO DE MODELOS LLM POR TIPO DE AGENTE\n// ============================================\n// Cada tipo de agente pode usar um modelo LLM diferente, configurado via vari√°veis de ambiente.\n// Isso permite otimizar custos e performance usando modelos especializados para cada tarefa.\n//\n// Hierarquia de fallback:\n// 1. Modelo espec√≠fico do agente (ex: NEXT_PUBLIC_OPENROUTER_DOCUMENT_MODEL)\n// 2. Modelo padr√£o (NEXT_PUBLIC_OPENROUTER_DEFAULT_MODEL)\n// 3. Hardcoded fallback (openai/gpt-4o-mini)\n//\n// Exemplo de configura√ß√£o no .env.local:\n// NEXT_PUBLIC_OPENROUTER_DEFAULT_MODEL=openai/gpt-4o-mini\n// NEXT_PUBLIC_OPENROUTER_DOCUMENT_MODEL=openai/gpt-4o\n// NEXT_PUBLIC_OPENROUTER_CODE_MODEL=anthropic/claude-3-5-sonnet\n// NEXT_PUBLIC_OPENROUTER_SUGGESTION_MODEL=openai/gpt-4o-mini\n//\n// Veja docs/llm-configuration.md para mais detalhes\n\nconst DEFAULT_MODEL =\n  process.env.NEXT_PUBLIC_OPENROUTER_DEFAULT_MODEL || \"openai/gpt-4o-mini\";\n\n// Modelos espec√≠ficos por tipo de agente\nexport const DOCUMENT_MODEL =\n  process.env.NEXT_PUBLIC_OPENROUTER_DOCUMENT_MODEL || DEFAULT_MODEL; // Agente de Documentos: An√°lise de documentos fiscais\nexport const CODE_MODEL =\n  process.env.NEXT_PUBLIC_OPENROUTER_CODE_MODEL || DEFAULT_MODEL; // Agente de C√≥digo: Gera√ß√£o de c√≥digo Python/Delphi\nexport const SUGGESTION_MODEL =\n  process.env.NEXT_PUBLIC_OPENROUTER_SUGGESTION_MODEL || DEFAULT_MODEL; // Agente de Sugest√µes: Otimiza√ß√£o de prompts\n\n// Modelo principal para opera√ß√µes gerais (usado como fallback)\nexport const PRIMARY_MODEL = DOCUMENT_MODEL; // Mant√©m compatibilidade com c√≥digo existente\nexport const SECONDARY_MODEL = DEFAULT_MODEL; // Modelo padr√£o como fallback final\n\n/**\n * Seleciona o modelo ideal para um tipo de conversa espec√≠fico\n * @param agentType Tipo de agente/conversa\n * @returns Modelo selecionado com fallback autom√°tico\n */\nexport function getModelForConversation(agentType: 'document' | 'code' | 'suggestion'): string {\n  switch (agentType) {\n    case 'document':\n      return DOCUMENT_MODEL;\n    case 'code':\n      return CODE_MODEL;\n    case 'suggestion':\n      return SUGGESTION_MODEL;\n    default:\n      console.warn(`[Model Selection] Tipo de agente desconhecido: ${agentType}. Usando modelo padr√£o.`);\n      return DEFAULT_MODEL;\n  }\n}\n\n/**\n * Seleciona o modelo com fallback inteligente\n * @param agentType Tipo de agente/conversa\n * @returns Modelo selecionado com fallback para DEFAULT_MODEL se o espec√≠fico falhar\n */\nexport function getModelWithFallback(agentType: 'document' | 'code' | 'suggestion'): string {\n  const preferredModel = getModelForConversation(agentType);\n\n  // Se o modelo preferido j√° for o DEFAULT_MODEL, n√£o h√° necessidade de fallback adicional\n  if (preferredModel === DEFAULT_MODEL) {\n    return preferredModel;\n  }\n\n  return preferredModel;\n}\n\nexport const DOCUMENT_AGENT_PROMPT = `Voc√™ √© o \"G√™nesis\", um assistente de IA especialista em tributa√ß√£o brasileira. Sua principal fonte de conhecimento s√£o os documentos fornecidos no contexto. Responda √†s perguntas de forma clara, informativa e profissional, priorizando sempre as informa√ß√µes contidas nesses documentos. Quando o contexto n√£o for suficiente, use seu conhecimento geral e a busca na web para complementar a resposta. Sempre cite as fontes da web que utilizar.`;\n\nexport const CODE_AGENT_PROMPT = `Voc√™ √© um programador especialista s√™nior, fluente em Python e Delphi, com profundo conhecimento em regras tribut√°rias e fiscais. Sua tarefa √© gerar fun√ß√µes e trechos de c√≥digo claros, eficientes e bem documentados para resolver problemas tribut√°rios. Sempre que poss√≠vel, adicione coment√°rios explicando a l√≥gica e o c√°lculo fiscal implementado. Use blocos de c√≥digo markdown para formatar sua resposta.`;\n\nexport const SUGGESTION_AGENT_PROMPT = `Voc√™ √© um especialista em otimiza√ß√£o de buscas e prompts. Sua tarefa √© analisar a pergunta do usu√°rio e, em vez de respond√™-la diretamente, sugerir 3 maneiras alternativas e mais eficazes de formular a mesma pergunta para obter melhores resultados de um assistente de IA fiscal. Apresente as sugest√µes em uma lista numerada, cada uma com uma breve explica√ß√£o do porqu√™ a nova formula√ß√£o √© melhor. Use markdown para formatar a lista.`;\n\n/**\n * Generates embeddings for a batch of texts.\n * NOTE: The `@google/genai` JS SDK guidelines provided do not specify a method for\n * generating embeddings. This function uses a mocked implementation to allow the\n * Retrieval-Augmented Generation (RAG) functionality to operate. In a real-world\n * scenario, this would need to be replaced with a call to an actual embedding model endpoint.\n */\nexport async function generateEmbeddings(texts: string[]): Promise<number[][]> {\n  console.warn(\n    \"Using mock embeddings. Replace with a real embedding model API call.\"\n  );\n  // Returning random vectors of a common dimension size (e.g., 768) for demonstration.\n  return texts.map(() =>\n    Array(768)\n      .fill(0)\n      .map(() => Math.random() * 2 - 1)\n  );\n}\n\n/**\n * Generates a short, descriptive title for a conversation based on the user's first query.\n */\nexport async function generateTitle(query: string): Promise<string> {\n  try {\n    const prompt = `Gere um t√≠tulo curto e descritivo (3-5 palavras) para uma conversa que come√ßa com a seguinte pergunta do usu√°rio. Responda apenas com o t√≠tulo. Pergunta: \"${query}\"`;\n    // Usa o modelo configurado via OpenRouter para gerar o t√≠tulo.\n    const responseText = await callOpenRouter(prompt, SECONDARY_MODEL);\n    // Extrai o texto de forma segura, tratando response.text como opcional.\n    // Limpa poss√≠veis aspas extras na resposta.\n    const content = responseText.trim().replace(/[\"']/g, \"\");\n\n    if (!content) {\n      console.warn(\"Gemini title generation returned empty response.\");\n      // Fallback se o modelo n√£o retornar texto √∫til\n      return query.substring(0, 30) + \"...\";\n    }\n\n    return content;\n  } catch (error) {\n    console.error(\"Error generating title:\", error);\n    // Return a generic title or a snippet of the query as a fallback\n    return query.substring(0, 30) + \"...\";\n  }\n}\n\n/**\n * Busca contexto relevante nos documentos usando embeddings\n * @param query Pergunta do usu√°rio\n * @param limit N√∫mero m√°ximo de chunks para retornar\n * @param threshold Threshold de similaridade (0-1)\n * @returns Array de chunks relevantes com metadata\n */\nexport async function searchDocumentContext(\n  query: string,\n  limit: number = 5,\n  threshold: number = 0.7\n): Promise<Array<{\n  documentName: string;\n  chunkText: string;\n  similarity: number;\n  isKnowledgeBase: boolean;\n}>> {\n  try {\n    // 1. Gerar embedding da query\n    const embeddingResponse = await fetch('/api/embed', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ text: query }),\n    });\n\n    if (!embeddingResponse.ok) {\n      console.error('Failed to generate query embedding');\n      return [];\n    }\n\n    const { embedding } = await embeddingResponse.json();\n\n    // 2. Buscar chunks similares\n    const searchResponse = await fetch('/api/search', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        embedding,\n        limit,\n        threshold\n      }),\n    });\n\n    if (!searchResponse.ok) {\n      console.error('Failed to search documents');\n      return [];\n    }\n\n    const { results } = await searchResponse.json();\n\n    console.log(`[RAG] Found ${results.length} relevant chunks for query`);\n\n    return results;\n  } catch (error) {\n    console.error('Error searching document context:', error);\n    return [];\n  }\n}\n\n/**\n * Generates a response from the Gemini model, with optional web search.\n * Returns the response text and any web sources found.\n */\nexport async function generateResponse(\n  modelName: string,\n  prompt: string,\n  useWebSearch: boolean = false\n): Promise<{ text: string; sources: WebSource[] }> {\n  // Construct config conditionally\n  if (useWebSearch) {\n  }\n\n  // Use getAI().models.generateContent as per guidelines.\n  const text = await callOpenRouter(prompt, modelName);\n\n  // Extract text directly from response.text as per guidelines.\n\n  // Extract web sources from grounding metadata if web search was used\n  const sources: WebSource[] = [];\n\n  // Deduplicate sources based on URI\n  const uniqueSources = Array.from(\n    new Map(sources.map((item) => [item.uri, item])).values()\n  );\n\n  return { text, sources: uniqueSources };\n}\n\n/**\n * Gera resposta usando RAG (Retrieval-Augmented Generation)\n * Busca contexto relevante nos documentos e injeta no prompt\n * @param modelName Modelo LLM a usar\n * @param userQuery Pergunta do usu√°rio\n * @param systemPrompt Prompt do sistema\n * @param conversationHistory Hist√≥rico da conversa (opcional)\n * @param useWebSearch Se deve usar busca web\n * @returns Resposta com texto, fontes e contexto usado\n */\nexport async function generateResponseWithRAG(\n  modelName: string,\n  userQuery: string,\n  systemPrompt: string,\n  conversationHistory: string = '',\n  useWebSearch: boolean = false\n): Promise<{\n  text: string;\n  sources: WebSource[];\n  contextUsed: boolean;\n  documentsReferenced: string[];\n}> {\n  try {\n    // 1. Buscar contexto relevante nos documentos\n    const contextChunks = await searchDocumentContext(userQuery, 5, 0.7);\n\n    let enhancedPrompt = systemPrompt;\n    const documentsReferenced: string[] = [];\n\n    // 2. Se encontrou contexto relevante, adicionar ao prompt\n    if (contextChunks.length > 0) {\n      console.log(`[RAG] Using ${contextChunks.length} document chunks as context`);\n\n      // Construir contexto formatado\n      const contextText = contextChunks\n        .map((chunk, index) => {\n          // Adicionar documento √† lista de refer√™ncias\n          if (!documentsReferenced.includes(chunk.documentName)) {\n            documentsReferenced.push(chunk.documentName);\n          }\n\n          return `### Documento ${index + 1}: ${chunk.documentName}\n**Relev√¢ncia:** ${(chunk.similarity * 100).toFixed(1)}%\n**Conte√∫do:**\n${chunk.chunkText}\n`;\n        })\n        .join('\\n\\n---\\n\\n');\n\n      // Injetar contexto no prompt do sistema\n      enhancedPrompt = `${systemPrompt}\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüìö CONTEXTO DOS DOCUMENTOS (Base de Conhecimento)\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nUse as informa√ß√µes abaixo para responder a pergunta do usu√°rio. Estes s√£o trechos relevantes extra√≠dos da base de conhecimento:\n\n${contextText}\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n**INSTRU√á√ïES IMPORTANTES:**\n1. Priorize as informa√ß√µes do contexto acima ao responder\n2. Se a resposta estiver no contexto, cite o documento de origem\n3. Se o contexto n√£o for suficiente, use seu conhecimento geral\n4. Seja preciso e cite as fontes quando poss√≠vel\n5. Indique claramente quando estiver usando conhecimento geral vs. documentos\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;\n    } else {\n      console.log('[RAG] No relevant context found, using general knowledge');\n    }\n\n    // 3. Construir prompt completo\n    const fullPrompt = `${enhancedPrompt}\n\n${conversationHistory ? `Hist√≥rico da conversa:\\n${conversationHistory}\\n\\n` : ''}Usu√°rio: ${userQuery}\n\nAssistente:`;\n\n    // 4. Gerar resposta\n    const { text, sources } = await generateResponse(modelName, fullPrompt, useWebSearch);\n\n    return {\n      text,\n      sources,\n      contextUsed: contextChunks.length > 0,\n      documentsReferenced,\n    };\n  } catch (error) {\n    console.error('Error in generateResponseWithRAG:', error);\n\n    // Fallback para resposta sem RAG\n    const { text, sources } = await generateResponse(\n      modelName,\n      `${systemPrompt}\\n\\n${conversationHistory ? `Hist√≥rico:\\n${conversationHistory}\\n\\n` : ''}Usu√°rio: ${userQuery}\\n\\nAssistente:`,\n      useWebSearch\n    );\n\n    return {\n      text,\n      sources,\n      contextUsed: false,\n      documentsReferenced: [],\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/services/pdfjsLoader.ts"],"sourcesContent":["// Custom PDF.js initialization wrapper\n// This file ensures the worker is configured before any PDF.js code runs\n\nlet pdfjsLib: any = null;\nlet initPromise: Promise<any> | null = null;\n\nexport async function getPdfJs() {\n    // Return cached instance if already initialized\n    if (pdfjsLib) {\n        return pdfjsLib;\n    }\n\n    // Return existing initialization promise if in progress\n    if (initPromise) {\n        return initPromise;\n    }\n\n    // Start initialization\n    initPromise = (async () => {\n        const lib = await import('pdfjs-dist');\n\n        // Configure worker IMMEDIATELY after import, before any other code runs\n        lib.GlobalWorkerOptions.workerSrc = '/pdf.worker.min.mjs';\n\n        pdfjsLib = lib;\n        return lib;\n    })();\n\n    return initPromise;\n}\n"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,yEAAyE;;;;;AAEzE,IAAI,WAAgB;AACpB,IAAI,cAAmC;AAEhC,eAAe;IAClB,gDAAgD;IAChD,IAAI,UAAU;QACV,OAAO;IACX;IAEA,wDAAwD;IACxD,IAAI,aAAa;QACb,OAAO;IACX;IAEA,uBAAuB;IACvB,cAAc,CAAC;QACX,MAAM,MAAM;QAEZ,wEAAwE;QACxE,IAAI,mBAAmB,CAAC,SAAS,GAAG;QAEpC,WAAW;QACX,OAAO;IACX,CAAC;IAED,OAAO;AACX"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/api.ts"],"sourcesContent":["import { generateEmbeddings } from './services/geminiService';\nimport { Document, DocumentChunk } from './types';\nimport { getPdfJs } from './services/pdfjsLoader';\n\nconst CHUNK_SIZE = 1000; // characters\nconst CHUNK_OVERLAP = 200; // characters\n\n/**\n * L√™ um arquivo de texto e retorna seu conte√∫do como uma string.\n */\nasync function readFileContent(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      resolve(event.target?.result as string);\n    };\n    reader.onerror = (error) => {\n      reject(error);\n    };\n    reader.readAsText(file);\n  });\n}\n\n/**\n * L√™ um arquivo PDF usando pdf.js e retorna seu conte√∫do de texto como uma string.\n */\nasync function readPdfContent(file: File): Promise<string> {\n  // Get PDF.js with proper worker configuration\n  const pdfjsLib = await getPdfJs();\n\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = async (event) => {\n      if (!event.target?.result) {\n        return reject(new Error('Falha ao ler o arquivo PDF.'));\n      }\n      try {\n        const typedArray = new Uint8Array(event.target.result as ArrayBuffer);\n        const loadingTask = pdfjsLib.getDocument({ data: typedArray });\n        const pdf = await loadingTask.promise;\n        let fullText = '';\n        for (let i = 1; i <= pdf.numPages; i++) {\n          const page = await pdf.getPage(i);\n          const textContent = await page.getTextContent();\n          const pageText = textContent.items.map((item: any) => item.str).join(' ');\n          fullText += pageText + '\\n\\n'; // Adiciona espa√ßo entre as p√°ginas para melhor separa√ß√£o\n        }\n        resolve(fullText.trim());\n      } catch (error) {\n        console.error(\"Erro ao analisar o PDF:\", error);\n        reject(new Error('O arquivo PDF est√° corrompido ou n√£o p√¥de ser lido.'));\n      }\n    };\n    reader.onerror = (error) => {\n      reject(error);\n    };\n    // pdf.js precisa de um ArrayBuffer\n    reader.readAsArrayBuffer(file);\n  });\n}\n\n/**\n * Divide um texto longo em peda√ßos menores e sobrepostos.\n */\nfunction splitTextIntoChunks(text: string): string[] {\n  const chunks: string[] = [];\n  if (!text) return chunks;\n\n  let i = 0;\n  while (i < text.length) {\n    const chunk = text.substring(i, i + CHUNK_SIZE);\n    chunks.push(chunk);\n    i += CHUNK_SIZE - CHUNK_OVERLAP;\n  }\n  return chunks;\n}\n\n/**\n * Processa uma string de texto bruto: fragmenta e gera embeddings.\n */\nexport async function processText(text: string, fileName: string, isDeletable: boolean): Promise<Document> {\n  const textChunks = splitTextIntoChunks(text);\n\n  if (textChunks.length === 0) {\n    return {\n      id: `${fileName} -${Date.now()} `,\n      name: fileName,\n      chunks: [],\n      isDeletable,\n      content: text,\n    };\n  }\n\n  const embeddings = await generateEmbeddings(textChunks);\n\n  const documentChunks: DocumentChunk[] = textChunks.map((chunkText, i) => ({\n    text: chunkText,\n    embedding: embeddings[i],\n  }));\n\n  return {\n    id: `${fileName} -${Date.now()} `,\n    name: fileName,\n    chunks: documentChunks,\n    isDeletable,\n    content: text,\n  };\n}\n\n\n/**\n * Processa um arquivo enviado: l√™, fragmenta e gera embeddings.\n * Diferencia entre arquivos PDF e de texto.\n */\nexport async function processDocument(file: File): Promise<Document> {\n  let text = '';\n  const fileType = file.type;\n  const fileName = file.name.toLowerCase();\n\n  if (fileType === 'application/pdf' || fileName.endsWith('.pdf')) {\n    text = await readPdfContent(file);\n  } else if (\n    fileType === 'text/plain' ||\n    fileType === 'text/markdown' ||\n    fileName.endsWith('.txt') ||\n    fileName.endsWith('.md')\n  ) {\n    text = await readFileContent(file);\n  } else {\n    throw new Error('Tipo de arquivo n√£o suportado. Por favor, envie .txt, .md ou .pdf.');\n  }\n\n  // Documentos enviados pelo usu√°rio s√£o sempre delet√°veis\n  return processText(text, file.name, true);\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/utils.ts"],"sourcesContent":["export const cosineSimilarity = (vecA: number[], vecB: number[]): number => {\n  if (vecA.length !== vecB.length) {\n    return 0;\n  }\n\n  let dotProduct = 0;\n  let normA = 0;\n  let normB = 0;\n\n  for (let i = 0; i < vecA.length; i++) {\n    dotProduct += vecA[i] * vecB[i];\n    normA += vecA[i] * vecA[i];\n    normB += vecB[i] * vecB[i];\n  }\n  \n  const denominator = Math.sqrt(normA) * Math.sqrt(normB);\n  \n  if(denominator === 0){\n      return 0;\n  }\n\n  return dotProduct / denominator;\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,mBAAmB,CAAC,MAAgB;IAC/C,IAAI,KAAK,MAAM,KAAK,KAAK,MAAM,EAAE;QAC/B,OAAO;IACT;IAEA,IAAI,aAAa;IACjB,IAAI,QAAQ;IACZ,IAAI,QAAQ;IAEZ,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAAK;QACpC,cAAc,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;QAC/B,SAAS,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;QAC1B,SAAS,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;IAC5B;IAEA,MAAM,cAAc,KAAK,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC;IAEjD,IAAG,gBAAgB,GAAE;QACjB,OAAO;IACX;IAEA,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/initialKnowledge.ts"],"sourcesContent":["export const initialKnowledgeText = `\nUm \"agente que tem conhecimento sobre tributa√ß√£o fiscal do Brasil\" √© um profissional ou uma empresa especializada em entender, interpretar e aplicar as complexas regras do sistema tribut√°rio brasileiro.\n\nNo Brasil, a tributa√ß√£o √© notoriamente uma das mais complexas do mundo, envolvendo tr√™s esferas de governo (Federal, Estadual e Municipal), cada uma com seus pr√≥prios impostos, regras e prazos. Um agente com este conhecimento √©, portanto, uma pe√ßa-chave para qualquer empresa ou at√© mesmo para pessoas f√≠sicas com patrim√¥nio mais significativo.\n\nVamos detalhar o que este agente **√©**, o que ele **faz** e o que ele **precisa saber**.\n\n---\n\n### 1. Quem √© este Agente? (Os Perfis)\n\nEste agente pode ser um profissional com diferentes forma√ß√µes, mas com uma especializa√ß√£o em tributos. Os mais comuns s√£o:\n\n*   **Contador / Empresa de Contabilidade:** √â o profissional mais pr√≥ximo do dia a dia das empresas. Respons√°vel pela escritura√ß√£o cont√°bil, apura√ß√£o dos impostos e entrega das obriga√ß√µes acess√≥rias.\n*   **Advogado Tributarista:** Focado na interpreta√ß√£o da lei, na defesa do cliente em processos administrativos e judiciais (contencioso tribut√°rio) e na emiss√£o de pareceres legais para opera√ß√µes complexas.\n*   **Consultor Tribut√°rio:** Pode ser um contador, advogado ou economista com especializa√ß√£o. Geralmente atua de forma estrat√©gica, focado em **planejamento tribut√°rio** para otimizar e reduzir a carga de impostos de forma legal.\n*   **Auditor Fiscal (do lado do Fisco):** √â o agente do governo que fiscaliza o cumprimento das obriga√ß√µes tribut√°rias. Conhecer seu trabalho √© fundamental para se preparar para uma fiscaliza√ß√£o.\n*   **Gestor Financeiro / Empres√°rio:** Embora n√£o seja um especialista, um bom gestor precisa ter um conhecimento s√≥lido dos basics de tributa√ß√£o para tomar decis√µes de neg√≥cio conscientes.\n\n---\n\n### 2. O que ele Faz? (As Principais Atividades)\n\nAs fun√ß√µes deste agente v√£o muito al√©m de apenas \"calcular e pagar impostos\". Elas se dividem em √°reas estrat√©gicas e operacionais:\n\n#### a) Planejamento Tribut√°rio\n*   **O que √©:** A atividade mais estrat√©gica e valiosa. Consiste em estudar a legisla√ß√£o para encontrar a forma legal mais eficiente de uma empresa operar, pagando menos impostos sem sonegar.\n*   **Exemplos:** Escolher o melhor regime tribut√°rio (Simples Nacional, Lucro Presumido ou Lucro Real), estruturar opera√ß√µes de fus√£o e aquisi√ß√£o, decidir sobre a localiza√ß√£o de uma nova f√°brica (levando em conta os benef√≠cios fiscais estaduais).\n\n#### b) Compliance Tribut√°rio (Conformidade)\n*   **O que √©:** √â a √°rea operacional que garante que a empresa esteja em dia com todas as suas obriga√ß√µes.\n*   **Atividades:**\n    *   Apurar e calcular os impostos (PIS, COFINS, IRPJ, ICMS, ISS, etc.).\n    *   Preencher e entregar as declara√ß√µes e obriga√ß√µes acess√≥rias (SPEDs, DCTF, GFIP, GIA, etc.).\n    *   Emitir guias de pagamento (DARF, GARE, etc.) e garantir o pagamento dentro do prazo.\n    *   Manter a documenta√ß√£o fiscal em ordem.\n\n#### c) Contencioso Tribut√°rio\n*   **O que √©:** A √°rea de defesa da empresa. Quando h√° uma autua√ß√£o ou cobran√ßa indevida por parte do Fisco, este agente atua para reverter a situa√ß√£o.\n*   **Atividades:**\n    *   Apresentar defesas administrativas.\n    *   Negotiar parcelamentos de d√≠vidas.\n    *   Entrar com a√ß√µes judiciais para discutir a cobran√ßa de tributos.\n\n#### d) Consultoria e Assessoria\n*   **O que √©:** Dar suporte ao dia a dia e a decis√µes espec√≠ficas.\n*   **Exemplos:** \"Posso deduzir esta despesa?\", \"Qual o impacto tribut√°rio de vender este produto para outro estado?\", \"Como tratar este imposto na contabilidade?\".\n\n---\n\n### 3. O que ele Precisa Saber? (O Conhecimento Essencial)\n\nO conhecimento deste agente √© vasto e precisa ser constantemente atualizado. Os pilares s√£o:\n\n*   **Sistema Tribut√°rio Nacional:** Entender a divis√£o de compet√™ncias entre Uni√£o, Estados e Munic√≠pios.\n*   **Regimes Tribut√°rios:** Dominar as regras do **Simples Nacional**, **Lucro Presumido** e **Lucro Real**, sabendo qual a vantagem de cada um para um tipo espec√≠fico de empresa.\n*   **Principais Tributos:**\n    *   **Federais:** IRPJ (Imposto de Renda da Pessoa Jur√≠drica), CSLL (Contribui√ß√£o Social sobre o Lucro L√≠quido), PIS, COFINS, IPI (Imposto sobre Produtos Industrializados).\n    *   **Estaduais:** ICMS (Imposto sobre Circula√ß√£o de Mercadorias e Servi√ßos).\n    *   **Municipais:** ISS (Imposto Sobre Servi√ßos).\n*   **Obriga√ß√µes Acess√≥rias:** Conhecer a fundo o SPED (Sistema P√∫blico de Escritura√ß√£o Digital) e suas vertentes (EFD-Contribui√ß√µes, EFD-ICMS/IPI, ECF, etc.).\n*   **Legisla√ß√£o e Jurisprud√™ncia:** A lei tribut√°ria muda constantemente. Al√©m das leis, √© preciso acompanhar as decis√µes dos tribunais (jurisprud√™ncia), que definem como a lei √© interpretada na pr√°tica.\n*   **√Åreas Correlatas:** Ter no√ß√µes de Contabilidade, Direito Empresarial e Finan√ßas, pois a tributa√ß√£o impacta todas essas √°reas.\n\n---\n\n### Conclus√£o: Por que este Agente √© Fundamental?\n\nNo Brasil, ter um agente com conhecimento profundo em tributa√ß√£o n√£o √© um luxo, mas uma **necessidade estrat√©gica**. Ele √© fundamental para:\n\n1.  **Evitar Multas e Juros:** O erro no cumprimento de uma obriga√ß√£o pode gerar penalidades alt√≠ssimas.\n2.  **Otimizar Custos:** Um bom planejamento pode reduzir a carga tribut√°ria, aumentando a competitividade e o lucro da empresa.\n3.  **Garantir a Sustentabilidade:** A gest√£o tribut√°ria inadequada √© uma das principais causas de fal√™ncia de empresas no Brasil.\n4.  **Proporcionar Seguran√ßa Jur√≠dica:** Dar tranquilidade ao empres√°rio para que ele possa focar no seu neg√≥cio, sabendo que a parte fiscal est√° sob controle.\n\nEm resumo, este agente √© o **navegador** que ajuda as empresas e indiv√≠duos a atravessar o \"mar revolto\" da tributa√ß√£o brasileira de forma segura, eficiente e estrat√©gica. √â um investimento, n√£o um custo.\n`;"],"names":[],"mappings":";;;;AAAO,MAAM,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4ErC,CAAC"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/taxReformKnowledge.ts"],"sourcesContent":["export const taxReformKnowledgeText = `\nA nova reforma tribut√°ria brasileira, aprovada entre 2023 e 2025, configura-se como a maior mudan√ßa fiscal das √∫ltimas d√©cadas e tem impacto significativo em praticamente todos os setores econ√¥micos. Ela substitui os antigos tributos sobre consumo por novos impostos, simplificando a estrutura e promovendo maior transpar√™ncia, por√©m trazendo desafios espec√≠ficos para servi√ßos, agroneg√≥cio, ind√∫stria e varejo[1][2][3].\n\n### Principais Mudan√ßas\n\n- Os impostos federais PIS, Cofins e IPI, o estadual ICMS e o municipal ISS ser√£o substitu√≠dos por dois novos tributos:\n  - CBS (Contribui√ß√£o sobre Bens e Servi√ßos), federal.\n  - IBS (Imposto sobre Bens e Servi√ßos), com gest√£o compartilhada entre estados e munic√≠pios.\n- Implementa√ß√£o do Imposto Seletivo (IS), incidente sobre bens e servi√ßos nocivos √† sa√∫de ou ao meio ambiente (bebidas alco√≥licas, cigarros, combust√≠veis f√≥sseis).\n- Fim da cumulatividade e amplia√ß√£o do cr√©dito financeiro para os tributos.\n- Nova sistem√°tica de cobran√ßa no destino para opera√ß√µes entre estados, eliminando benef√≠cios regionais e simplificando obriga√ß√µes acess√≥rias[1][3][4][5].\n\n### Impacto nos Setores Econ√¥micos\n\n- **Servi√ßos**: Tende a ser o mais impactado negativamente, pois atualmente usufrui de regimes simplificados e al√≠quotas menores. A nova al√≠quota geral, pr√≥xima de 25%, pode elevar significativamente o custo para empresas com pouca possibilidade de apropria√ß√£o de cr√©ditos tribut√°rios (como advocacia, educa√ß√£o, sa√∫de, tecnologia)[2][6][7].\n- **Agroneg√≥cio**: Apesar de isen√ß√µes para itens da cesta b√°sica, outros insumos essenciais passar√£o a ser tributados, demandando readequa√ß√£o fiscal e controle de cr√©ditos.\n- **Varejo**: Ter√° que investir em sistemas e compliance para lidar com os novos tributos e garantir o correto aproveitamento dos cr√©ditos fiscais. A transi√ß√£o oferece oportunidade competitiva para quem se adaptar r√°pido[2][4].\n- **Transporte**: Mudan√ßas na incid√™ncia territorial (de origem para destino) e elimina√ß√£o de benef√≠cios podem elevar custos do setor, exigindo reajuste de pre√ßos e modelos operacionais[2][8].\n\n### Cronograma de Implanta√ß√£o\n\n- **2023-2025**: Aprova√ß√£o constitucional e regulamenta√ß√£o infraconstitucional.\n- **2026**: In√≠cio da fase experimental, CBS e IBS com al√≠quotas simb√≥licas para testes nos sistemas das empresas.\n- **2027**: In√≠cio do Imposto Seletivo (IS)[9][5][4].\n- **At√© 2033**: Transi√ß√£o gradual at√© extin√ß√£o completa dos antigos tributos e consolida√ß√£o do novo modelo, exigindo adapta√ß√£o simult√¢nea aos sistemas antigos e novos nos pr√≥ximos anos[9][4].\n\n### Novidades para Empresas\n\n- Obrigatoriedade de atualizar sistemas fiscais, adaptar classifica√ß√µes de produto e processos internos.\n- Maior fiscaliza√ß√£o e risco de autua√ß√µes para quem n√£o respeitar as novas regras.\n- Introdu√ß√£o do cashback, com devolu√ß√£o tribut√°ria para fam√≠lias de baixa renda, especialmente via IBS e CBS[10][5].\n\n### Situa√ß√£o Atual e Pr√≥ximos Passos\n\nEm setembro de 2025, o Senado aprovou a segunda etapa da regulamenta√ß√£o, detalhando a opera√ß√£o e a distribui√ß√£o dos impostos e criando o Comit√™ Gestor do IBS. O texto agora segue para aprova√ß√£o final na C√¢mara e posterior san√ß√£o presidencial. As empresas precisam acompanhar a regulamenta√ß√£o complementar e j√° preparar migra√ß√£o de sistemas e processos[9][11][12].\n\n***\nA reforma tribut√°ria brasileira, portanto, mudar√° profundamente a l√≥gica da tributa√ß√£o sobre consumo no pa√≠s. A simplifica√ß√£o e amplia√ß√£o de controles e cr√©ditos fiscais exigir√£o atualiza√ß√£o tecnol√≥gica e estrat√©gica por parte de todos os agentes econ√¥micos ‚Äî com impactos distintos conforme o perfil de cada atividade[1][3][2][9][5].\n\nCita√ß√µes:\n[1] Reforma tribut√°ria 2025: o que pequenos neg√≥cios ... https://sebrae.com.br/sites/PortalSebrae/ufs/pe/artigos/reforma-tributaria-2025-o-que-pequenos-negocios-precisam-saber,6d772d5ec7b37910VgnVCM1000001b00320aRCRD\n[2] Reforma Tribut√°ria: o impacto nos setores https://drfiscal.com.br/planejamento-e-gestao/reforma-tributaria-o-impacto-nos-setores/\n[3] Reforma Tribut√°ria: quais as √∫ltimas atualiza√ß√µes em 2025 https://www.contabeis.com.br/noticias/71673/reforma-tributaria-quais-as-ultimas-atualizacoes-em-2025/\n[4] Reforma Tribut√°ria 2025 - KPMG Brasil https://kpmg.com/br/pt/home/insights/2025/05/reforma-tributaria-2025-5-passos-essenciais-empresa-preparar.html\n[5] Reforma tribut√°ria: veja o que muda com aprova√ß√£o no ... https://fin.org.br/reforma-tributaria-veja-o-que-muda-com-aprovacao-no-senado/\n[6] Quais setores ser√£o mais afetados com a reforma tribut√°ria? https://portaldacontabilidade.clmcontroller.com.br/quais-setores-serao-mais-afetados-com-a-reforma-tributaria/\n[7] Reforma tribut√°ria pode elevar custos e alterar ... https://fenacon.org.br/reforma-tributaria/reforma-tributaria-pode-elevar-custos-e-alterar-competitividade-do-setor-de-servicos/\n[8] Reforma Tribut√°ria em pr√°tica: impactos e pr√≥ximos passos https://lefosse.com/noticias/reforma-tributaria-em-pratica-impactos-e-proximos-passos/\n[9] Cronograma reforma tribut√°ria: quando entra em vigor? https://blog.tecnospeed.com.br/cronograma-reforma-tributaria-quando-entra-em-vigor/\n[10] Modificada, regulamenta√ß√£o da reforma tribut√°ria volta √† ... https://www12.senado.leg.br/noticias/materias/2025/09/30/modificada-regulamentacao-da-reforma-tributaria-volta-a-camara\n[11] Reforma Tribut√°ria Regulamenta√ß√£o ‚Äî Minist√©rio da Fazenda https://www.gov.br/fazenda/pt-br/acesso-a-informacao/acoes-e-programas/reforma-tributaria\n[12] Reforma Tribut√°ria: √∫ltimas atualiza√ß√µes de 2025 https://qive.com.br/blog/atualizacoes-reforma-tributaria/\n[13] Reforma Tribut√°ria - Portal Gov.br https://www.gov.br/fazenda/pt-br/acesso-a-informacao/acoes-e-programas/reforma-tributaria/apresentacoes/apresentacao-reforma-tributaria-para-o-brasil-crescer-ela-precisa-acontecer-02-8-2023\n[14] Reforma Tribut√°ria: o que √© e quais as mudan√ßas para 2025 https://nsdocs.com.br/blog/reforma-tributaria\n[15] Reforma Tribut√°ria - TOTVS - Espa√ßo Legisla√ß√£o https://espacolegislacao.totvs.com/reforma-tributaria/\n[16] Reforma Tribut√°ria 2025: Desafios e Impactos Econ√¥micos ... https://www.ibmec.br/blog/conteudo-gratuito/reforma-tributaria-nos-moldes-dos-desafios-economicos-e-sociais-globais\n[17] Reforma Tribut√°ria 2025: Impactos e Mudan√ßas nas ... https://www.mantoanadvogados.com.br/blog/reforma-tributaria-2025-quais-mudancas-afetam-sua-empresa-/374\n[18] Veja principais mudan√ßas na reforma tribut√°ria aprovada ... https://www.cnnbrasil.com.br/economia/financas/veja-principais-mudancas-na-reforma-tributaria-aprovada-pelo-senado/\n[19] Reforma Tribut√°ria ‚Äì Perguntas e Respostas - Portal Gov.br https://www.gov.br/fazenda/pt-br/acesso-a-informacao/acoes-e-programas/reforma-tributaria/arquivos/perguntas-e-respostas-reforma-tributaria_.pdf\n[20] Reforma Tribut√°ria 2025: principais pontos e o que falta ... https://www.taxgroup.com.br/intelligence/reforma-tributaria-2025-principais-pontos-e-o-que-falta-para-entrar-em-vigor/\n`;\n"],"names":[],"mappings":";;;;AAAO,MAAM,yBAAyB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DvC,CAAC"}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/services/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\n// Supabase configuration for Next.js environment variables\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error(\n    \"NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY devem estar configuradas no .env.local\"\n  );\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAGoB;AAHpB;;AAEA,2DAA2D;AAC3D,MAAM;AACN,MAAM;AAEN;;AAMO,MAAM,WAAW,IAAA,0MAAY,EAAC,aAAa"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/store.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { processDocument, processText } from \"./api\";\nimport {\n  generateEmbeddings,\n  generateResponse,\n  generateResponseWithRAG,\n  generateTitle,\n  PRIMARY_MODEL,\n  SECONDARY_MODEL,\n  CODE_AGENT_PROMPT,\n  DOCUMENT_AGENT_PROMPT,\n  SUGGESTION_AGENT_PROMPT,\n  getModelWithFallback,\n} from \"./services/geminiService\";\nimport { Document, Message, AgentType, Conversation, Contact } from \"./types\";\nimport { cosineSimilarity } from \"./utils\";\nimport { initialKnowledgeText } from \"./initialKnowledge\";\nimport { taxReformKnowledgeText } from \"./taxReformKnowledge\";\nimport { supabase } from \"./services/supabaseClient\";\nimport { Session, User, AuthError } from \"@supabase/supabase-js\";\n\nconst PRO_TOKEN_LIMIT = 32768; // Token limit for Gemini 2.5 Pro\nconst MAX_CONTEXT_CHUNKS = 5;\nconst PRO_TOKEN_THRESHOLD = 0.7; // Switch to flash at 70% usage\nconst CONVERSATION_CONTEXT_MESSAGES = 4; // Number of recent messages to use as context\n\nconst agentAliases: { [key: string]: AgentType } = {\n  web: \"document\",\n  codigo: \"code\",\n  sugestao: \"suggestion\",\n};\n\n// Escapa as aspas simples para uso dentro de uma string SQL.\nconst initialKnowledgeTextEscaped = initialKnowledgeText.replace(/'/g, \"''\");\nconst taxReformKnowledgeTextEscaped = taxReformKnowledgeText.replace(\n  /'/g,\n  \"''\"\n);\n\n/**\n * Script SQL para configurar as tabelas necess√°rias no Supabase com suporte multi-usu√°rio (RLS).\n * √â seguro executar este script v√°rias vezes.\n */\nconst SETUP_SQL_SCRIPT = `-- Habilita a extens√£o uuid-ossp se ainda n√£o estiver habilitada\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\" WITH SCHEMA extensions;\n\n-- Tabela de perfis de usu√°rio\nCREATE TABLE IF NOT EXISTS public.user_profiles (\n  user_id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,\n  full_name TEXT,\n  user_type TEXT,\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n);\nALTER TABLE public.user_profiles ENABLE ROW LEVEL SECURITY;\nDROP POLICY IF EXISTS \"Os usu√°rios podem gerenciar seu pr√≥prio perfil.\" ON public.user_profiles;\nCREATE POLICY \"Os usu√°rios podem gerenciar seu pr√≥prio perfil.\"\nON public.user_profiles FOR ALL\nUSING (auth.uid() = user_id)\nWITH CHECK (auth.uid() = user_id);\n\n\n-- Tabela de documentos\nCREATE TABLE IF NOT EXISTS public.documents (\n  id UUID PRIMARY KEY DEFAULT extensions.uuid_generate_v4(),\n  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE, -- user_id √© nulo para documentos p√∫blicos\n  name TEXT NOT NULL,\n  content TEXT NOT NULL,\n  is_deletable BOOLEAN DEFAULT TRUE,\n  created_at TIMESTAMPTZ DEFAULT NOW()\n);\n-- Adiciona um √≠ndice √∫nico para nomes de documentos p√∫blicos para o ON CONFLICT funcionar de forma confi√°vel.\nCREATE UNIQUE INDEX IF NOT EXISTS documents_public_name_key ON public.documents (name) WHERE (user_id IS NULL);\nALTER TABLE public.documents ENABLE ROW LEVEL SECURITY;\n-- Pol√≠tica SELECT: permite ver documentos pr√≥prios ou p√∫blicos (user_id IS NULL)\nDROP POLICY IF EXISTS \"Usu√°rios podem visualizar documentos p√∫blicos e os seus pr√≥prios.\" ON public.documents;\nCREATE POLICY \"Usu√°rios podem visualizar documentos p√∫blicos e os seus pr√≥prios.\"\nON public.documents FOR SELECT\nUSING (user_id IS NULL OR user_id = auth.uid());\n-- Pol√≠tica INSERT: s√≥ pode criar documentos para si mesmo\nDROP POLICY IF EXISTS \"Usu√°rios podem criar seus pr√≥prios documentos.\" ON public.documents;\nCREATE POLICY \"Usu√°rios podem criar seus pr√≥prios documentos.\"\nON public.documents FOR INSERT\nWITH CHECK (user_id = auth.uid());\n-- Pol√≠tica UPDATE: s√≥ pode modificar seus pr√≥prios documentos\nDROP POLICY IF EXISTS \"Usu√°rios podem modificar seus pr√≥prios documentos.\" ON public.documents;\nCREATE POLICY \"Usu√°rios podem modificar seus pr√≥prios documentos.\"\nON public.documents FOR UPDATE\nUSING (user_id = auth.uid() AND is_deletable = TRUE)\nWITH CHECK (user_id = auth.uid());\n-- Pol√≠tica DELETE: s√≥ pode excluir seus pr√≥prios documentos\nDROP POLICY IF EXISTS \"Usu√°rios podem excluir seus pr√≥prios documentos.\" ON public.documents;\nCREATE POLICY \"Usu√°rios podem excluir seus pr√≥prios documentos.\"\nON public.documents FOR DELETE\nUSING (user_id = auth.uid() AND is_deletable = TRUE);\n\n\n-- Tabela de conversas\nCREATE TABLE IF NOT EXISTS public.conversations (\n  id UUID PRIMARY KEY DEFAULT extensions.uuid_generate_v4(),\n  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,\n  title TEXT NOT NULL,\n  agent_type TEXT NOT NULL CHECK (agent_type IN ('document', 'code', 'suggestion')),\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n);\nALTER TABLE public.conversations ADD COLUMN IF NOT EXISTS updated_at TIMESTAMPTZ DEFAULT NOW();\nALTER TABLE public.conversations DISABLE ROW LEVEL SECURITY;\nALTER TABLE public.conversations ENABLE ROW LEVEL SECURITY;\n\n-- Pol√≠ticas de seguran√ßa para conversas\nDROP POLICY IF EXISTS \"Usu√°rios podem visualizar suas pr√≥prias conversas ou √≥rf√£s.\" ON public.conversations;\nCREATE POLICY \"Usu√°rios podem visualizar suas pr√≥prias conversas ou √≥rf√£s.\"\nON public.conversations FOR SELECT\nUSING (user_id = auth.uid() OR user_id IS NULL);\n\nDROP POLICY IF EXISTS \"Usu√°rios podem criar conversas para si mesmos.\" ON public.conversations;\nCREATE POLICY \"Usu√°rios podem criar conversas para si mesmos.\"\nON public.conversations FOR INSERT\nWITH CHECK (user_id = auth.uid());\n\nDROP POLICY IF EXISTS \"Usu√°rios podem atualizar suas pr√≥prias conversas ou reivindicar √≥rf√£s.\" ON public.conversations;\nCREATE POLICY \"Usu√°rios podem atualizar suas pr√≥prias conversas ou reivindicar √≥rf√£s.\"\nON public.conversations FOR UPDATE\nUSING (user_id = auth.uid() OR user_id IS NULL)\nWITH CHECK (user_id = auth.uid());\n\nDROP POLICY IF EXISTS \"Usu√°rios podem excluir suas pr√≥prias conversas ou √≥rf√£s.\" ON public.conversations;\nCREATE POLICY \"Usu√°rios podem excluir suas pr√≥prias conversas ou √≥rf√£s.\"\nON public.conversations FOR DELETE\nUSING (user_id = auth.uid() OR user_id IS NULL);\n\n\n-- Tabela de mensagens\nCREATE TABLE IF NOT EXISTS public.messages (\n  id UUID PRIMARY KEY DEFAULT extensions.uuid_generate_v4(),\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  conversation_id UUID NOT NULL REFERENCES public.conversations(id) ON DELETE CASCADE,\n  sender TEXT NOT NULL CHECK (sender IN ('user', 'bot')),\n  text TEXT NOT NULL,\n  sources JSONB,\n  feedback TEXT CHECK (feedback IN ('good', 'bad')),\n  created_at TIMESTAMPTZ DEFAULT NOW()\n);\nALTER TABLE public.messages ENABLE ROW LEVEL SECURITY;\n\n/*\n * **REVIS√ÉO PROFUNDA E CORRE√á√ÉO DEFINITIVA DA POL√çTICA DE MENSAGENS**\n * A causa raiz do problema de exclus√£o √© que a pol√≠tica de mensagens verificava a posse\n * da *mensagem* individual. Isso falhava durante uma exclus√£o em cascata se alguma\n * mensagem legada tivesse um 'user_id' inconsistente.\n * A nova pol√≠tica resolve isso vinculando a permiss√£o para modificar uma mensagem\n * √† posse da *conversa* pai. Se um usu√°rio pode excluir a conversa, ele\n * implicitamente pode excluir todas as mensagens contidas nela. Isso garante\n * que a exclus√£o em cascata funcione corretamente em todos os casos.\n */\nDROP POLICY IF EXISTS \"Usu√°rios podem gerenciar suas mensagens pr√≥prias ou √≥rf√£s.\" ON public.messages;\nDROP POLICY IF EXISTS \"Usu√°rios gerenciam mensagens baseadas na posse da conversa.\" ON public.messages;\nCREATE POLICY \"Usu√°rios gerenciam mensagens baseadas na posse da conversa.\"\nON public.messages FOR ALL\nUSING (\n  EXISTS (\n    SELECT 1 FROM public.conversations\n    WHERE id = messages.conversation_id AND (user_id = auth.uid() OR user_id IS NULL)\n  )\n)\nWITH CHECK (\n  -- A verifica√ß√£o (WITH CHECK) para novas inser√ß√µes/atualiza√ß√µes garante que o usu√°rio\n  -- que est√° agindo seja o dono da mensagem E da conversa, mantendo a integridade.\n  user_id = auth.uid() AND\n  EXISTS (\n    SELECT 1 FROM public.conversations\n    WHERE id = messages.conversation_id AND user_id = auth.uid()\n  )\n);\n\n\n-- √çndices para otimizar buscas\nCREATE INDEX IF NOT EXISTS idx_messages_conversation_id ON public.messages(conversation_id);\nCREATE INDEX IF NOT EXISTS idx_messages_user_id ON public.messages(user_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_updated_at ON public.conversations(updated_at DESC);\n\n\n-- SEED DE DADOS: Insere os documentos da base de conhecimento inicial.\n-- √â seguro rodar isso v√°rias vezes por causa do \"ON CONFLICT\".\n-- A execu√ß√£o deste script no painel do Supabase ignora a RLS, permitindo a inser√ß√£o de documentos p√∫blicos (user_id = NULL).\nINSERT INTO public.documents (name, content, is_deletable, user_id) VALUES\n('Conhecimento - Agente.txt', '${initialKnowledgeTextEscaped}', false, NULL),\n('Conhecimento - Reforma.txt', '${taxReformKnowledgeTextEscaped}', false, NULL)\nON CONFLICT (name) WHERE (user_id IS NULL) DO NOTHING;\n\n\n-- Coment√°rios para clareza\nCOMMENT ON COLUMN public.documents.user_id IS 'Chave estrangeira para o usu√°rio que enviou o documento. NULO para documentos da base de conhecimento global.';\nCOMMENT ON COLUMN public.conversations.user_id IS 'Chave estrangeira para o usu√°rio dono da conversa.';\nCOMMENT ON COLUMN public.messages.user_id IS 'Chave estrangeira para o usu√°rio que criou a mensagem.';\nCOMMENT ON POLICY \"Usu√°rios gerenciam mensagens baseadas na posse da conversa.\" ON public.messages IS 'Permite opera√ß√µes em mensagens se o usu√°rio possuir a conversa pai.';\n`;\n\n/**\n * Gera uma mensagem de erro de configura√ß√£o do banco de dados com o script SQL.\n * @param issue A descri√ß√£o do problema detectado (ex: \"tabela 'profiles' ausente\").\n * @returns Uma string formatada com instru√ß√µes e o script SQL.\n */\nconst generateSetupErrorMessage = (\n  issue: string\n) => `ERRO DE CONFIGURA√á√ÉO DO BANCO DE DADOS\n\nFoi detectado um problema com a estrutura do seu banco de dados: **${issue}**.\n\nIsso geralmente significa que as tabelas ou pol√≠ticas de seguran√ßa (Row Level Security) necess√°rias para separar os dados por usu√°rio est√£o ausentes ou incorretas.\n\nSOLU√á√ÉO:\n1. V√° para o seu projeto em supabase.com.\n2. No menu √† esquerda, clique no √≠cone de \"SQL Editor\".\n3. Clique em \"+ New query\".\n4. Cole o script SQL abaixo e clique em \"RUN\". Este script √© seguro para ser executado v√°rias vezes e ir√° criar ou corrigir as tabelas, pol√≠ticas de seguran√ßa e dados iniciais.\n\n--- SCRIPT SQL PARA COPIAR ---\n${SETUP_SQL_SCRIPT}\n---------------------------------`;\n\n/**\n * Helper to safely extract a detailed error message from a caught value.\n * This function prioritizes the .message property from Error objects and formats Supabase errors.\n * @param error The value caught in a catch block.\n * @returns A formatted string representing the error message.\n */\nfunction getErrorMessage(error: unknown): string {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  if (typeof error === \"object\" && error !== null) {\n    const errObj = error as {\n      message?: string;\n      details?: string;\n      hint?: string;\n      code?: string;\n    };\n    let fullMessage = errObj.message || \"Ocorreu um erro desconhecido.\";\n    if (errObj.details) fullMessage += `\\nDetalhes: ${errObj.details}`;\n    if (errObj.hint) fullMessage += `\\nHINT: ${errObj.hint}`;\n    if (errObj.code) fullMessage += ` (C√≥digo: ${errObj.code})`;\n    return fullMessage;\n  }\n  try {\n    const stringified = JSON.stringify(error);\n    return stringified === \"{}\" ? String(error) : stringified;\n  } catch {\n    return String(error);\n  }\n}\n\ninterface DocumentState {\n  documents: Document[];\n  isLoading: boolean;\n  error: string | null;\n  addDocument: (file: File) => Promise<void>;\n  deleteDocument: (id: string) => Promise<void>;\n  renameDocument: (id: string, newName: string) => Promise<void>;\n  moveToKnowledgeBase: (id: string) => Promise<void>;\n  loadInitialDocuments: () => Promise<void>;\n}\n\nexport const useDocumentStore = create<DocumentState>((set, get) => ({\n  documents: [],\n  isLoading: false,\n  error: null,\n  loadInitialDocuments: async () => {\n    if (get().isLoading) return;\n    set({ isLoading: true, error: null });\n\n    try {\n      // A RLS ir√° filtrar para mostrar os documentos do usu√°rio e os documentos p√∫blicos.\n      // Os documentos p√∫blicos iniciais agora s√£o criados pelo SETUP_SQL_SCRIPT.\n      const { data: dbDocs, error: fetchError } = await supabase\n        .from(\"documents\")\n        .select(\"*\");\n\n      if (fetchError) throw fetchError;\n\n      const processedDocs: Document[] = [];\n      for (const dbDoc of dbDocs) {\n        const processed = await processText(\n          dbDoc.content,\n          dbDoc.name,\n          dbDoc.is_deletable\n        );\n        processed.id = dbDoc.id; // Manter o ID original do banco de dados\n        processed.content = dbDoc.content; // Adicionar o conte√∫do completo\n        processedDocs.push(processed);\n      }\n\n      set({ documents: processedDocs });\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      let errorMessage = `Erro detalhado ao carregar documentos:\\n${detail}`;\n      const isSetupError =\n        typeof detail === \"string\" &&\n        (detail.includes(\"relation\") ||\n          detail.includes(\"does not exist\") ||\n          detail.includes(\"violates row-level security policy\"));\n\n      if (isSetupError) {\n        errorMessage = generateSetupErrorMessage(\n          \"A pol√≠tica de seguran√ßa (RLS) para `documents` pode estar ausente ou incorreta.\"\n        );\n      }\n\n      set({ error: errorMessage });\n      console.error(\"Erro detalhado ao carregar documentos:\", e);\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n  addDocument: async (file) => {\n    set({ isLoading: true, error: null });\n    try {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser(); // Get current user\n      if (!user)\n        throw new Error(\"Usu√°rio n√£o autenticado para adicionar documento.\");\n\n      const newDocument = await processDocument(file);\n      if (newDocument.chunks.length === 0) {\n        throw new Error(\"O documento est√° vazio ou n√£o p√¥de ser processado.\");\n      }\n\n      const documentContent =\n        newDocument.content || newDocument.chunks.map((c) => c.text).join(\"\");\n\n      const { data, error } = await supabase\n        .from(\"documents\")\n        .insert({\n          name: newDocument.name,\n          content: documentContent,\n          is_deletable: true,\n          user_id: user.id, // Associa o documento ao usu√°rio atual\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      // Atualiza o documento em mem√≥ria com o ID confirmado do banco de dados\n      newDocument.id = data.id;\n\n      set((state) => ({ documents: [...state.documents, newDocument] }));\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      set({ error: `Erro ao adicionar documento: ${detail}` });\n      console.error(\"Error adding document:\", e);\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n  deleteDocument: async (id) => {\n    // A pol√≠tica RLS garante que o usu√°rio s√≥ pode deletar seus pr√≥prios documentos.\n    const { error } = await supabase.from(\"documents\").delete().match({ id });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Error deleting document:\", detail);\n      set({ error: detail });\n      return;\n    }\n    set((state) => ({\n      documents: state.documents.filter((doc) => doc.id !== id),\n    }));\n  },\n  renameDocument: async (id, newName) => {\n    // A pol√≠tica RLS garante que o usu√°rio s√≥ pode renomear seus pr√≥prios documentos.\n    const { error } = await supabase\n      .from(\"documents\")\n      .update({ name: newName })\n      .match({ id });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Error renaming document:\", detail);\n      set({ error: detail });\n      return;\n    }\n    set((state) => ({\n      documents: state.documents.map((doc) =>\n        doc.id === id ? { ...doc, name: newName } : doc\n      ),\n    }));\n  },\n  moveToKnowledgeBase: async (id) => {\n    try {\n      set({ isLoading: true, error: null });\n\n      // 1. Obter documento\n      const doc = get().documents.find(d => d.id === id);\n      if (!doc) {\n        throw new Error('Documento n√£o encontrado');\n      }\n\n      if (!doc.content || doc.content.trim().length === 0) {\n        throw new Error('Documento n√£o possui conte√∫do para processar');\n      }\n\n      // 2. Dividir em chunks\n      const { chunkByParagraphs } = await import('./utils/textChunking');\n      const chunks = chunkByParagraphs(doc.content, 800);\n\n      if (chunks.length === 0) {\n        throw new Error('N√£o foi poss√≠vel gerar chunks do documento');\n      }\n\n      console.log(`Processando ${chunks.length} chunks para embeddings...`);\n\n      // 3. Gerar embeddings para cada chunk\n      let successCount = 0;\n      for (const chunk of chunks) {\n        try {\n          // Gerar embedding\n          const embeddingResponse = await fetch('/api/embed', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ text: chunk.text }),\n          });\n\n          if (!embeddingResponse.ok) {\n            console.error(`Erro ao gerar embedding para chunk ${chunk.index}`);\n            continue;\n          }\n\n          const { embedding } = await embeddingResponse.json();\n\n          // Salvar no banco\n          const { error: insertError } = await supabase\n            .from('document_embeddings')\n            .insert({\n              document_id: id,\n              chunk_index: chunk.index,\n              chunk_text: chunk.text,\n              embedding: embedding,\n              metadata: {\n                length: chunk.text.length,\n                processed_at: new Date().toISOString(),\n                document_name: doc.name,\n              },\n            });\n\n          if (insertError) {\n            console.error(`Erro ao salvar embedding ${chunk.index}:`, insertError);\n          } else {\n            successCount++;\n          }\n\n          // Pequeno delay para n√£o sobrecarregar a API\n          await new Promise(resolve => setTimeout(resolve, 100));\n        } catch (chunkError) {\n          console.error(`Erro ao processar chunk ${chunk.index}:`, chunkError);\n        }\n      }\n\n      console.log(`${successCount}/${chunks.length} embeddings salvos com sucesso`);\n\n      if (successCount === 0) {\n        throw new Error('Nenhum embedding foi salvo. Verifique a configura√ß√£o da API.');\n      }\n\n      // 4. Atualizar documento para n√£o-delet√°vel\n      const { error: updateError } = await supabase\n        .from('documents')\n        .update({ is_deletable: false })\n        .match({ id });\n\n      if (updateError) throw updateError;\n\n      // 5. Atualizar estado local\n      set((state) => ({\n        documents: state.documents.map((doc) =>\n          doc.id === id ? { ...doc, isDeletable: false } : doc\n        ),\n        isLoading: false,\n      }));\n\n      console.log(`‚úÖ Documento adicionado √† base com ${successCount} embeddings!`);\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      console.error('Error moving document to knowledge base:', detail);\n      set({\n        error: `Erro ao adicionar √† base: ${detail}`,\n        isLoading: false\n      });\n      throw e;\n    }\n  },\n}));\n\n// Helper to create a new conversation object\nconst createNewConversation = (title = \"Nova Conversa\"): Conversation => ({\n  id: crypto.randomUUID(),\n  title,\n  messages: [],\n  createdAt: Date.now(),\n  updatedAt: Date.now(),\n});\n\ninterface ChatState {\n  documentConversations: Record<string, Conversation>;\n  codeConversations: Record<string, Conversation>;\n  suggestionConversations: Record<string, Conversation>;\n  activeDocumentConversationId: string | null;\n  activeCodeConversationId: string | null;\n  activeSuggestionConversationId: string | null;\n  isLoading: boolean;\n  activeAgent: AgentType;\n  proTokenCount: number;\n  proTokenLimit: number;\n  visibleAgents: boolean; // Se TRUE, mostra dados da LLM (tokens, modelo, etc.)\n  // Auth state\n  session: Session | null;\n  user: User | null;\n  authLoading: boolean;\n  authError: AuthError | null;\n  authMessage: string | null; // For success messages\n  // Auth methods\n  initAuth: () => () => void;\n  signUp: (\n    email: string,\n    password: string,\n    metadata: { [key: string]: any }\n  ) => Promise<void>;\n  signIn: (email: string, password: string) => Promise<void>;\n  signOut: () => Promise<void>;\n  sendPasswordResetEmail: (email: string) => Promise<void>;\n  updatePassword: (password: string) => Promise<void>;\n  clearAuthFeedback: () => void;\n  // Chat methods\n  loadInitialData: () => Promise<void>;\n  setActiveAgent: (agent: AgentType) => void;\n  sendMessage: (userInput: string, documents: Document[]) => Promise<void>;\n  startNewConversation: (agent: AgentType) => Promise<void>;\n  deleteConversation: (\n    agent: AgentType,\n    conversationId: string\n  ) => Promise<void>;\n  setActiveConversation: (agent: AgentType, conversationId: string) => void;\n  setMessageFeedback: (\n    agent: AgentType,\n    conversationId: string,\n    messageId: string,\n    feedback: \"good\" | \"bad\"\n  ) => Promise<void>;\n  sendGeneralFeedback: (message: string) => Promise<void>;\n  deleteMessage: (\n    agent: AgentType,\n    conversationId: string,\n    messageId: string\n  ) => Promise<void>;\n  sendConversationByEmail: (\n    agent: AgentType,\n    conversationId: string,\n    toEmail?: string\n  ) => Promise<void>;\n  saveContact: (contact: Omit<Contact, 'id' | 'created_at'>) => Promise<void>;\n}\n\nexport const useChatStore = create<ChatState>((set, get) => ({\n  documentConversations: {},\n  codeConversations: {},\n  suggestionConversations: {},\n  activeDocumentConversationId: null,\n  activeCodeConversationId: null,\n  activeSuggestionConversationId: null,\n  isLoading: false,\n  activeAgent: \"document\",\n  proTokenCount: 0,\n  proTokenLimit: PRO_TOKEN_LIMIT,\n  visibleAgents: true, // Padr√£o: mostrar dados da LLM\n  // Auth initial state\n  session: null,\n  user: null,\n  authLoading: true,\n  authError: null,\n  authMessage: null,\n\n  // Auth methods\n  initAuth: () => {\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      set({ session, user: session?.user ?? null, authLoading: false });\n    });\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      set({ session, user: session?.user ?? null, authLoading: false });\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  },\n  signUp: async (email, password, metadata) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    useDocumentStore.setState({ error: null });\n\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: { data: metadata },\n    });\n\n    if (error) {\n      const detail = getErrorMessage(error);\n      const isSetupError =\n        detail.toLowerCase().includes(\"database error saving new user\") ||\n        detail.includes(\n          'violates row-level security policy for table \"user_profiles\"'\n        );\n\n      if (isSetupError) {\n        const setupError = {\n          name: \"DatabaseSetupError\",\n          message: generateSetupErrorMessage(\n            \"A cria√ß√£o de perfil de usu√°rio falhou, indicando uma configura√ß√£o de banco de dados incorreta ou pol√≠ticas de RLS ausentes.\"\n          ),\n        } as AuthError;\n        set({ authLoading: false, authError: setupError });\n      } else if (error.message.includes(\"User already registered\")) {\n        const helpfulError = {\n          name: \"UserAlreadyRegisteredError\",\n          message:\n            \"Este e-mail j√° est√° cadastrado.\\n\\n\" +\n            \"1. Se voc√™ ainda n√£o ativou sua conta, por favor, verifique sua caixa de entrada e a pasta de spam para encontrar o e-mail de confirma√ß√£o.\\n\\n\" +\n            '2. Se voc√™ j√° confirmou mas esqueceu a senha, utilize a op√ß√£o \"Esqueci minha senha\" na tela de login.',\n        } as AuthError;\n        set({ authLoading: false, authError: helpfulError });\n      } else {\n        set({ authLoading: false, authError: error });\n      }\n      return;\n    }\n\n    // Add helpful console log for debugging confirmation issues\n    if (\n      data.user &&\n      data.user.identities &&\n      data.user.identities.length === 0\n    ) {\n      console.log(\n        \"Cadastro enviado com sucesso. O usu√°rio est√° aguardando confirma√ß√£o por e-mail e ainda n√£o aparecer√° na tabela auth.users. Verifique o e-mail ou desative a confirma√ß√£o de e-mail nas configura√ß√µes de autentica√ß√£o do Supabase.\"\n      );\n    }\n\n    set({\n      authLoading: false,\n      authError: null,\n      authMessage:\n        \"Cadastro realizado! Verifique seu e-mail para confirmar a conta e poder fazer o login.\",\n    });\n  },\n  signIn: async (email, password) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    set({ authLoading: false, authError: error || null });\n  },\n  signOut: async () => {\n    set({ authLoading: true, authError: null });\n    await supabase.auth.signOut();\n    set({ session: null, user: null, authLoading: false, authError: null });\n  },\n  sendPasswordResetEmail: async (email) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\n      // Opcional: redireciona para uma p√°gina espec√≠fica ap√≥s a redefini√ß√£o\n      // redirectTo: `${window.location.origin}/update-password`,\n    });\n    if (error) {\n      set({ authLoading: false, authError: error });\n    } else {\n      set({\n        authLoading: false,\n        authMessage:\n          \"Se o e-mail estiver correto, voc√™ receber√° um link para redefinir sua senha em breve.\",\n      });\n    }\n  },\n  updatePassword: async (password) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    const { error } = await supabase.auth.updateUser({ password });\n    if (error) {\n      set({ authLoading: false, authError: error });\n    } else {\n      set({\n        authLoading: false,\n        authMessage: \"Senha atualizada com sucesso!\",\n      });\n    }\n  },\n  clearAuthFeedback: () => {\n    set({ authError: null, authMessage: null });\n  },\n\n  loadInitialData: async () => {\n    set({ isLoading: true });\n    useDocumentStore.setState({ error: null });\n\n    await useDocumentStore.getState().loadInitialDocuments();\n\n    if (useDocumentStore.getState().error) {\n      set({ isLoading: false });\n      return;\n    }\n\n    const user = get().user;\n    if (user) {\n      try {\n        // RLS on user_profiles ensures we only get the current user's profile.\n        const { data: profile, error: profileError } = await supabase\n          .from(\"user_profiles\")\n          .select(\"user_id, full_name, visible_agents\")\n          .eq(\"user_id\", user.id)\n          .single();\n\n        const userMetadata = user.user_metadata;\n\n        if (\n          profileError &&\n          profileError.code === \"PGRST116\" &&\n          userMetadata?.full_name\n        ) {\n          console.log(\"Perfil de usu√°rio n√£o encontrado. Criando agora...\");\n          const { error: insertError } = await supabase\n            .from(\"user_profiles\")\n            .insert({\n              user_id: user.id,\n              full_name: userMetadata.full_name,\n              user_type: userMetadata.user_type,\n              visible_agents: true, // Padr√£o: mostrar dados da LLM\n            });\n          if (insertError) throw insertError;\n\n          // Definir padr√£o no estado\n          set({ visibleAgents: true });\n        } else if (profileError && profileError.code !== \"PGRST116\") {\n          throw profileError;\n        } else if (profile) {\n          // Atualizar estado com o valor do banco\n          set({ visibleAgents: profile.visible_agents ?? true });\n        }\n      } catch (e) {\n        const detail = getErrorMessage(e);\n        const isSetupError =\n          detail.includes('relation \"public.user_profiles\" does not exist') ||\n          (detail.includes(\"column\") && detail.includes(\"does not exist\")) ||\n          detail.includes(\"violates row-level security policy\");\n\n        if (isSetupError) {\n          let reason = \"tabela ausente\";\n          if (detail.includes(\"column\"))\n            reason = \"estrutura de coluna incorreta\";\n          if (detail.includes(\"security policy\"))\n            reason = \"pol√≠ticas de seguran√ßa ausentes ou incorretas\";\n\n          useDocumentStore.setState({\n            error: generateSetupErrorMessage(`user_profiles (${reason})`),\n          });\n          set({ isLoading: false });\n          return; // Interrompe o carregamento se o BD n√£o estiver configurado\n        }\n\n        console.error(\"Erro durante a verifica√ß√£o/cria√ß√£o do perfil:\", detail);\n      }\n    }\n\n    try {\n      // RLS transparently filters these queries to the logged-in user.\n      const { data: convos, error: convoError } = await supabase\n        .from(\"conversations\")\n        .select(\"*\");\n      if (convoError) throw convoError;\n\n      const { data: messages, error: msgError } = await supabase\n        .from(\"messages\")\n        .select(\"*\")\n        .order(\"created_at\", { ascending: true });\n      if (msgError) throw msgError;\n\n      const docConvos: Record<string, Conversation> = {};\n      const codeConvos: Record<string, Conversation> = {};\n      const suggestionConvos: Record<string, Conversation> = {};\n\n      for (const convo of convos) {\n        const convoMessages = messages\n          .filter((m) => m.conversation_id === convo.id)\n          .map((m) => ({\n            id: m.id,\n            sender: m.sender as \"user\" | \"bot\",\n            text: m.text,\n            feedback: m.feedback as \"good\" | \"bad\" | null,\n            sources: m.sources,\n            createdAt: new Date(m.created_at).getTime(),\n          }));\n\n        const conversationObject: Conversation = {\n          id: convo.id,\n          title: convo.title,\n          createdAt: new Date(convo.created_at).getTime(),\n          updatedAt: convo.updated_at\n            ? new Date(convo.updated_at).getTime()\n            : new Date(convo.created_at).getTime(),\n          messages: convoMessages,\n        };\n\n        if (convo.agent_type === \"document\") {\n          docConvos[convo.id] = conversationObject;\n        } else if (convo.agent_type === \"code\") {\n          codeConvos[convo.id] = conversationObject;\n        } else if (convo.agent_type === \"suggestion\") {\n          suggestionConvos[convo.id] = conversationObject;\n        }\n      }\n\n      const sortConversations = (a: Conversation, b: Conversation) =>\n        (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt);\n\n      const sortedDocIds = Object.values(docConvos)\n        .sort(sortConversations)\n        .map((c) => c.id);\n      const sortedCodeIds = Object.values(codeConvos)\n        .sort(sortConversations)\n        .map((c) => c.id);\n      const sortedSuggestionIds = Object.values(suggestionConvos)\n        .sort(sortConversations)\n        .map((c) => c.id);\n\n      set({\n        documentConversations: docConvos,\n        codeConversations: codeConvos,\n        suggestionConversations: suggestionConvos,\n        activeDocumentConversationId: null,\n        activeCodeConversationId: null,\n        activeSuggestionConversationId: null,\n      });\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      let errorMessage = `Erro ao carregar o hist√≥rico de conversas: ${detail}`;\n      const isSetupError =\n        typeof detail === \"string\" &&\n        (detail.includes(\"relation\") ||\n          detail.includes(\"does not exist\") ||\n          detail.includes(\"violates row-level security policy\"));\n\n      if (isSetupError) {\n        errorMessage = generateSetupErrorMessage(\n          \"A pol√≠tica de seguran√ßa (RLS) para `conversations` ou `messages` pode estar ausente ou incorreta.\"\n        );\n      }\n\n      useDocumentStore.setState({ error: errorMessage });\n      console.error(\"Erro detalhado ao carregar conversas:\", e);\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n\n  setActiveAgent: (agent) => {\n    set({ activeAgent: agent });\n  },\n\n  startNewConversation: async (agent) => {\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      const errorMsg =\n        \"Usu√°rio n√£o autenticado. N√£o √© poss√≠vel criar uma nova conversa.\";\n      console.error(errorMsg);\n      useDocumentStore.setState({ error: errorMsg });\n      return;\n    }\n\n    const newConvo = createNewConversation();\n    const { error } = await supabase.from(\"conversations\").insert({\n      id: newConvo.id,\n      user_id: user.id, // Explicitamente define o propriet√°rio\n      title: newConvo.title,\n      agent_type: agent,\n      created_at: new Date(newConvo.createdAt).toISOString(),\n      updated_at: new Date(newConvo.updatedAt).toISOString(),\n    });\n\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to create conversation:\", detail);\n      const isSetupError =\n        typeof detail === \"string\" &&\n        (detail.includes(\"violates row-level security policy\") ||\n          (detail.includes(\"column\") && detail.includes(\"does not exist\")) ||\n          detail.includes(\"PGRST204\")); // C√≥digo de erro do Supabase para coluna n√£o encontrada no cache do esquema\n\n      if (isSetupError) {\n        const errorMessage = generateSetupErrorMessage(\n          \"Falha ao criar conversa. A estrutura da tabela `conversations` parece estar desatualizada ou incorreta.\"\n        );\n        useDocumentStore.setState({ error: errorMessage });\n      } else {\n        useDocumentStore.setState({\n          error: `Falha ao criar a conversa: ${detail}`,\n        });\n      }\n      return;\n    }\n\n    switch (agent) {\n      case \"document\":\n        set((state) => ({\n          documentConversations: {\n            ...state.documentConversations,\n            [newConvo.id]: newConvo,\n          },\n          activeDocumentConversationId: newConvo.id,\n        }));\n        break;\n      case \"code\":\n        set((state) => ({\n          codeConversations: {\n            ...state.codeConversations,\n            [newConvo.id]: newConvo,\n          },\n          activeCodeConversationId: newConvo.id,\n        }));\n        break;\n      case \"suggestion\":\n        set((state) => ({\n          suggestionConversations: {\n            ...state.suggestionConversations,\n            [newConvo.id]: newConvo,\n          },\n          activeSuggestionConversationId: newConvo.id,\n        }));\n        break;\n    }\n  },\n\n  deleteConversation: async (agent, conversationId) => {\n    let conversationKey: keyof ChatState | null = null;\n    let activeIdKey: keyof ChatState | null = null;\n\n    if (agent === \"document\") {\n      conversationKey = \"documentConversations\";\n      activeIdKey = \"activeDocumentConversationId\";\n    } else if (agent === \"code\") {\n      conversationKey = \"codeConversations\";\n      activeIdKey = \"activeCodeConversationId\";\n    } else if (agent === \"suggestion\") {\n      conversationKey = \"suggestionConversations\";\n      activeIdKey = \"activeSuggestionConversationId\";\n    }\n\n    if (!conversationKey || !activeIdKey) return;\n\n    const originalConversations = get()[conversationKey] as Record<\n      string,\n      Conversation\n    >;\n    const originalActiveId = get()[activeIdKey] as string | null;\n\n    const updatedConversations = { ...originalConversations };\n    delete updatedConversations[conversationId];\n\n    let newActiveId = originalActiveId;\n    if (newActiveId === conversationId) {\n      const remainingIds = Object.values(updatedConversations)\n        .sort(\n          (a, b) => (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt)\n        )\n        .map((c) => c.id);\n      newActiveId = remainingIds[0] || null;\n    }\n\n    set({\n      [conversationKey]: updatedConversations,\n      [activeIdKey]: newActiveId,\n    });\n\n    const { error } = await supabase\n      .from(\"conversations\")\n      .delete()\n      .match({ id: conversationId });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to delete conversation:\", detail);\n      useDocumentStore.setState({\n        error: `Falha ao excluir a conversa: ${detail}`,\n      });\n      set({\n        [conversationKey]: originalConversations,\n        [activeIdKey]: originalActiveId,\n      });\n    }\n\n\n  },\n\n  setActiveConversation: (agent, conversationId) => {\n    switch (agent) {\n      case \"document\":\n        set({ activeDocumentConversationId: conversationId });\n        break;\n      case \"code\":\n        set({ activeCodeConversationId: conversationId });\n        break;\n      case \"suggestion\":\n        set({ activeSuggestionConversationId: conversationId });\n        break;\n    }\n  },\n\n  setMessageFeedback: async (agent, conversationId, messageId, feedback) => {\n    let conversationKey:\n      | \"documentConversations\"\n      | \"codeConversations\"\n      | \"suggestionConversations\"\n      | null = null;\n    if (agent === \"document\") conversationKey = \"documentConversations\";\n    else if (agent === \"code\") conversationKey = \"codeConversations\";\n    else if (agent === \"suggestion\")\n      conversationKey = \"suggestionConversations\";\n    if (!conversationKey) return;\n\n    const conversations = get()[conversationKey];\n    const conversation = conversations[conversationId];\n    if (!conversation) return;\n\n    const message = conversation.messages.find((m) => m.id === messageId);\n    if (!message) return;\n\n    const newFeedback = message.feedback === feedback ? null : feedback;\n\n    const updatedMessages = conversation.messages.map((msg) =>\n      msg.id === messageId ? { ...msg, feedback: newFeedback } : msg\n    );\n    set((state) => ({\n      [conversationKey!]: {\n        ...state[conversationKey!],\n        [conversationId]: { ...conversation, messages: updatedMessages },\n      },\n    }));\n\n    const { error } = await supabase\n      .from(\"messages\")\n      .update({ feedback: newFeedback })\n      .match({ id: messageId });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to set feedback:\", detail);\n      useDocumentStore.setState({\n        error: `Falha ao salvar o feedback: ${detail}`,\n      });\n      set((state) => ({\n        [conversationKey!]: {\n          ...state[conversationKey!],\n          [conversationId]: {\n            ...conversation,\n            messages: conversation.messages,\n          },\n        },\n      }));\n    }\n  },\n\n  deleteMessage: async (agent, conversationId, messageId) => {\n    let conversationKey: keyof ChatState | undefined;\n    if (agent === \"document\") conversationKey = \"documentConversations\";\n    else if (agent === \"code\") conversationKey = \"codeConversations\";\n    else if (agent === \"suggestion\") conversationKey = \"suggestionConversations\";\n\n    if (!conversationKey) return;\n\n    const state = get();\n    // @ts-ignore\n    const conversations = state[conversationKey] as Record<string, Conversation>;\n    const conversation = conversations[conversationId];\n\n    if (!conversation) {\n      console.error(`Conversation not found: ${conversationId}`);\n      return;\n    }\n\n    const updatedMessages = conversation.messages.filter(\n      (msg) => msg.id !== messageId\n    );\n\n    set((state) => ({\n      [conversationKey!]: {\n        ...state[conversationKey!],\n        [conversationId]: {\n          ...conversation,\n          messages: updatedMessages,\n          updatedAt: Date.now(),\n        },\n      },\n    }));\n  },\n\n  sendConversationByEmail: async (agent, conversationId, toEmail) => {\n    const user = get().user;\n    if (!user || !user.email) {\n      throw new Error(\"Usu√°rio n√£o possui email cadastrado.\");\n    }\n\n    let conversationKey: keyof ChatState | undefined;\n    if (agent === \"document\") conversationKey = \"documentConversations\";\n    else if (agent === \"code\") conversationKey = \"codeConversations\";\n    else if (agent === \"suggestion\") conversationKey = \"suggestionConversations\";\n\n    if (!conversationKey) return;\n\n    const state = get();\n    // @ts-ignore\n    const conversations = state[conversationKey] as Record<string, Conversation>;\n    const conversation = conversations[conversationId];\n\n    if (!conversation) {\n      throw new Error(\"Conversa n√£o encontrada.\");\n    }\n\n    try {\n      const response = await fetch(\"/api/send-email\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: toEmail || user.email,\n          conversationTitle: conversation.title,\n          messages: conversation.messages,\n          userName: user.user_metadata?.full_name || user.email,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error?.message || \"Falha ao enviar email.\");\n      }\n    } catch (error: any) {\n      console.error(\"Erro ao enviar conversa por email:\", error);\n      throw error;\n    }\n  },\n\n  saveContact: async (contact) => {\n    try {\n      const { error } = await supabase.from('contacts').insert([contact]);\n      if (error) {\n        console.error('Supabase insert error:', error);\n        throw error;\n      }\n    } catch (e: any) {\n      console.error('Unexpected error in saveContact:', e);\n      const errMsg = typeof e === 'object' ? JSON.stringify(e) : String(e);\n      throw new Error(errMsg || 'Unexpected error while saving contact');\n    }\n  },\n\n  sendGeneralFeedback: async (message) => {\n    const user = get().user;\n    const { error } = await supabase.from(\"feedbacks\").insert({\n      user_id: user?.id || null,\n      message: message,\n    });\n\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to send feedback:\", detail);\n      throw new Error(`Falha ao enviar feedback: ${detail}`);\n    }\n  },\n\n  sendMessage: async (userInput, documents) => {\n    const originalUserInput = userInput.trim();\n    if (!originalUserInput) return;\n\n    const currentError = useDocumentStore.getState().error;\n    if (\n      currentError &&\n      !currentError.includes(\"ERRO DE CONFIGURA√á√ÉO DO BANCO DE DADOS\")\n    ) {\n      useDocumentStore.setState({ error: null });\n    }\n\n    const user = get().user;\n    if (!user) {\n      const errorMsg =\n        \"Usu√°rio n√£o autenticado. A mensagem n√£o pode ser enviada. Por favor, fa√ßa o login novamente.\";\n      console.error(errorMsg);\n      useDocumentStore.setState({ error: errorMsg });\n      set({ isLoading: false });\n      return;\n    }\n\n    let agentForThisMessage = get().activeAgent;\n    let finalUserInput = originalUserInput;\n\n    const match = originalUserInput.match(/^@(\\w+)/);\n    if (match) {\n      const alias = match[1].toLowerCase();\n      const resolvedAgent = agentAliases[alias];\n      if (resolvedAgent) {\n        agentForThisMessage = resolvedAgent;\n        finalUserInput = originalUserInput.replace(/^@\\w+\\s?/, \"\").trim();\n      }\n    }\n\n    if (!finalUserInput) {\n      if (get().activeAgent !== agentForThisMessage) {\n        get().setActiveAgent(agentForThisMessage);\n      }\n      return;\n    }\n\n    if (get().activeAgent !== agentForThisMessage) {\n      set({ activeAgent: agentForThisMessage });\n    }\n\n    const activeAgent = get().activeAgent;\n    let activeConversationId: string | null;\n    let conversationKey:\n      | \"documentConversations\"\n      | \"codeConversations\"\n      | \"suggestionConversations\";\n\n    switch (activeAgent) {\n      case \"document\":\n        activeConversationId = get().activeDocumentConversationId;\n        conversationKey = \"documentConversations\";\n        break;\n      case \"code\":\n        activeConversationId = get().activeCodeConversationId;\n        conversationKey = \"codeConversations\";\n        break;\n      case \"suggestion\":\n        activeConversationId = get().activeSuggestionConversationId;\n        conversationKey = \"suggestionConversations\";\n        break;\n    }\n\n    if (!activeConversationId) {\n      await get().startNewConversation(activeAgent);\n      activeConversationId = (get() as any)[\n        `active${activeAgent.charAt(0).toUpperCase() + activeAgent.slice(1)\n        }ConversationId`\n      ];\n      if (!activeConversationId) {\n        console.error(\"Failed to create or find an active conversation.\");\n        useDocumentStore.setState({\n          error: \"Falha ao criar ou encontrar uma conversa ativa.\",\n        });\n        return;\n      }\n    }\n\n    const isNewConversation =\n      ((get()[conversationKey] as Record<string, Conversation>)[\n        activeConversationId!\n      ]?.messages.length ?? 0) === 0;\n\n    const userMessage: Message = {\n      id: crypto.randomUUID(),\n      sender: \"user\",\n      text: finalUserInput,\n      createdAt: Date.now(),\n    };\n\n    set((state) => {\n      const conversations = state[conversationKey];\n      const currentConvo = conversations?.[activeConversationId!];\n      if (currentConvo) {\n        return {\n          [conversationKey]: {\n            ...conversations,\n            [activeConversationId!]: {\n              ...currentConvo,\n              messages: [...currentConvo.messages, userMessage],\n            },\n          },\n        };\n      }\n      return state;\n    });\n    set({ isLoading: true });\n\n    const { error: userMsgError } = await supabase.from(\"messages\").insert({\n      id: userMessage.id,\n      conversation_id: activeConversationId,\n      sender: \"user\",\n      text: finalUserInput,\n      sources: null,\n      created_at: new Date(userMessage.createdAt).toISOString(),\n      user_id: user.id,\n    });\n    if (userMsgError) {\n      const detail = getErrorMessage(userMsgError);\n      console.error(\"Failed to save user message:\", detail);\n      useDocumentStore.setState({\n        error: `Falha ao salvar sua mensagem: ${detail}`,\n      });\n    }\n\n    if (isNewConversation) {\n      generateTitle(finalUserInput).then(async (title) => {\n        const finalTitle = title || finalUserInput.substring(0, 30);\n        const { error } = await supabase\n          .from(\"conversations\")\n          .update({ title: finalTitle, user_id: user.id })\n          .match({ id: activeConversationId });\n        if (error) {\n          const detail = getErrorMessage(error);\n          console.error(\"Failed to update title:\", detail);\n          useDocumentStore.setState({\n            error: `Falha ao atualizar o t√≠tulo: ${detail}`,\n          });\n        }\n\n        set((state) => {\n          const conversations = state[conversationKey];\n          const currentConvo = conversations?.[activeConversationId!];\n          if (currentConvo) {\n            return {\n              [conversationKey]: {\n                ...conversations,\n                [activeConversationId!]: { ...currentConvo, title: finalTitle },\n              },\n            };\n          }\n          return state;\n        });\n      });\n    }\n\n    let context = \"\";\n    let prompt = finalUserInput;\n    let preferredModel = SECONDARY_MODEL;\n    let useWebSearch = false;\n\n    try {\n      // Seleciona o modelo ideal para o tipo de agente com fallback inteligente\n      preferredModel = getModelWithFallback(activeAgent);\n\n      if (activeAgent === \"document\" && documents.length > 0) {\n        const queryEmbedding = (await generateEmbeddings([finalUserInput]))[0];\n        const allChunks = documents.flatMap((doc) => doc.chunks);\n        if (allChunks.length > 0 && queryEmbedding) {\n          const chunksWithSimilarity = allChunks\n            .map((chunk) => ({\n              ...chunk,\n              similarity: cosineSimilarity(queryEmbedding, chunk.embedding),\n            }))\n            .sort((a, b) => b.similarity - a.similarity);\n          const lambda = 0.7;\n          const relevantChunks: (typeof chunksWithSimilarity)[0][] = [];\n          let candidates = chunksWithSimilarity;\n\n          if (candidates.length > 0) {\n            relevantChunks.push(candidates[0]);\n            candidates = candidates.slice(1);\n            while (\n              relevantChunks.length < MAX_CONTEXT_CHUNKS &&\n              candidates.length > 0\n            ) {\n              let bestCandidateIndex = -1;\n              let maxMmrScore = -Infinity;\n              for (let i = 0; i < candidates.length; i++) {\n                const candidate = candidates[i];\n                const similarityToQuery = candidate.similarity;\n                const maxSimilarityToSelected = Math.max(\n                  ...relevantChunks.map((selected) =>\n                    cosineSimilarity(candidate.embedding, selected.embedding)\n                  )\n                );\n                const mmrScore =\n                  lambda * similarityToQuery -\n                  (1 - lambda) * maxSimilarityToSelected;\n                if (mmrScore > maxMmrScore) {\n                  maxMmrScore = mmrScore;\n                  bestCandidateIndex = i;\n                }\n              }\n              if (bestCandidateIndex !== -1) {\n                relevantChunks.push(candidates[bestCandidateIndex]);\n                candidates.splice(bestCandidateIndex, 1);\n              } else {\n                break;\n              }\n            }\n          }\n          if (relevantChunks.length > 0 && relevantChunks[0].similarity > 0.5) {\n            context = relevantChunks\n              .map((chunk) => chunk.text)\n              .join(\"\\n\\n---\\n\\n\");\n          }\n        }\n      }\n\n      if (activeAgent === \"document\") {\n        useWebSearch = true;\n        if (context) {\n          prompt = `${DOCUMENT_AGENT_PROMPT}\\n\\nCom base no seguinte contexto recuperado de seus documentos de conhecimento, responda √† pergunta do usu√°rio. Priorize estritamente as informa√ß√µes do contexto. Se o contexto n√£o for suficiente, indique isso e use a busca na web para complementar.\\n\\nContexto:\\n${context}\\n\\n---\\n\\nPergunta do usu√°rio: ${finalUserInput}`;\n        } else {\n          prompt = `${DOCUMENT_AGENT_PROMPT}\\n\\nResponda √† pergunta do usu√°rio usando seu conhecimento fundamental e a busca na web, pois nenhum contexto relevante foi encontrado nos documentos enviados. Sempre cite as fontes da web que utilizar.\\n\\nPergunta: ${finalUserInput}`;\n        }\n      } else if (activeAgent === \"code\") {\n        let conversationContext = \"\";\n        const currentConvo = (\n          get()[conversationKey] as Record<string, Conversation>\n        )[activeConversationId!];\n        if (currentConvo && currentConvo.messages.length > 1) {\n          const conversationHistory = currentConvo.messages.slice(0, -1);\n          const recentMessages = conversationHistory.slice(\n            -CONVERSATION_CONTEXT_MESSAGES\n          );\n          if (recentMessages.length > 0) {\n            const historyText = recentMessages\n              .map(\n                (msg) =>\n                  `${msg.sender === \"user\" ? \"Usu√°rio\" : \"Assistente\"}: ${msg.text\n                  }`\n              )\n              .join(\"\\n\");\n            conversationContext = `Considere o hist√≥rico recente desta conversa como contexto:\\n\\n--- HIST√ìRICO DA CONVERSA ---\\n${historyText}\\n--- FIM DO HIST√ìRICO ---\\n\\n`;\n          }\n        }\n        prompt = `${CODE_AGENT_PROMPT}\\n\\n${conversationContext}Tarefa do usu√°rio: ${finalUserInput}`;\n      } else if (activeAgent === \"suggestion\") {\n        prompt = `${SUGGESTION_AGENT_PROMPT}\\n\\nPergunta do usu√°rio para melhorar: \"${finalUserInput}\"`;\n        useWebSearch = false;\n      }\n\n      const proTokenCount = get().proTokenCount + prompt.length / 4;\n      set({ proTokenCount });\n\n      let modelToUse = preferredModel;\n      if (\n        preferredModel === PRIMARY_MODEL &&\n        proTokenCount > PRO_TOKEN_LIMIT * PRO_TOKEN_THRESHOLD\n      ) {\n        modelToUse = SECONDARY_MODEL;\n        console.warn(\n          `Token limit for ${PRIMARY_MODEL} is approaching. Switching to ${SECONDARY_MODEL} for this request.`\n        );\n      }\n\n      // Usar RAG apenas para o agente de documentos\n      let text: string;\n      let sources: any[] = [];\n      let contextUsed = false;\n      let documentsReferenced: string[] = [];\n\n      if (activeAgent === \"document\") {\n        // Usar RAG para agente de documentos\n        const ragResponse = await generateResponseWithRAG(\n          modelToUse,\n          finalUserInput,\n          DOCUMENT_AGENT_PROMPT,\n          '', // Hist√≥rico j√° est√° no contexto do prompt\n          useWebSearch\n        );\n        text = ragResponse.text;\n        sources = ragResponse.sources;\n        contextUsed = ragResponse.contextUsed;\n        documentsReferenced = ragResponse.documentsReferenced;\n\n        // Log para debug\n        if (contextUsed) {\n          console.log(`[RAG] Resposta gerada usando ${documentsReferenced.length} documento(s): ${documentsReferenced.join(', ')}`);\n        } else {\n          console.log('[RAG] Resposta gerada sem contexto de documentos');\n        }\n      } else {\n        // Usar resposta normal para outros agentes\n        const response = await generateResponse(\n          modelToUse,\n          prompt,\n          useWebSearch\n        );\n        text = response.text;\n        sources = response.sources;\n      }\n\n      const now = Date.now();\n      const botMessage: Message = {\n        id: crypto.randomUUID(),\n        sender: \"bot\",\n        text,\n        sources,\n        createdAt: now,\n      };\n\n      const { error: botMsgError } = await supabase.from(\"messages\").insert({\n        id: botMessage.id,\n        conversation_id: activeConversationId,\n        sender: \"bot\",\n        text: botMessage.text,\n        sources: botMessage.sources,\n        created_at: new Date(botMessage.createdAt).toISOString(),\n        user_id: user.id,\n      });\n      if (botMsgError) {\n        const detail = getErrorMessage(botMsgError);\n        console.error(\"Failed to save bot message:\", detail);\n        useDocumentStore.setState({\n          error: `Falha ao salvar a resposta do assistente: ${detail}`,\n        });\n      }\n\n      const { error: convoUpdateError } = await supabase\n        .from(\"conversations\")\n        .update({ updated_at: new Date(now).toISOString() })\n        .match({ id: activeConversationId });\n      if (convoUpdateError) {\n        console.error(\n          \"Failed to update conversation timestamp:\",\n          getErrorMessage(convoUpdateError)\n        );\n      }\n\n      set((state) => {\n        const conversations = state[conversationKey];\n        const currentConvo = conversations?.[activeConversationId!];\n        if (currentConvo) {\n          return {\n            [conversationKey]: {\n              ...conversations,\n              [activeConversationId!]: {\n                ...currentConvo,\n                messages: [...currentConvo.messages, botMessage],\n                updatedAt: now,\n              },\n            },\n          };\n        }\n        return state;\n      });\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      console.error(\"Error generating response:\", detail);\n      const errorTime = Date.now();\n      const errorMessage: Message = {\n        id: crypto.randomUUID(),\n        sender: \"bot\",\n        text: `Ocorreu um erro ao processar sua solicita√ß√£o. Por favor, tente novamente.\\n\\nDetalhes do erro:\\n\\`\\`\\`\\n${detail}\\n\\`\\`\\``,\n        createdAt: errorTime,\n      };\n\n      const { error: convoUpdateError } = await supabase\n        .from(\"conversations\")\n        .update({ updated_at: new Date(errorTime).toISOString() })\n        .match({ id: activeConversationId });\n      if (convoUpdateError) {\n        console.error(\n          \"Failed to update conversation timestamp on error:\",\n          getErrorMessage(convoUpdateError)\n        );\n      }\n\n      set((state) => {\n        const conversations = state[conversationKey];\n        const currentConvo = conversations?.[activeConversationId!];\n        if (currentConvo) {\n          return {\n            [conversationKey]: {\n              ...conversations,\n              [activeConversationId!]: {\n                ...currentConvo,\n                messages: [...currentConvo.messages, errorMessage],\n                updatedAt: errorTime,\n              },\n            },\n          };\n        }\n        return state;\n      });\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2053, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/BotIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const BotIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n    aria-label=\"√çcone do Rob√¥\"\n  >\n    <path d=\"M12 2a2 2 0 0 1 2 2v2h-4V4a2 2 0 0 1 2-2zM4.636 8.364A9 9 0 0 1 12 4a9 9 0 0 1 7.364 4.364L20 10v6a2 2 0 0 1-2 2h-1.586l-1.707-1.707A4.002 4.002 0 0 0 12 15a4.002 4.002 0 0 0-2.707 1.293L7.586 18H6a2 2 0 0 1-2-2v-6l.636-1.636zM9 12a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm6 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\" />\n    <path d=\"M5 20h14a1 1 0 0 1 1 1v1H4v-1a1 1 0 0 1 1-1z\" />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;QACX,cAAW;;0BAEX,6LAAC;gBAAK,GAAE;;;;;;0BACR,6LAAC;gBAAK,GAAE;;;;;;;;;;;;KATC"}},
    {"offset": {"line": 2096, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/UserIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const UserIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n  >\n    <path\n      fillRule=\"evenodd\"\n      d=\"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;kBAEX,cAAA,6LAAC;YACC,UAAS;YACT,GAAE;YACF,UAAS;;;;;;;;;;;KAVF"}},
    {"offset": {"line": 2131, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ClipboardIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ClipboardIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 0 1-2.25 2.25H9.75A2.25 2.25 0 0 1 7.5 4.5v0a2.25 2.25 0 0 1 2.25-2.25h3.879a2.25 2.25 0 0 1 1.95.879Z\"\n    />\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M9 11.25h6M9 13.5h6M9 15.75h6M4.5 5.25v13.5A2.25 2.25 0 0 0 6.75 21h10.5A2.25 2.25 0 0 0 19.5 18.75V5.25c0-1.076-.874-1.95-1.95-1.95H7.2a1.95 1.95 0 0 0-1.95 1.95Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAkD,CAAC,EAAE,SAAS,EAAE,iBAC3E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;;0BAEX,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;0BAEJ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;;;;;;;KAjBK"}},
    {"offset": {"line": 2179, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/CheckIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const CheckIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m4.5 12.75 6 6 9-13.5\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,YAA8C,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 2216, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/SaveIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const SaveIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\" \n      d=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\" \n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2254, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/CodeBlock.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ClipboardIcon } from './icons/ClipboardIcon';\nimport { CheckIcon } from './icons/CheckIcon';\nimport { SaveIcon } from './icons/SaveIcon';\n\ninterface CodeBlockProps {\n  language: string;\n  code: string;\n}\n\nconst CodeBlock: React.FC<CodeBlockProps> = ({ language, code }) => {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(code).then(() => {\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000); // Reset after 2 seconds\n    });\n  };\n\n  // Mapeia identificadores comuns de linguagem para extens√µes de arquivo\n  const languageToFileExtension: { [key: string]: string } = {\n    python: 'py',\n    py: 'py',\n    javascript: 'js',\n    js: 'js',\n    typescript: 'ts',\n    ts: 'ts',\n    html: 'html',\n    css: 'css',\n    json: 'json',\n    delphi: 'pas', // A extens√£o de Delphi/Pascal √© frequentemente .pas\n    pascal: 'pas',\n  };\n\n  const fileExtension = languageToFileExtension[language.toLowerCase()];\n\n  const handleSave = () => {\n    // Usa um tipo MIME gen√©rico de texto/plano para o blob\n    const blob = new Blob([code], { type: 'text/plain;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    // Usa a extens√£o determinada para o nome do arquivo, com fallback para .txt se desconhecida\n    a.download = `codigo_gerado_${Date.now()}.${fileExtension || 'txt'}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // O bot√£o de salvar agora aparecer√° para qualquer linguagem com uma extens√£o mapeada.\n  const canSave = !!fileExtension;\n\n  return (\n    <div className=\"my-4 rounded-lg bg-black border border-white/20 overflow-hidden\">\n      <div className=\"flex items-center justify-between px-4 py-2 bg-white/10\">\n        <span className=\"text-xs font-semibold text-gray-400 uppercase\">{language}</span>\n        <div className=\"flex items-center gap-4\">\n          {canSave && (\n            <button\n              onClick={handleSave}\n              className=\"flex items-center gap-1.5 text-xs text-gray-400 hover:text-white transition-colors\"\n            >\n              <SaveIcon className=\"w-4 h-4\" />\n              Salvar .{fileExtension}\n            </button>\n          )}\n          <button\n            onClick={handleCopy}\n            className=\"flex items-center gap-1.5 text-xs text-gray-400 hover:text-white transition-colors\"\n          >\n            {copied ? (\n              <>\n                <CheckIcon className=\"w-4 h-4 text-white\" />\n                Copiado!\n              </>\n            ) : (\n              <>\n                <ClipboardIcon className=\"w-4 h-4\" />\n                Copiar\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n      <pre className=\"p-4 text-sm text-white overflow-x-auto\">\n        <code>{code}</code>\n      </pre>\n    </div>\n  );\n};\n\nexport default CodeBlock;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AAOA,MAAM,YAAsC,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;;IAC7D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,aAAa;QACjB,UAAU,SAAS,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC;YACvC,UAAU;YACV,WAAW,IAAM,UAAU,QAAQ,OAAO,wBAAwB;QACpE;IACF;IAEA,uEAAuE;IACvE,MAAM,0BAAqD;QACzD,QAAQ;QACR,IAAI;QACJ,YAAY;QACZ,IAAI;QACJ,YAAY;QACZ,IAAI;QACJ,MAAM;QACN,KAAK;QACL,MAAM;QACN,QAAQ;QACR,QAAQ;IACV;IAEA,MAAM,gBAAgB,uBAAuB,CAAC,SAAS,WAAW,GAAG;IAErE,MAAM,aAAa;QACjB,uDAAuD;QACvD,MAAM,OAAO,IAAI,KAAK;YAAC;SAAK,EAAE;YAAE,MAAM;QAA2B;QACjE,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,4FAA4F;QAC5F,EAAE,QAAQ,GAAG,CAAC,cAAc,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,iBAAiB,OAAO;QACpE,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,EAAE,KAAK;QACP,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,IAAI,eAAe,CAAC;IACtB;IAEA,sFAAsF;IACtF,MAAM,UAAU,CAAC,CAAC;IAElB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAAiD;;;;;;kCACjE,6LAAC;wBAAI,WAAU;;4BACZ,yBACC,6LAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,6LAAC,+IAAQ;wCAAC,WAAU;;;;;;oCAAY;oCACvB;;;;;;;0CAGb,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAET,uBACC;;sDACE,6LAAC,iJAAS;4CAAC,WAAU;;;;;;wCAAuB;;iEAI9C;;sDACE,6LAAC,yJAAa;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;;;;;;;;;;;;;0BAO/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;8BAAM;;;;;;;;;;;;;;;;;AAIf;GAjFM;KAAA;uCAmFS"}},
    {"offset": {"line": 2424, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ThumbsUpIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ThumbsUpIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.247-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 01-.521-3.507c0-1.553.295-3.036.831-4.398C3.287 9.463 4.107 9 4.991 9h.156c.47 0 .749.547.502.957-.367.61-.622 1.268-.748 1.952-.126.685-.188 1.393-.188 2.112 0 .717.063 1.425.188 2.112.126.685.381 1.342.748 1.952z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAiD,CAAC,EAAE,SAAS,EAAE,iBAC1E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 2461, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ThumbsDownIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ThumbsDownIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 01-.068-1.285c0-2.848.992-5.403 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 011.423.23l3.114 1.04a4.5 4.5 0 001.423.23h1.294M7.499 15.25l.043.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 01-.521-3.507c0-1.553.295-3.036.831-4.398C5.135 7.463 5.957 7 6.841 7h.156c.47 0 .749.547.502.957-.367.61-.622 1.268-.748 1.952-.126.685-.188 1.393-.188 2.112 0 .717.063 1.425.188 2.112.126.685.381 1.342.748 1.952M7.499 15.25h6.75c.806 0 1.533.446 2.031 1.08a9.041 9.041 0 012.861 2.4c.723.384 1.35.956 1.653 1.715a4.498 4.498 0 00.322 1.672V21a.75.75 0 01-.75.75A2.25 2.25 0 0117.35 19.5c0-1.152.26-2.247.723-3.218.266-.558-.107-1.282-.725-1.282\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,iBAAmD,CAAC,EAAE,SAAS,EAAE,iBAC5E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 2498, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/TrashIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const TrashIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,YAA8C,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2536, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/PaperclipIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const PaperclipIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.122 2.122l7.81-7.81\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAkD,CAAC,EAAE,SAAS,EAAE,iBAC3E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 2573, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ChatMessage.tsx"],"sourcesContent":["import React from 'react';\nimport { Message } from '../types';\nimport { BotIcon } from './icons/BotIcon';\nimport { UserIcon } from './icons/UserIcon';\nimport CodeBlock from './CodeBlock';\nimport { ThumbsUpIcon } from './icons/ThumbsUpIcon';\nimport { ThumbsDownIcon } from './icons/ThumbsDownIcon';\nimport { ClipboardIcon } from './icons/ClipboardIcon';\nimport { TrashIcon } from './icons/TrashIcon';\nimport { CheckIcon } from './icons/CheckIcon';\nimport { PaperclipIcon } from './icons/PaperclipIcon';\n\ninterface ChatMessageProps {\n  message: Message;\n  onFeedback: (feedback: 'good' | 'bad') => void;\n  onDelete: () => void;\n  attachedFiles?: File[];\n}\n\n// Regex to find markdown code blocks\nconst codeBlockRegex = /```(\\w+)?\\n([\\s\\S]+?)```/g;\n\nconst ChatMessage: React.FC<ChatMessageProps> = ({ message, onFeedback, onDelete, attachedFiles = [] }) => {\n  const { sender, text, sources, feedback } = message;\n  const isBot = sender === 'bot';\n  const [isCopied, setIsCopied] = React.useState(false);\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setIsCopied(true);\n      setTimeout(() => setIsCopied(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy text: ', err);\n    }\n  };\n\n  const renderContent = () => {\n    // Check if this message has attached files\n    const hasFiles = attachedFiles && attachedFiles.length > 0;\n    const parts = [];\n    let lastIndex = 0;\n    let match;\n\n    while ((match = codeBlockRegex.exec(text)) !== null) {\n      // Add text before the code block\n      if (match.index > lastIndex) {\n        parts.push(\n          <div key={`text-${lastIndex}`} className=\"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap\">\n            {text.slice(lastIndex, match.index)}\n          </div>\n        );\n      }\n\n      const language = match[1] || 'text';\n      const code = match[2];\n\n      parts.push(<CodeBlock key={`code-${match.index}`} language={language} code={code} />);\n\n      lastIndex = match.index + match[0].length;\n    }\n\n    // Add any remaining text after the last code block\n    if (lastIndex < text.length) {\n      parts.push(\n        <div key={`text-${lastIndex}`} className=\"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap\">\n          {text.slice(lastIndex)}\n        </div>\n      );\n    }\n\n    return parts.length > 0 ? parts : <div className=\"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap\">{text}</div>;\n  };\n\n  const renderAttachedFiles = () => {\n    if (!attachedFiles || attachedFiles.length === 0) return null;\n\n    return (\n      <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <PaperclipIcon className=\"w-4 h-4 text-gray-500 dark:text-gray-400\" />\n          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Arquivo(s) anexo(s): {attachedFiles.length}\n          </span>\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          {attachedFiles.map((file, index) => (\n            <div\n              key={index}\n              className=\"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg text-sm\"\n            >\n              <PaperclipIcon className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\n              <span className=\"text-blue-800 dark:text-blue-300 truncate max-w-40\" title={file.name}>\n                {file.name}\n              </span>\n              <span className=\"text-xs text-blue-600 dark:text-blue-400\">\n                ({(file.size / 1024).toFixed(1)} KB)\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={`flex items-start gap-4 my-6 ${!isBot ? 'flex-row-reverse' : ''}`}>\n      <div className={`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${isBot ? 'bg-gray-200 dark:bg-white/10' : 'bg-black dark:bg-white text-white dark:text-black'}`}>\n        {isBot ? <BotIcon className=\"w-6 h-6 text-gray-600 dark:text-gray-300\" /> : <UserIcon className=\"w-6 h-6\" />}\n      </div>\n      <div className={`p-4 rounded-lg max-w-2xl shadow ${isBot ? 'bg-white dark:bg-black border border-gray-200 dark:border-white/20' : 'bg-black dark:bg-white text-white dark:text-black'}`}>\n        {renderContent()}\n        {renderAttachedFiles()}\n        {sources && sources.length > 0 && (\n          <div className=\"mt-4 border-t border-gray-200 dark:border-white/20 pt-3\">\n            <h4 className=\"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2\">Fontes:</h4>\n            <ul className=\"space-y-1\">\n              {sources.map((source, index) => (\n                <li key={index} className=\"flex items-center\">\n                  <span className=\"text-gray-500 dark:text-gray-400 text-xs mr-2\">{index + 1}.</span>\n                  <a\n                    href={source.uri}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-black dark:text-white hover:underline text-sm truncate\"\n                    title={source.uri}\n                  >\n                    {source.title}\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        <div className={`mt-2 flex items-center gap-2 ${isBot ? 'justify-start' : 'justify-end'}`}>\n          {isBot && (\n            <>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mr-auto\">Avalie esta resposta:</p>\n              <button\n                onClick={() => onFeedback('good')}\n                className={`p-1.5 rounded-full transition-colors ${feedback === 'good'\n                  ? 'bg-gray-200 text-black dark:bg-white/20 dark:text-white'\n                  : 'text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-white/10'\n                  }`}\n                aria-label=\"Resposta boa\"\n              >\n                <ThumbsUpIcon className=\"w-4 h-4\" />\n              </button>\n              <button\n                onClick={() => onFeedback('bad')}\n                className={`p-1.5 rounded-full transition-colors ${feedback === 'bad'\n                  ? 'bg-gray-200 text-black dark:bg-white/20 dark:text-white'\n                  : 'text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-white/10'\n                  }`}\n                aria-label=\"Resposta ruim\"\n              >\n                <ThumbsDownIcon className=\"w-4 h-4\" />\n              </button>\n              <div className=\"w-px h-4 bg-gray-300 dark:bg-white/20 mx-1\"></div>\n            </>\n          )}\n\n          <button\n            onClick={handleCopy}\n            className=\"p-1.5 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-colors\"\n            title=\"Copiar mensagem\"\n          >\n            {isCopied ? <CheckIcon className=\"w-4 h-4 text-green-500\" /> : <ClipboardIcon className=\"w-4 h-4\" />}\n          </button>\n\n          <button\n            onClick={onDelete}\n            className=\"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-colors\"\n            title=\"Excluir mensagem\"\n          >\n            <TrashIcon className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMessage;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2956, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/SendIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const SendIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n  >\n    <path d=\"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z\" />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;kBAEX,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;KAPC"}},
    {"offset": {"line": 2989, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/suggestions.ts"],"sourcesContent":["export const documentAgentSuggestions = [\n  \"O que muda com a nova Reforma Tribut√°ria para o setor de servi√ßos?\",\n  \"Como funciona o regime de Lucro Presumido?\",\n  \"Quais s√£o os principais impostos federais no Brasil?\",\n  \"Explique o que √© o SPED Fiscal.\",\n];\n\nexport const codeAgentSuggestions = [\n  \"Gere uma fun√ß√£o em Python para calcular o ICMS em uma venda interestadual.\",\n  \"Escreva um trecho de c√≥digo em Delphi para validar um CNPJ.\",\n  \"Crie uma fun√ß√£o Python que retorne a al√≠quota do ISS para um servi√ßo em S√£o Paulo.\",\n  \"Mostre um exemplo de como gerar um XML de NF-e em Python.\",\n];\n\n// FIX: Add suggestionAgentSuggestions to provide example prompts for the suggestion agent and resolve import error in App.tsx.\nexport const suggestionAgentSuggestions = [\n  \"Melhore a pergunta: 'impostos sobre software'\",\n  \"Como posso perguntar sobre cr√©ditos de PIS/COFINS de forma mais eficaz?\",\n  \"Otimize minha d√∫vida sobre a tributa√ß√£o de servi√ßos exportados.\",\n  \"Sugira alternativas para a pergunta: 'reforma tribut√°ria'\",\n];\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,2BAA2B;IACtC;IACA;IACA;IACA;CACD;AAEM,MAAM,uBAAuB;IAClC;IACA;IACA;IACA;CACD;AAGM,MAAM,6BAA6B;IACxC;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 3022, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/CodeBracketIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const CodeBracketIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 15\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,kBAAoD,CAAC,EAAE,SAAS,EAAE,iBAC7E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3060, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/WebIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const WebIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z\"\n    />\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M3.75 12h16.5m-16.5 3.75a9.023 9.023 0 0 1 0-7.5M12 3.75c1.62 3.32 1.62 7.18 0 10.5\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;;0BAEZ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;0BAEJ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;;;;;;;KAlBK"}},
    {"offset": {"line": 3109, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/LightbulbIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const LightbulbIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-4.5 6.01 6.01 0 0 0-1.5-4.5m0 9a6.01 6.01 0 0 1-1.5-4.5 6.01 6.01 0 0 1 1.5-4.5M12 6.75v-1.5m0 12.75a3 3 0 0 1-3-3h6a3 3 0 0 1-3 3z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAkD,CAAC,EAAE,SAAS,EAAE,iBAC3E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3147, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ChatInput.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, KeyboardEvent } from 'react';\nimport { useChatStore } from '../store'; // Import store\nimport { SendIcon } from './icons/SendIcon';\nimport { PaperclipIcon } from './icons/PaperclipIcon';\n// FIX: Import suggestionAgentSuggestions to provide suggestions based on the active agent.\nimport { documentAgentSuggestions, codeAgentSuggestions, suggestionAgentSuggestions } from '../suggestions';\nimport { AgentType } from '../types';\nimport { CodeBracketIcon } from './icons/CodeBracketIcon';\nimport { WebIcon } from './icons/WebIcon';\nimport { LightbulbIcon } from './icons/LightbulbIcon';\n\ninterface ChatInputProps {\n  onSendMessage: (message: string) => void;\n  onFileSelect: (file: File) => void;\n  isLoading: boolean;\n  activeAgent: AgentType;\n  attachedFiles?: File[];\n}\n\nconst ChatInput: React.FC<ChatInputProps> = ({ onSendMessage, onFileSelect, isLoading, activeAgent, attachedFiles = [] }) => {\n  const [input, setInput] = useState('');\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState(-1);\n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false);\n  const [isFileAttached, setIsFileAttached] = useState(false);\n  const [showFileSuccess, setShowFileSuccess] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const setActiveAgent = useChatStore((state) => state.setActiveAgent);\n\n  const commands = [\n    {\n      name: 'Pesquisa na web',\n      description: 'Mudar para o agente de documentos.',\n      agent: 'document' as AgentType,\n      alias: 'web',\n      icon: <WebIcon className=\"w-5 h-5 mr-3 text-black dark:text-white flex-shrink-0\" />\n    },\n    {\n      name: 'Gerar C√≥digo',\n      description: 'Mudar para o agente de programa√ß√£o.',\n      agent: 'code' as AgentType,\n      alias: 'codigo',\n      icon: <CodeBracketIcon className=\"w-5 h-5 mr-3 text-black dark:text-white flex-shrink-0\" />\n    },\n    {\n      name: 'Sugest√£o',\n      description: 'Melhorar a sua pergunta.',\n      agent: 'suggestion' as AgentType,\n      alias: 'sugestao',\n      icon: <LightbulbIcon className=\"w-5 h-5 mr-3 text-black dark:text-white flex-shrink-0\" />\n    }\n  ];\n\n  const filteredCommands = commands.filter(cmd =>\n    cmd.name.toLowerCase().includes(input.substring(1).toLowerCase()) ||\n    cmd.alias.toLowerCase().includes(input.substring(1).toLowerCase())\n  );\n\n\n  useEffect(() => {\n    // FIX: Determine which set of suggestions to use based on the active agent and use it to filter suggestions. This resolves the 'allSuggestions is not defined' error.\n    let allSuggestions: string[] = [];\n    switch (activeAgent) {\n      case 'document':\n        allSuggestions = documentAgentSuggestions;\n        break;\n      case 'code':\n        allSuggestions = codeAgentSuggestions;\n        break;\n      case 'suggestion':\n        allSuggestions = suggestionAgentSuggestions;\n        break;\n    }\n\n    // Command Palette Logic\n    if (input.startsWith('@') && !input.includes(' ')) {\n      setIsCommandPaletteOpen(true);\n      setSuggestions([]);\n      setActiveSuggestionIndex(0); // Default to the first command\n      return;\n    }\n    setIsCommandPaletteOpen(false);\n\n    // Regular Suggestions Logic\n    if (input.trim().length > 0 && !input.startsWith('@')) {\n      const filtered = allSuggestions.filter(s =>\n        s.toLowerCase().includes(input.toLowerCase())\n      );\n      setSuggestions(filtered.slice(0, 5)); // Show up to 5 suggestions\n    } else {\n      setSuggestions([]);\n    }\n    setActiveSuggestionIndex(-1); // Reset selection when input changes\n  }, [input, activeAgent]);\n\n\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = `${textarea.scrollHeight}px`;\n    }\n  }, [input]);\n\n  const handleSendMessage = (message: string) => {\n    if (message.trim() && !isLoading) {\n      onSendMessage(message.trim());\n      setInput('');\n      setSuggestions([]);\n    }\n  };\n\n  const handleCommandSelect = (agent: AgentType, alias: string) => {\n    setActiveAgent(agent);\n    setInput(`@${alias} `);\n    setIsCommandPaletteOpen(false);\n    textareaRef.current?.focus();\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    handleSendMessage(suggestion);\n  };\n\n  const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n    if (isCommandPaletteOpen && filteredCommands.length > 0) {\n      if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        setActiveSuggestionIndex(prev => (prev + 1) % filteredCommands.length);\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        setActiveSuggestionIndex(prev => (prev - 1 + filteredCommands.length) % filteredCommands.length);\n      } else if (e.key === 'Enter') {\n        e.preventDefault();\n        if (filteredCommands[activeSuggestionIndex]) {\n          const { agent, alias } = filteredCommands[activeSuggestionIndex];\n          handleCommandSelect(agent, alias);\n        }\n      } else if (e.key === 'Escape') {\n        setIsCommandPaletteOpen(false);\n        setInput('');\n      }\n      return;\n    }\n\n    if (suggestions.length > 0) {\n      if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        setActiveSuggestionIndex(prev => (prev + 1) % suggestions.length);\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        setActiveSuggestionIndex(prev => (prev - 1 + suggestions.length) % suggestions.length);\n      } else if (e.key === 'Enter' && activeSuggestionIndex > -1) {\n        e.preventDefault();\n        handleSendMessage(suggestions[activeSuggestionIndex]);\n      } else if (e.key === 'Escape') {\n        setSuggestions([]);\n      }\n    }\n\n    if (e.key === 'Enter' && !e.shiftKey && activeSuggestionIndex === -1) {\n      e.preventDefault();\n      handleSendMessage(input);\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setIsFileAttached(true);\n      setShowFileSuccess(true);\n      onFileSelect(file);\n      \n      // Hide success animation after 2 seconds\n      setTimeout(() => {\n        setShowFileSuccess(false);\n      }, 2000);\n    }\n    // Reset input value to allow selecting the same file again\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const removeAttachedFile = (e: React.MouseEvent, fileName: string) => {\n    e.stopPropagation();\n    // This would need to be handled by the parent component\n    // For now, we'll just prevent the default behavior\n  };\n\n  const renderCommandPalette = () => (\n    <div className=\"absolute bottom-full mb-2 w-full bg-white dark:bg-black border-2 border-gray-200 dark:border-white/20 rounded-2xl shadow-lg p-2\">\n      <p className=\"px-2 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400\">AGENTES</p>\n      <ul className=\"space-y-1\">\n        {filteredCommands.map((command, index) => (\n          <li\n            key={command.name}\n            onClick={() => handleCommandSelect(command.agent, command.alias)}\n            className={`p-2 rounded-md cursor-pointer flex items-center ${index === activeSuggestionIndex ? 'bg-gray-100 dark:bg-white/10' : 'hover:bg-gray-100 dark:hover:bg-white/10'\n              }`}\n          >\n            {command.icon}\n            <div>\n              <p className=\"text-sm font-medium text-gray-800 dark:text-gray-200\">{command.name}</p>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">{command.description}</p>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n\n  return (\n    <div className=\"w-full max-w-3xl mx-auto relative\">\n      {isCommandPaletteOpen && filteredCommands.length > 0 && renderCommandPalette()}\n      {suggestions.length > 0 && !isCommandPaletteOpen && (\n        <div className=\"absolute bottom-full mb-2 w-full bg-white dark:bg-black border-2 border-gray-200 dark:border-white/20 rounded-2xl shadow-lg p-2\">\n          <ul className=\"space-y-1\">\n            {suggestions.map((suggestion, index) => (\n              <li\n                key={suggestion}\n                onClick={() => handleSuggestionClick(suggestion)}\n                className={`p-2 rounded-md cursor-pointer text-sm text-gray-800 dark:text-gray-200 ${index === activeSuggestionIndex ? 'bg-gray-100 dark:bg-white/10' : 'hover:bg-gray-100 dark:hover:bg-white/10'\n                  }`}\n              >\n                {suggestion}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      <div className=\"relative flex items-end p-3 md:p-2 bg-white dark:bg-black border-2 border-gray-200 dark:border-white/20 rounded-2xl shadow-lg\">\n        {/* Attached files display */}\n        {attachedFiles.length > 0 && (\n          <div className=\"mb-2 flex flex-wrap gap-2 p-2 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n            {attachedFiles.map((file, index) => (\n              <div\n                key={index}\n                className=\"flex items-center gap-2 px-3 py-1.5 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm\"\n              >\n                <PaperclipIcon className=\"w-4 h-4\" />\n                <span className=\"truncate max-w-32\">{file.name}</span>\n                <button\n                  onClick={(e) => removeAttachedFile(e, file.name)}\n                  className=\"ml-1 hover:text-blue-600 dark:hover:text-blue-400\"\n                  title=\"Remover arquivo\"\n                >\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          onChange={handleFileChange}\n          className=\"hidden\"\n          accept=\".txt,.md,.pdf\"\n        />\n        <button\n          onClick={() => fileInputRef.current?.click()}\n          className={`p-2 rounded-full transition-colors mr-2 flex-shrink-0 ${\n            isFileAttached\n              ? 'text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300'\n              : 'text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/10'\n          }`}\n          aria-label={isFileAttached ? \"Arquivo anexado\" : \"Anexar documento\"}\n        >\n          <PaperclipIcon className={`w-6 h-6 ${showFileSuccess ? 'animate-bounce' : ''}`} />\n        </button>\n        <textarea\n          ref={textareaRef}\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Digite sua mensagem...\"\n          rows={1}\n          className=\"flex-1 w-full bg-transparent resize-none focus:outline-none text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 max-h-52 py-2 text-base\"\n          disabled={isLoading}\n        />\n        <button\n          onClick={() => handleSendMessage(input)}\n          disabled={isLoading || !input.trim()}\n          className=\"ml-2 p-3 bg-black dark:bg-white text-white dark:text-black rounded-full disabled:bg-gray-400 disabled:dark:bg-gray-600 hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white focus:ring-offset-2 dark:focus:ring-offset-black flex-shrink-0\"\n          aria-label=\"Enviar mensagem\"\n        >\n          {isLoading ? (\n            <div className=\"w-5 h-5 border-2 border-t-transparent border-white dark:border-black rounded-full animate-spin\"></div>\n          ) : (\n            <SendIcon className=\"w-5 h-5\" />\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInput;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3593, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/CloseIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const CloseIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M6 18 18 6M6 6l12 12\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,YAA8C,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3631, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/NewChatIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const NewChatIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 4.5v15m7.5-7.5h-15\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,cAAgD,CAAC,EAAE,SAAS,EAAE,iBACzE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3669, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/DotsVerticalIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const DotsVerticalIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,mBAAqD,CAAC,EAAE,SAAS,EAAE,iBAC9E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3707, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/InfoIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const InfoIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3745, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/DocumentIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const DocumentIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAiD,CAAC,EAAE,SAAS,EAAE,iBAC1E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 3782, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ContactIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ContactIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n        strokeWidth={1.5}\n        stroke=\"currentColor\"\n        className={className}\n    >\n        <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            d=\"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 019.374 21c-2.331 0-4.512-.645-6.374-1.766z\"\n        />\n    </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,cAAgD,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACG,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACG,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZD"}},
    {"offset": {"line": 3819, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/FeedbackModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useChatStore } from '../store';\nimport { CloseIcon } from './icons/CloseIcon';\n\ninterface FeedbackModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst FeedbackModal: React.FC<FeedbackModalProps> = ({ isOpen, onClose }) => {\n    const [message, setMessage] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle');\n    const [errorMessage, setErrorMessage] = useState('');\n    const { sendGeneralFeedback } = useChatStore();\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!message.trim()) return;\n\n        setIsSubmitting(true);\n        setSubmitStatus('idle');\n        setErrorMessage('');\n\n        try {\n            await sendGeneralFeedback(message);\n            setSubmitStatus('success');\n            setMessage('');\n            setTimeout(() => {\n                onClose();\n                setSubmitStatus('idle');\n            }, 2000);\n        } catch (error: any) {\n            setSubmitStatus('error');\n            setErrorMessage(error.message || 'Ocorreu um erro ao enviar o feedback.');\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={onClose}>\n            <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-2xl shadow-2xl w-full max-w-md\" onClick={(e) => e.stopPropagation()}>\n                <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20\">\n                    <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Enviar Feedback</h2>\n                    <button onClick={onClose} className=\"p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full\">\n                        <CloseIcon className=\"w-6 h-6\" />\n                    </button>\n                </header>\n                <div className=\"p-6\">\n                    {submitStatus === 'success' ? (\n                        <div className=\"text-center py-8\">\n                            <div className=\"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                <svg className=\"w-8 h-8 text-green-600 dark:text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                                </svg>\n                            </div>\n                            <h3 className=\"text-xl font-medium text-gray-900 dark:text-white mb-2\">Obrigado!</h3>\n                            <p className=\"text-gray-500 dark:text-gray-400\">Seu feedback foi enviado com sucesso.</p>\n                        </div>\n                    ) : (\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\n                            <div>\n                                <label htmlFor=\"feedback-message\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    Como podemos melhorar?\n                                </label>\n                                <textarea\n                                    id=\"feedback-message\"\n                                    rows={4}\n                                    className=\"w-full px-4 py-3 text-gray-900 dark:text-white bg-gray-50 dark:bg-white/5 border border-gray-300 dark:border-white/10 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent resize-none\"\n                                    placeholder=\"Digite seu feedback, sugest√£o ou relate um problema...\"\n                                    value={message}\n                                    onChange={(e) => setMessage(e.target.value)}\n                                    required\n                                />\n                            </div>\n\n                            {submitStatus === 'error' && (\n                                <div className=\"p-3 text-sm text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20 border border-red-200 dark:border-red-900/30 rounded-lg\">\n                                    {errorMessage}\n                                </div>\n                            )}\n\n                            <div className=\"flex justify-end gap-3 pt-2\">\n                                <button\n                                    type=\"button\"\n                                    onClick={onClose}\n                                    className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-transparent border border-gray-300 dark:border-white/20 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5\"\n                                >\n                                    Cancelar\n                                </button>\n                                <button\n                                    type=\"submit\"\n                                    disabled={isSubmitting || !message.trim()}\n                                    className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                                >\n                                    {isSubmitting ? 'Enviando...' : 'Enviar Feedback'}\n                                </button>\n                            </div>\n                        </form>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default FeedbackModal;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAOA,MAAM,gBAA8C,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;;IACpE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAA+B;IAC/E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,EAAE,mBAAmB,EAAE,GAAG,IAAA,wHAAY;IAE5C,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,QAAQ,IAAI,IAAI;QAErB,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAEhB,IAAI;YACA,MAAM,oBAAoB;YAC1B,gBAAgB;YAChB,WAAW;YACX,WAAW;gBACP;gBACA,gBAAgB;YACpB,GAAG;QACP,EAAE,OAAO,OAAY;YACjB,gBAAgB;YAChB,gBAAgB,MAAM,OAAO,IAAI;QACrC,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACI,6LAAC;QAAI,WAAU;QAAsE,SAAS;kBAC1F,cAAA,6LAAC;YAAI,WAAU;YAA4G,SAAS,CAAC,IAAM,EAAE,eAAe;;8BACxJ,6LAAC;oBAAO,WAAU;;sCACd,6LAAC;4BAAG,WAAU;sCAAsD;;;;;;sCACpE,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,6LAAC,iJAAS;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAG7B,6LAAC;oBAAI,WAAU;8BACV,iBAAiB,0BACd,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;oCAAI,WAAU;oCAA6C,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CAClG,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAG7E,6LAAC;gCAAG,WAAU;0CAAyD;;;;;;0CACvE,6LAAC;gCAAE,WAAU;0CAAmC;;;;;;;;;;;iFAGpD,6LAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACpC,6LAAC;;kDACG,6LAAC;wCAAM,SAAQ;wCAAmB,WAAU;kDAAkE;;;;;;kDAG9G,6LAAC;wCACG,IAAG;wCACH,MAAM;wCACN,WAAU;wCACV,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wCAC1C,QAAQ;;;;;;;;;;;;4BAIf,iBAAiB,yBACd,6LAAC;gCAAI,WAAU;0CACV;;;;;;0CAIT,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACG,MAAK;wCACL,SAAS;wCACT,WAAU;kDACb;;;;;;kDAGD,6LAAC;wCACG,MAAK;wCACL,UAAU,gBAAgB,CAAC,QAAQ,IAAI;wCACvC,WAAU;kDAET,eAAe,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASpE;GAlGM;;QAK8B,wHAAY;;;KAL1C;uCAoGS"}},
    {"offset": {"line": 4063, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/AgentInfoModal.tsx"],"sourcesContent":["import React from 'react';\nimport { AgentType } from '../types';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { BotIcon } from './icons/BotIcon';\n\ninterface AgentInfoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  agentType: AgentType;\n}\n\nconst agentContent = {\n  document: {\n    title: 'Sobre o Consultor de Documentos',\n    description:\n      'Este agente √© um especialista em an√°lise de documentos e conhecimento tribut√°rio. Sua principal fun√ß√£o √© responder a perguntas com base no contexto fornecido nos documentos enviados e em sua base de conhecimento interna. Quando necess√°rio, ele utiliza a busca na web para complementar suas respostas.',\n    capabilities: [\n      'Analisar arquivos de texto (TXT, MD) e PDF.',\n      'Utilizar a t√©cnica RAG (Retrieval-Augmented Generation) para encontrar as informa√ß√µes mais relevantes nos documentos.',\n      'Buscar informa√ß√µes atualizadas na web para complementar o conhecimento.',\n      'Citar as fontes da web utilizadas nas respostas.',\n    ],\n    limitations: [\n      'N√£o fornece aconselhamento financeiro ou tribut√°rio licenciado.',\n      'As respostas s√£o baseadas nas informa√ß√µes dispon√≠veis e podem n√£o cobrir todas as especificidades de um caso real.',\n      'A precis√£o depende da qualidade e clareza dos documentos fornecidos.',\n      'O conhecimento sobre eventos muito recentes pode ser limitado.',\n    ],\n  },\n  code: {\n    title: 'Sobre o Gerador de C√≥digo Fiscal',\n    description:\n      'Este agente √© um programador s√™nior especialista em criar trechos de c√≥digo para resolver problemas tribut√°rios e fiscais, com foco em Python e Delphi. Ele pode utilizar o contexto da conversa na aba \"Consultor\" para gerar um c√≥digo mais preciso.',\n    capabilities: [\n      'Gerar fun√ß√µes e scripts em Python e Delphi.',\n      'Adicionar coment√°rios explicativos no c√≥digo.',\n      'Utilizar o hist√≥rico da conversa do \"Consultor\" como contexto.',\n      'Formatar o c√≥digo em blocos para f√°cil leitura e c√≥pia.',\n    ],\n    limitations: [\n      'N√£o pode executar ou testar o c√≥digo gerado.',\n      'O c√≥digo √© fornecido como um exemplo e deve ser revisado por um desenvolvedor qualificado antes do uso em produ√ß√£o.',\n      'N√£o compreende a arquitetura completa de um projeto ou sistema existente.',\n      'Pode n√£o utilizar as bibliotecas ou frameworks mais recentes, a menos que seja especificado.',\n    ],\n  },\n  suggestion: {\n    title: 'Sobre o Otimizador de Sugest√µes',\n    description:\n      'Este agente atua como um especialista em prompts. Em vez de responder diretamente √† sua pergunta, ele analisa sua inten√ß√£o e sugere 3 maneiras alternativas e mais eficazes de formular a mesma pergunta para obter melhores resultados de um assistente de IA fiscal. Ideal para refinar suas buscas e obter respostas mais precisas.',\n    capabilities: [\n      'Analisar a inten√ß√£o por tr√°s de uma pergunta.',\n      'Sugerir 3 novas formula√ß√µes de prompt.',\n      'Explicar brevemente por que cada sugest√£o √© melhor.',\n      'Ajudar a treinar o usu√°rio a fazer perguntas mais eficazes.',\n    ],\n    limitations: [\n      'N√£o responde √† pergunta original diretamente.',\n      'As sugest√µes s√£o baseadas em heur√≠sticas e podem n√£o ser sempre perfeitas.',\n      'Funciona melhor com perguntas abertas e complexas.',\n    ],\n  },\n};\n\nconst AgentInfoModal: React.FC<AgentInfoModalProps> = ({ isOpen, onClose, agentType }) => {\n  if (!isOpen) return null;\n\n  const content = agentContent[agentType];\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 animate-fade-in\"\n      onClick={onClose}\n      aria-modal=\"true\"\n      role=\"dialog\"\n    >\n      <div\n        className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-transform duration-300 animate-slide-up\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-gray-200 dark:bg-white/10\">\n              <BotIcon className=\"w-6 h-6 text-gray-600 dark:text-white\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\" id=\"modal-title\">\n              {content.title}\n            </h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-1 text-gray-500 dark:text-white hover:bg-gray-200 dark:hover:bg-white/10 rounded-full\"\n            aria-label=\"Fechar modal\"\n          >\n            <CloseIcon className=\"w-6 h-6\" />\n          </button>\n        </header>\n\n        <main className=\"p-6 overflow-y-auto text-black dark:text-white\">\n          <p className=\"text-sm leading-relaxed mb-6\">{content.description}</p>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h3 className=\"text-md font-semibold text-black dark:text-white mb-2\">\n                Capacidades\n              </h3>\n              <ul className=\"space-y-2 list-disc list-inside text-sm\">\n                {content.capabilities.map((item, index) => (\n                  <li key={index} className=\"flex items-start\">\n                    <span className=\"text-black dark:text-white mr-2 mt-1\">&#10003;</span>\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"text-md font-semibold text-black dark:text-white mb-2\">\n                Limita√ß√µes\n              </h3>\n              <ul className=\"space-y-2 list-disc list-inside text-sm\">\n                {content.limitations.map((item, index) => (\n                  <li key={index} className=\"flex items-start\">\n                    <span className=\"text-black dark:text-white mr-2 mt-1\">&#10007;</span>\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"mt-6 p-3 bg-gray-100 dark:bg-white/10 border-l-4 border-black dark:border-white rounded-r-lg\">\n            <p className=\"text-xs text-black dark:text-white\">\n              <strong>Aviso:</strong> As informa√ß√µes e o c√≥digo gerados por esta IA s√£o para fins informativos e n√£o substituem o aconselhamento de um profissional qualificado. Verifique sempre as informa√ß√µes com fontes oficiais.\n            </p>\n          </div>\n\n        </main>\n      </div>\n      {/* FIX: Removed invalid 'jsx' prop from style tag. The 'jsx' prop is specific to styled-jsx (commonly used with Next.js) and is not a standard React attribute. A standard <style> tag achieves the same result for defining the keyframe animations. */}\n      <style>{`\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out forwards;\n        }\n        @keyframes slide-up {\n          from { transform: translateY(20px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        .animate-slide-up {\n           animation: slide-up 0.3s ease-out forwards;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default AgentInfoModal;"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAQA,MAAM,eAAe;IACnB,UAAU;QACR,OAAO;QACP,aACE;QACF,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,MAAM;QACJ,OAAO;QACP,aACE;QACF,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,YAAY;QACV,OAAO;QACP,aACE;QACF,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;SACD;IACH;AACF;AAEA,MAAM,iBAAgD,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE;IACnF,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,UAAU,YAAY,CAAC,UAAU;IAEvC,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;QACT,cAAW;QACX,MAAK;;0BAEL,6LAAC;gBACC,WAAU;gBACV,SAAS,CAAC,IAAM,EAAE,eAAe;;kCAEjC,6LAAC;wBAAO,WAAU;;0CAChB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,6IAAO;4CAAC,WAAU;;;;;;;;;;;kDAErB,6LAAC;wCAAG,WAAU;wCAAsD,IAAG;kDACpE,QAAQ,KAAK;;;;;;;;;;;;0CAGlB,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,cAAW;0CAEX,cAAA,6LAAC,iJAAS;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIzB,6LAAC;wBAAK,WAAU;;0CACd,6LAAC;gCAAE,WAAU;0CAAgC,QAAQ,WAAW;;;;;;0CAEhE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAwD;;;;;;0DAGtE,6LAAC;gDAAG,WAAU;0DACX,QAAQ,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC/B,6LAAC;wDAAe,WAAU;;0EACxB,6LAAC;gEAAK,WAAU;0EAAuC;;;;;;0EACvD,6LAAC;0EAAM;;;;;;;uDAFA;;;;;;;;;;;;;;;;kDAOf,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAwD;;;;;;0DAGtE,6LAAC;gDAAG,WAAU;0DACX,QAAQ,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC9B,6LAAC;wDAAe,WAAU;;0EACxB,6LAAC;gEAAK,WAAU;0EAAuC;;;;;;0EACvD,6LAAC;0EAAM;;;;;;;uDAFA;;;;;;;;;;;;;;;;;;;;;;0CASjB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAE,WAAU;;sDACX,6LAAC;sDAAO;;;;;;wCAAe;;;;;;;;;;;;;;;;;;;;;;;;0BAO/B,6LAAC;0BAAO,CAAC;;;;;;;;;;;;;;;MAeT,CAAC;;;;;;;;;;;;AAGP;KA7FM;uCA+FS"}},
    {"offset": {"line": 4382, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ContactFormModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { useChatStore } from '../store';\n\ninterface ContactFormModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst ContactFormModal: React.FC<ContactFormModalProps> = ({ isOpen, onClose }) => {\n    const { saveContact } = useChatStore();\n    const [formData, setFormData] = useState({\n        nome: '',\n        sobrenome: '',\n        email: '',\n        celular: '',\n        mensagem: ''\n    });\n    const [isLoading, setIsLoading] = useState(false);\n    const [status, setStatus] = useState<'idle' | 'success' | 'error'>('idle');\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setIsLoading(true);\n        setStatus('idle');\n\n        try {\n            await saveContact({\n                first_name: formData.nome,\n                last_name: formData.sobrenome,\n                email: formData.email,\n                phone: formData.celular,\n                message: formData.mensagem\n            });\n            setStatus('success');\n            setTimeout(() => {\n                onClose();\n                setStatus('idle');\n                setFormData({ nome: '', sobrenome: '', email: '', celular: '', mensagem: '' });\n            }, 2000);\n        } catch (error) {\n            console.error('Error saving contact:', error);\n            setStatus('error');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={onClose}>\n            <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-2xl shadow-2xl w-full max-w-md\" onClick={(e) => e.stopPropagation()}>\n                <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20\">\n                    <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Cadastro de Contato</h2>\n                    <button onClick={onClose} className=\"p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full\">\n                        <CloseIcon className=\"w-6 h-6\" />\n                    </button>\n                </header>\n                <div className=\"p-6\">\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label htmlFor=\"nome\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                    Nome\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    id=\"nome\"\n                                    name=\"nome\"\n                                    required\n                                    value={formData.nome}\n                                    onChange={handleChange}\n                                    className=\"w-full px-4 py-2 mt-1 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent\"\n                                />\n                            </div>\n                            <div>\n                                <label htmlFor=\"sobrenome\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                    Sobrenome\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    id=\"sobrenome\"\n                                    name=\"sobrenome\"\n                                    required\n                                    value={formData.sobrenome}\n                                    onChange={handleChange}\n                                    className=\"w-full px-4 py-2 mt-1 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent\"\n                                />\n                            </div>\n                        </div>\n\n                        <div>\n                            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Email\n                            </label>\n                            <input\n                                type=\"email\"\n                                id=\"email\"\n                                name=\"email\"\n                                required\n                                value={formData.email}\n                                onChange={handleChange}\n                                className=\"w-full px-4 py-2 mt-1 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent\"\n                            />\n                        </div>\n\n                        <div>\n                            <label htmlFor=\"celular\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Celular\n                            </label>\n                            <input\n                                type=\"tel\"\n                                id=\"celular\"\n                                name=\"celular\"\n                                required\n                                value={formData.celular}\n                                onChange={handleChange}\n                                className=\"w-full px-4 py-2 mt-1 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent\"\n                            />\n                        </div>\n\n                        <div>\n                            <label htmlFor=\"mensagem\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Mensagem / Observa√ß√µes\n                            </label>\n                            <textarea\n                                id=\"mensagem\"\n                                name=\"mensagem\"\n                                rows={4}\n                                value={formData.mensagem}\n                                onChange={handleChange}\n                                className=\"w-full px-4 py-2 mt-1 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent resize-none\"\n                            />\n                        </div>\n\n                        <div className=\"pt-4 space-y-3\">\n                            {status === 'success' && (\n                                <div className=\"p-3 text-sm text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-400 rounded-lg\">\n                                    Contato salvo com sucesso!\n                                </div>\n                            )}\n\n                            {status === 'error' && (\n                                <div className=\"p-3 text-sm text-red-700 bg-red-100 dark:bg-red-900/30 dark:text-red-400 rounded-lg\">\n                                    Erro ao salvar contato. Tente novamente.\n                                </div>\n                            )}\n\n                            <button\n                                type=\"submit\"\n                                disabled={isLoading}\n                                className=\"w-full px-4 py-2.5 font-semibold text-white dark:text-black bg-blue-600 dark:bg-white rounded-lg hover:bg-blue-700 dark:hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-white dark:focus:ring-offset-black transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {isLoading ? 'Salvando...' : 'Salvar Contato'}\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ContactFormModal;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAOA,MAAM,mBAAoD,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;;IAC1E,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,wHAAY;IACpC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QACrC,MAAM;QACN,WAAW;QACX,OAAO;QACP,SAAS;QACT,UAAU;IACd;IACA,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA+B;IAEnE,MAAM,eAAe,CAAC;QAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,KAAK,EAAE;YAAM,CAAC;IACnD;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,aAAa;QACb,UAAU;QAEV,IAAI;YACA,MAAM,YAAY;gBACd,YAAY,SAAS,IAAI;gBACzB,WAAW,SAAS,SAAS;gBAC7B,OAAO,SAAS,KAAK;gBACrB,OAAO,SAAS,OAAO;gBACvB,SAAS,SAAS,QAAQ;YAC9B;YACA,UAAU;YACV,WAAW;gBACP;gBACA,UAAU;gBACV,YAAY;oBAAE,MAAM;oBAAI,WAAW;oBAAI,OAAO;oBAAI,SAAS;oBAAI,UAAU;gBAAG;YAChF,GAAG;QACP,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,UAAU;QACd,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACI,6LAAC;QAAI,WAAU;QAAsE,SAAS;kBAC1F,cAAA,6LAAC;YAAI,WAAU;YAA4G,SAAS,CAAC,IAAM,EAAE,eAAe;;8BACxJ,6LAAC;oBAAO,WAAU;;sCACd,6LAAC;4BAAG,WAAU;sCAAsD;;;;;;sCACpE,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,6LAAC,iJAAS;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAG7B,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACpC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;;0DACG,6LAAC;gDAAM,SAAQ;gDAAO,WAAU;0DAA6D;;;;;;0DAG7F,6LAAC;gDACG,MAAK;gDACL,IAAG;gDACH,MAAK;gDACL,QAAQ;gDACR,OAAO,SAAS,IAAI;gDACpB,UAAU;gDACV,WAAU;;;;;;;;;;;;kDAGlB,6LAAC;;0DACG,6LAAC;gDAAM,SAAQ;gDAAY,WAAU;0DAA6D;;;;;;0DAGlG,6LAAC;gDACG,MAAK;gDACL,IAAG;gDACH,MAAK;gDACL,QAAQ;gDACR,OAAO,SAAS,SAAS;gDACzB,UAAU;gDACV,WAAU;;;;;;;;;;;;;;;;;;0CAKtB,6LAAC;;kDACG,6LAAC;wCAAM,SAAQ;wCAAQ,WAAU;kDAA6D;;;;;;kDAG9F,6LAAC;wCACG,MAAK;wCACL,IAAG;wCACH,MAAK;wCACL,QAAQ;wCACR,OAAO,SAAS,KAAK;wCACrB,UAAU;wCACV,WAAU;;;;;;;;;;;;0CAIlB,6LAAC;;kDACG,6LAAC;wCAAM,SAAQ;wCAAU,WAAU;kDAA6D;;;;;;kDAGhG,6LAAC;wCACG,MAAK;wCACL,IAAG;wCACH,MAAK;wCACL,QAAQ;wCACR,OAAO,SAAS,OAAO;wCACvB,UAAU;wCACV,WAAU;;;;;;;;;;;;0CAIlB,6LAAC;;kDACG,6LAAC;wCAAM,SAAQ;wCAAW,WAAU;kDAA6D;;;;;;kDAGjG,6LAAC;wCACG,IAAG;wCACH,MAAK;wCACL,MAAM;wCACN,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,WAAU;;;;;;;;;;;;0CAIlB,6LAAC;gCAAI,WAAU;;oCACV,WAAW,2BACR,6LAAC;wCAAI,WAAU;kDAA8F;;;;;;oCAKhH,WAAW,yBACR,6LAAC;wCAAI,WAAU;kDAAsF;;;;;;kDAKzG,6LAAC;wCACG,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,YAAY,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7D;GA9JM;;QACsB,wHAAY;;;KADlC;uCAgKS"}},
    {"offset": {"line": 4723, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/SelectContactModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { supabase } from '../services/supabaseClient';\n\ninterface Contact {\n  id: string;\n  first_name: string;\n  last_name: string;\n  email: string;\n  phone: string;\n}\n\ninterface SelectContactModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSelectContact: (email: string, name: string) => void;\n}\n\nconst SelectContactModal: React.FC<SelectContactModalProps> = ({ isOpen, onClose, onSelectContact }) => {\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [customEmail, setCustomEmail] = useState('');\n  const [selectedTab, setSelectedTab] = useState<'contacts' | 'custom'>('contacts');\n\n  useEffect(() => {\n    if (isOpen) {\n      loadContacts();\n      setSearchTerm('');\n      setCustomEmail('');\n      setSelectedTab('contacts');\n    }\n  }, [isOpen]);\n\n  const loadContacts = async () => {\n    setIsLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('contacts')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setContacts(data || []);\n    } catch (error) {\n      console.error('Error loading contacts:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const filteredContacts = contacts.filter(contact =>\n    `${contact.first_name} ${contact.last_name} ${contact.email}`\n      .toLowerCase()\n      .includes(searchTerm.toLowerCase())\n  );\n\n  const handleSelectContact = (contact: Contact) => {\n    onSelectContact(contact.email, `${contact.first_name} ${contact.last_name}`);\n    onClose();\n  };\n\n  const handleCustomEmail = () => {\n    if (customEmail && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(customEmail)) {\n      onSelectContact(customEmail, customEmail);\n      onClose();\n    }\n  };\n\n  const isValidEmail = customEmail && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(customEmail);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] flex flex-col border border-gray-200 dark:border-gray-700\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">Enviar Conversa</h2>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">Selecione o destinat√°rio do email</p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-all\"\n            aria-label=\"Fechar\"\n          >\n            <CloseIcon className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex border-b border-gray-200 dark:border-gray-700 px-6\">\n          <button\n            onClick={() => setSelectedTab('contacts')}\n            className={`flex-1 py-3 text-sm font-medium border-b-2 transition-all ${selectedTab === 'contacts'\n                ? 'border-blue-600 text-blue-600 dark:border-blue-500 dark:text-blue-500'\n                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n              }`}\n          >\n            <div className=\"flex items-center justify-center gap-2\">\n              <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n              Contatos ({contacts.length})\n            </div>\n          </button>\n          <button\n            onClick={() => setSelectedTab('custom')}\n            className={`flex-1 py-3 text-sm font-medium border-b-2 transition-all ${selectedTab === 'custom'\n                ? 'border-blue-600 text-blue-600 dark:border-blue-500 dark:text-blue-500'\n                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n              }`}\n          >\n            <div className=\"flex items-center justify-center gap-2\">\n              <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n              </svg>\n              Email Personalizado\n            </div>\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {selectedTab === 'contacts' ? (\n            <div className=\"space-y-4\">\n              {/* Search */}\n              <div className=\"relative\">\n                <svg className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n                <input\n                  type=\"text\"\n                  placeholder=\"Buscar por nome ou email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                />\n              </div>\n\n              {/* Contacts List */}\n              {isLoading ? (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <svg className=\"w-10 h-10 text-blue-600 dark:text-blue-500 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  <p className=\"mt-3 text-sm text-gray-500 dark:text-gray-400\">Carregando contatos...</p>\n                </div>\n              ) : filteredContacts.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4\">\n                    <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                    </svg>\n                  </div>\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                    {searchTerm ? 'Nenhum contato encontrado' : 'Nenhum contato salvo'}\n                  </p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                    {searchTerm ? 'Tente outro termo de busca' : 'Adicione contatos para enviar emails rapidamente'}\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {filteredContacts.map((contact) => (\n                    <button\n                      key={contact.id}\n                      onClick={() => handleSelectContact(contact)}\n                      className=\"w-full text-left p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all group\"\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm flex-shrink-0\">\n                          {contact.first_name.charAt(0)}{contact.last_name.charAt(0)}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\n                            {contact.first_name} {contact.last_name}\n                          </div>\n                          <div className=\"text-sm text-gray-600 dark:text-gray-400 truncate\">{contact.email}</div>\n                          {contact.phone && (\n                            <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">{contact.phone}</div>\n                          )}\n                        </div>\n                        <svg className=\"w-5 h-5 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                        </svg>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4\">\n                <div className=\"flex gap-3\">\n                  <svg className=\"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  <div className=\"text-sm text-blue-800 dark:text-blue-300\">\n                    <p className=\"font-medium mb-1\">Digite um email personalizado</p>\n                    <p className=\"text-blue-600 dark:text-blue-400\">O hist√≥rico da conversa ser√° enviado para o endere√ßo informado.</p>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <label htmlFor=\"custom-email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Endere√ßo de email\n                </label>\n                <div className=\"relative\">\n                  <svg className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                  </svg>\n                  <input\n                    id=\"custom-email\"\n                    type=\"email\"\n                    placeholder=\"exemplo@email.com\"\n                    value={customEmail}\n                    onChange={(e) => setCustomEmail(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && isValidEmail && handleCustomEmail()}\n                    className=\"w-full pl-10 pr-4 py-3 text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                  />\n                </div>\n                {customEmail && !isValidEmail && (\n                  <p className=\"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                    Email inv√°lido\n                  </p>\n                )}\n              </div>\n\n              <button\n                onClick={handleCustomEmail}\n                disabled={!isValidEmail}\n                className=\"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white font-medium rounded-xl transition-all disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n                Enviar Email\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SelectContactModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5386, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/HistorySidebar.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useChatStore } from '../store';\nimport { Conversation } from '../types';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { NewChatIcon } from './icons/NewChatIcon';\nimport { TrashIcon } from './icons/TrashIcon';\nimport { DotsVerticalIcon } from './icons/DotsVerticalIcon';\nimport { InfoIcon } from './icons/InfoIcon';\nimport { BotIcon } from './icons/BotIcon';\nimport { DocumentIcon } from './icons/DocumentIcon';\nimport { LightbulbIcon } from './icons/LightbulbIcon';\nimport { ContactIcon } from './icons/ContactIcon';\nimport FeedbackModal from './FeedbackModal';\nimport AgentInfoModal from './AgentInfoModal';\nimport ContactFormModal from './ContactFormModal';\nimport SelectContactModal from './SelectContactModal';\nimport { AgentType } from '../types';\n\ninterface HistorySidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onOpenDashboard: () => void;\n  onOpenChangePassword: () => void;\n}\n\n// Helper function for relative time\nconst timeAgo = (timestamp: number): string => {\n  const now = new Date();\n  const secondsPast = (now.getTime() - timestamp) / 1000;\n  if (secondsPast < 60) return `agora mesmo`;\n  if (secondsPast < 3600) return `${Math.round(secondsPast / 60)}m atr√°s`;\n  if (secondsPast <= 86400) return `${Math.round(secondsPast / 3600)}h atr√°s`;\n\n  const day = new Date(timestamp);\n  return day.toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' });\n};\n\n\nconst HistorySidebar: React.FC<HistorySidebarProps> = ({ isOpen, onClose, onOpenDashboard, onOpenChangePassword }) => {\n  const {\n    documentConversations,\n    codeConversations,\n    suggestionConversations,\n    activeDocumentConversationId,\n    activeCodeConversationId,\n    activeSuggestionConversationId,\n    startNewConversation,\n    deleteConversation,\n    setActiveConversation,\n    activeAgent,\n    setActiveAgent,\n    user,\n    signOut,\n    sendConversationByEmail\n  } = useChatStore();\n\n  const [menuOpenFor, setMenuOpenFor] = useState<string | null>(null);\n  const [isFeedbackOpen, setIsFeedbackOpen] = useState(false);\n  const [isAgentInfoOpen, setIsAgentInfoOpen] = useState(false);\n  const [isContactModalOpen, setIsContactModalOpen] = useState(false);\n  const [emailSendingId, setEmailSendingId] = useState<string | null>(null);\n  const [emailStatus, setEmailStatus] = useState<{ type: 'success' | 'error', message: string } | null>(null);\n  const [selectContactModalOpen, setSelectContactModalOpen] = useState(false);\n  const [pendingConversationId, setPendingConversationId] = useState<string | null>(null);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  let conversations: Record<string, Conversation>;\n  let activeConversationId: string | null;\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setMenuOpenFor(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  switch (activeAgent) {\n    case 'code':\n      conversations = codeConversations;\n      activeConversationId = activeCodeConversationId;\n      break;\n    case 'suggestion':\n      conversations = suggestionConversations;\n      activeConversationId = activeSuggestionConversationId;\n      break;\n    case 'document':\n    default:\n      conversations = documentConversations;\n      activeConversationId = activeDocumentConversationId;\n      break;\n  }\n\n\n  const handleSelectConversation = (id: string) => {\n    setActiveConversation(activeAgent, id);\n    onClose(); // Close sidebar on mobile after selection\n  };\n\n  const handleNewChat = () => {\n    startNewConversation(activeAgent);\n    onClose();\n  };\n\n  const handleDelete = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    setMenuOpenFor(null);\n    if (window.confirm(\"Tem certeza que deseja excluir esta conversa?\")) {\n      deleteConversation(activeAgent, id);\n    }\n  };\n\n  const handleMenuToggle = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    setMenuOpenFor(prev => (prev === id ? null : id));\n  };\n\n  const handleSendEmail = async (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    setMenuOpenFor(null);\n    setPendingConversationId(id);\n    setSelectContactModalOpen(true);\n  };\n\n  const handleConfirmSendEmail = async (email: string, name: string) => {\n    if (!pendingConversationId) return;\n\n    setEmailSendingId(pendingConversationId);\n    setEmailStatus(null);\n\n    try {\n      await sendConversationByEmail(activeAgent, pendingConversationId, email);\n      setEmailStatus({\n        type: 'success',\n        message: `Email enviado com sucesso para ${name}! Verifique a caixa de entrada.`\n      });\n      setTimeout(() => setEmailStatus(null), 5000);\n    } catch (error: any) {\n      console.error('Email send error:', error);\n      const errorMsg = error.message || 'Erro ao enviar email. Verifique sua configura√ß√£o do Resend.';\n      setEmailStatus({ type: 'error', message: errorMsg });\n      setTimeout(() => setEmailStatus(null), 7000);\n    } finally {\n      setEmailSendingId(null);\n      setPendingConversationId(null);\n    }\n  };\n\n\n  const sortedConversations = Object.values(conversations).sort((a: Conversation, b: Conversation) => (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt));\n\n  return (\n    <aside className={`fixed inset-y-0 left-0 z-40 w-80 bg-white dark:bg-black flex flex-col h-full border-r border-gray-200 dark:border-white/20 transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : '-translate-x-full'} lg:relative lg:translate-x-0 lg:flex-shrink-0`}>\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20\">\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Hist√≥rico</h2>\n        <button\n          onClick={onClose}\n          className=\"lg:hidden p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full\"\n          aria-label=\"Fechar hist√≥rico\"\n        >\n          <CloseIcon className=\"w-6 h-6\" />\n        </button>\n      </div>\n\n      <div className=\"p-4 border-b border-gray-200 dark:border-white/20 space-y-4\">\n        {/* Mobile Agent Selector */}\n        <div className=\"lg:hidden grid grid-cols-3 gap-2\">\n          <button\n            onClick={() => { setActiveAgent('document'); onClose(); }}\n            className={`flex flex-col items-center justify-center p-2 rounded-lg border ${activeAgent === 'document' ? 'bg-gray-100 dark:bg-white/10 border-gray-300 dark:border-white/30' : 'border-transparent hover:bg-gray-50 dark:hover:bg-white/5'}`}\n          >\n            <DocumentIcon className=\"w-6 h-6 mb-1\" />\n            <span className=\"text-xs font-medium\">Consultor</span>\n          </button>\n          <button\n            onClick={() => { setActiveAgent('code'); onClose(); }}\n            className={`flex flex-col items-center justify-center p-2 rounded-lg border ${activeAgent === 'code' ? 'bg-gray-100 dark:bg-white/10 border-gray-300 dark:border-white/30' : 'border-transparent hover:bg-gray-50 dark:hover:bg-white/5'}`}\n          >\n            <BotIcon className=\"w-6 h-6 mb-1\" />\n            <span className=\"text-xs font-medium\">C√≥digo</span>\n          </button>\n          <button\n            onClick={() => { setActiveAgent('suggestion'); onClose(); }}\n            className={`flex flex-col items-center justify-center p-2 rounded-lg border ${activeAgent === 'suggestion' ? 'bg-gray-100 dark:bg-white/10 border-gray-300 dark:border-white/30' : 'border-transparent hover:bg-gray-50 dark:hover:bg-white/5'}`}\n          >\n            <LightbulbIcon className=\"w-6 h-6 mb-1\" />\n            <span className=\"text-xs font-medium\">Sugest√£o</span>\n          </button>\n        </div>\n        <button\n          onClick={handleNewChat}\n          className=\"w-full flex items-center justify-center p-3 bg-black dark:bg-white text-white dark:text-black rounded-lg hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white focus:ring-offset-2 dark:focus:ring-offset-black\"\n        >\n          <NewChatIcon className=\"w-5 h-5 mr-2\" />\n          <span>Novo Chat</span>\n        </button>\n      </div>\n\n      <div className=\"flex-grow p-2 overflow-y-auto\">\n        {sortedConversations.length === 0 ? (\n          <div className=\"text-center text-gray-500 dark:text-gray-400 mt-8 px-4\">\n            <p>Nenhum hist√≥rico para o agente \"{\n              activeAgent === 'document' ? 'Consultor' :\n                activeAgent === 'code' ? 'C√≥digo' : 'Sugest√£o'\n            }\".</p>\n          </div>\n        ) : (\n          <ul className=\"space-y-1\">\n            {sortedConversations.map((convo: Conversation) => (\n              <li key={convo.id}>\n                <div\n                  onClick={() => handleSelectConversation(convo.id)}\n                  className={`w-full text-left p-3 rounded-md group flex items-center justify-between transition-colors duration-200 cursor-pointer ${convo.id === activeConversationId\n                    ? 'bg-gray-100 dark:bg-white/10'\n                    : 'hover:bg-gray-100 dark:hover:bg-white/10'\n                    }`}\n                >\n                  <div className=\"flex-grow overflow-hidden pr-2\">\n                    <p className=\"truncate text-sm font-medium text-gray-800 dark:text-gray-200\" title={convo.title}>\n                      {convo.title}\n                    </p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                      {timeAgo(convo.updatedAt || convo.createdAt)}\n                    </p>\n                  </div>\n\n                  <div className=\"relative flex-shrink-0\" ref={menuOpenFor === convo.id ? menuRef : null}>\n                    <button\n                      onClick={(e) => handleMenuToggle(e, convo.id)}\n                      className=\"p-1 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                      aria-label=\"Op√ß√µes da conversa\"\n                    >\n                      <DotsVerticalIcon className=\"w-4 h-4\" />\n                    </button>\n                    {menuOpenFor === convo.id && (\n                      <div className=\"absolute right-0 mt-2 w-32 bg-white dark:bg-black rounded-md shadow-lg border border-gray-200 dark:border-white/20 z-10\">\n                        <ul className=\"py-1\">\n                          <li>\n                            <button\n                              onClick={(e) => handleSendEmail(e, convo.id)}\n                              disabled={emailSendingId === convo.id}\n                              className=\"w-full text-left px-3 py-2 text-sm text-black hover:bg-gray-100 dark:hover:bg-white/10 flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                              {emailSendingId === convo.id ? (\n                                <svg className=\"w-4 h-4 mr-2 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                                </svg>\n                              ) : (\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-4 h-4 mr-2\">\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75\" />\n                                </svg>\n                              )}\n                              {emailSendingId === convo.id ? 'Enviando...' : 'Enviar por Email'}\n                            </button>\n                          </li>\n                          <li>\n                            <button onClick={(e) => handleDelete(e, convo.id)} className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-white/10 flex items-center\">\n                              <TrashIcon className=\"w-4 h-4 mr-2\" /> Excluir\n                            </button>\n                          </li>\n                        </ul>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      {/* Email Status Toast */}\n      {emailStatus && (\n        <div className={`fixed top-4 right-4 z-50 max-w-md p-4 rounded-lg shadow-lg border animate-slide-in ${emailStatus.type === 'success'\n          ? 'bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800'\n          : 'bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800'\n          }`}>\n          <div className=\"flex items-start gap-3\">\n            {emailStatus.type === 'success' ? (\n              <svg className=\"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            ) : (\n              <svg className=\"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            )}\n            <div className=\"flex-1\">\n              <p className={`text-sm font-medium ${emailStatus.type === 'success'\n                ? 'text-green-800 dark:text-green-200'\n                : 'text-red-800 dark:text-red-200'\n                }`}>\n                {emailStatus.message}\n              </p>\n            </div>\n            <button\n              onClick={() => setEmailStatus(null)}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Mobile Only Menu Options */}\n      <div className=\"lg:hidden p-4 border-t border-gray-200 dark:border-white/20 space-y-2 overflow-y-auto max-h-60\">\n        <button\n          onClick={() => { onOpenDashboard(); onClose(); }}\n          className=\"w-full flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\"\n        >\n          <svg className=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n          </svg>\n          <span>Dashboard</span>\n        </button>\n\n        <button\n          onClick={() => setIsAgentInfoOpen(true)}\n          className=\"w-full flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\"\n        >\n          <InfoIcon className=\"w-5 h-5 mr-3\" />\n          <span>Informa√ß√µes do Agente</span>\n        </button>\n\n        <button\n          onClick={() => setIsFeedbackOpen(true)}\n          className=\"w-full flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5 mr-3\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z\" />\n          </svg>\n          <span>Enviar Feedback</span>\n        </button>\n\n        <button\n          onClick={() => setIsContactModalOpen(true)}\n          className=\"w-full flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\"\n        >\n          <ContactIcon className=\"w-5 h-5 mr-3\" />\n          <span>Novo Contato</span>\n        </button>\n\n        <div className=\"h-px bg-gray-200 dark:bg-white/20 my-2\"></div>\n\n        <button\n          onClick={() => { onOpenChangePassword(); onClose(); }}\n          className=\"w-full flex items-center p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors\"\n        >\n          <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-[10px] font-bold text-white mr-3\">\n            {user?.user_metadata?.full_name?.charAt(0).toUpperCase() || user?.email?.charAt(0).toUpperCase()}\n          </div>\n          <div className=\"flex flex-col items-start\">\n            <span className=\"text-sm font-medium truncate max-w-[180px]\">{user?.user_metadata?.full_name || user?.email}</span>\n            <span className=\"text-xs text-gray-500 dark:text-gray-400\">Alterar Senha</span>\n          </div>\n        </button>\n\n        <button\n          onClick={signOut}\n          className=\"w-full flex items-center p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5 mr-3\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3h12\" />\n          </svg>\n          <span>Sair</span>\n        </button>\n      </div>\n\n      <FeedbackModal\n        isOpen={isFeedbackOpen}\n        onClose={() => setIsFeedbackOpen(false)}\n      />\n\n      <AgentInfoModal\n        isOpen={isAgentInfoOpen}\n        onClose={() => setIsAgentInfoOpen(false)}\n        agentType={activeAgent}\n      />\n\n      <ContactFormModal\n        isOpen={isContactModalOpen}\n        onClose={() => setIsContactModalOpen(false)}\n      />\n\n      <SelectContactModal\n        isOpen={selectContactModalOpen}\n        onClose={() => {\n          setSelectContactModalOpen(false);\n          setPendingConversationId(null);\n        }}\n        onSelectContact={handleConfirmSendEmail}\n      />\n    </aside >\n  );\n};\n\nexport default HistorySidebar;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6287, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/LockIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const LockIcon: React.FC<{ className?: string; title?: string }> = ({ className, title }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    {title && <title>{title}</title>}\n    <path\n      fillRule=\"evenodd\"\n      d=\"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6D,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,iBAC7F,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;QACX,eAAY;;YAEX,uBAAS,6LAAC;0BAAO;;;;;;0BAClB,6LAAC;gBACC,UAAS;gBACT,GAAE;gBACF,UAAS;;;;;;;;;;;;KAZF"}},
    {"offset": {"line": 6332, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/PencilIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const PencilIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,aAA+C,CAAC,EAAE,SAAS,EAAE,iBACxE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 6370, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/EyeIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const EyeIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z\"\n    />\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;;0BAEZ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;0BAEJ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;;;;;;;KAlBK"}},
    {"offset": {"line": 6419, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/DocumentSidebar.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { useDocumentStore } from '../store';\nimport { DocumentIcon } from './icons/DocumentIcon';\nimport { PaperclipIcon } from './icons/PaperclipIcon';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { LockIcon } from './icons/LockIcon';\nimport { DotsVerticalIcon } from './icons/DotsVerticalIcon';\nimport { PencilIcon } from './icons/PencilIcon';\nimport { EyeIcon } from './icons/EyeIcon';\nimport { TrashIcon } from './icons/TrashIcon';\nimport { Document } from '../types';\n\nconst DatabaseIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className={className}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125\" />\n  </svg>\n);\n\nconst ChevronDownIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m19.5 8.25-7.5 7.5-7.5-7.5\" />\n  </svg>\n);\n\n\ninterface DocumentContentViewerProps {\n  content: string;\n}\n\nconst DocumentContentViewer: React.FC<DocumentContentViewerProps> = ({ content }) => (\n  <div className=\"p-3 pt-2 text-sm text-black dark:text-white bg-gray-50 dark:bg-white/10\">\n    <div className=\"max-h-64 overflow-y-auto border-t border-gray-200 dark:border-white/20 pt-2\">\n      <pre className=\"whitespace-pre-wrap font-sans\">\n        {content || \"Este documento n√£o cont√©m texto para ser exibido.\"}\n      </pre>\n    </div>\n  </div>\n);\n\n\ninterface DocumentItemProps {\n  doc: Document;\n  isExpanded: boolean;\n  onDelete: (id: string) => void;\n  onRename: (id: string, newName: string) => void;\n  onToggleExpand: (id: string) => void;\n  onMoveToKnowledgeBase?: (id: string) => void;\n}\n\nconst DocumentItem: React.FC<DocumentItemProps> = ({ doc, isExpanded, onDelete, onRename, onToggleExpand, onMoveToKnowledgeBase }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isRenaming, setIsRenaming] = useState(false);\n  const [name, setName] = useState(doc.name);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (isRenaming && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isRenaming]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsMenuOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleRename = () => {\n    if (name.trim() && name.trim() !== doc.name) {\n      onRename(doc.id, name.trim());\n    } else {\n      setName(doc.name); // Revert to original if empty or unchanged\n    }\n    setIsRenaming(false);\n    setIsMenuOpen(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      handleRename();\n    } else if (e.key === 'Escape') {\n      setName(doc.name);\n      setIsRenaming(false);\n      setIsMenuOpen(false);\n    }\n  };\n\n  return (\n    <div className=\"mb-2 rounded-md bg-white dark:bg-black shadow-sm border border-gray-200 dark:border-white/20\">\n      <div className=\"flex items-center justify-between p-2 cursor-pointer\" onClick={() => onToggleExpand(doc.id)}>\n        <div className=\"flex items-center overflow-hidden flex-grow\">\n          <DocumentIcon className=\"w-5 h-5 mr-2 flex-shrink-0 text-gray-500 dark:text-gray-400\" />\n          {isRenaming ? (\n            <input\n              ref={inputRef}\n              type=\"text\"\n              value={name}\n              onClick={(e) => e.stopPropagation()} // Prevent expand/collapse when clicking input\n              onChange={(e) => setName(e.target.value)}\n              onBlur={handleRename}\n              onKeyDown={handleKeyDown}\n              className=\"text-sm bg-transparent border-b border-black dark:border-white focus:outline-none text-gray-800 dark:text-gray-200 w-full\"\n            />\n          ) : (\n            <span className=\"truncate text-sm text-gray-800 dark:text-gray-200\" title={doc.name}>\n              {doc.name}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex items-center\" onClick={(e) => e.stopPropagation()}>\n          <ChevronDownIcon className={`w-5 h-5 text-gray-400 dark:text-gray-500 transition-transform duration-300 mr-1 ${isExpanded ? 'rotate-180' : ''}`} />\n          <div className=\"relative flex-shrink-0\" ref={menuRef}>\n            {doc.isDeletable ? (\n              <button onClick={() => setIsMenuOpen(!isMenuOpen)} className=\"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\">\n                <DotsVerticalIcon className=\"w-5 h-5\" />\n              </button>\n            ) : (\n              <LockIcon className=\"w-4 h-4 ml-2 flex-shrink-0 text-gray-400 dark:text-gray-500\" title=\"Este documento faz parte da base de conhecimento e n√£o pode ser exclu√≠do.\" />\n            )}\n            {isMenuOpen && (\n              <div className=\"absolute right-0 mt-2 w-40 bg-white dark:bg-black rounded-md shadow-lg border border-gray-200 dark:border-white/20 z-10\">\n                <ul className=\"py-1\">\n                  <li>\n                    <button onClick={() => { onToggleExpand(doc.id); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-black dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 flex items-center\">\n                      <EyeIcon className=\"w-4 h-4 mr-2\" /> {isExpanded ? 'Ocultar' : 'Visualizar'}\n                    </button>\n                  </li>\n                  <li>\n                    <button onClick={() => { setIsRenaming(true); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-black dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 flex items-center\">\n                      <PencilIcon className=\"w-4 h-4 mr-2\" /> Renomear\n                    </button>\n                  </li>\n                  {onMoveToKnowledgeBase && (\n                    <li>\n                      <button onClick={() => { onMoveToKnowledgeBase(doc.id); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center\">\n                        <DatabaseIcon className=\"w-4 h-4 mr-2\" /> Adicionar √† Base\n                      </button>\n                    </li>\n                  )}\n                  <li>\n                    <button onClick={() => { onDelete(doc.id); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 dark:hover:bg-white/10 flex items-center\">\n                      <TrashIcon className=\"w-4 h-4 mr-2\" /> Excluir\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      <div\n        className={`grid transition-[grid-template-rows] duration-300 ease-in-out ${isExpanded ? 'grid-rows-[1fr]' : 'grid-rows-[0fr]'}`}\n      >\n        <div className=\"overflow-hidden\">\n          <DocumentContentViewer content={doc.content || ''} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\nconst DocumentSidebar: React.FC<{ isOpen: boolean; onClose: () => void; }> = ({ isOpen, onClose }) => {\n  const { documents, addDocument, deleteDocument, renameDocument, moveToKnowledgeBase, isLoading, error } = useDocumentStore();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [expandedDocId, setExpandedDocId] = useState<string | null>(null);\n  const [showSuccessToast, setShowSuccessToast] = useState(false);\n\n  const handleToggleExpand = (docId: string) => {\n    setExpandedDocId(prevId => prevId === docId ? null : docId);\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      addDocument(file);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleMoveToKnowledgeBase = async (id: string) => {\n    try {\n      await moveToKnowledgeBase(id);\n      setShowSuccessToast(true);\n      setTimeout(() => setShowSuccessToast(false), 5000);\n    } catch (error: any) {\n      console.error('Error moving to knowledge base:', error);\n      // O erro j√° √© tratado no store, apenas logamos aqui\n    }\n  };\n\n  const baseDocuments = documents.filter(doc => !doc.isDeletable);\n  const userDocuments = documents.filter(doc => doc.isDeletable);\n\n  return (\n    <>\n      {/* Success Toast */}\n      {showSuccessToast && (\n        <div className=\"fixed top-4 right-4 z-50 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-xl p-4 shadow-lg animate-slide-in max-w-sm\">\n          <div className=\"flex items-start gap-3\">\n            <svg className=\"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-medium text-green-800 dark:text-green-200\">\n                Documento adicionado √† Base de Conhecimento!\n              </p>\n              <p className=\"text-xs text-green-600 dark:text-green-400 mt-1\">\n                Agora ele ser√° usado como contexto RAG nas conversas.\n              </p>\n            </div>\n            <button\n              onClick={() => setShowSuccessToast(false)}\n              className=\"text-green-400 hover:text-green-600 dark:hover:text-green-200\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n\n      <aside className={`fixed inset-y-0 right-0 z-40 w-80 bg-white dark:bg-black flex flex-col h-full border-l border-gray-200 dark:border-white/20 backdrop-blur-sm transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : 'translate-x-full'} lg:relative lg:translate-x-0 lg:flex-shrink-0`}>\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Documentos</h2>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">Contexto do agente.</p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"lg:hidden p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full\"\n            aria-label=\"Fechar documentos\"\n          >\n            <CloseIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n        <div className=\"flex-grow p-4 overflow-y-auto\">\n\n          <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 px-1\">Base de Conhecimento</h3>\n          {baseDocuments.length > 0 ? (\n            baseDocuments.map((doc) => <DocumentItem key={doc.id} doc={doc} onDelete={() => { }} onRename={() => { }} onToggleExpand={handleToggleExpand} isExpanded={expandedDocId === doc.id} />)\n          ) : (\n            <p className=\"text-xs text-gray-400 dark:text-gray-500 px-1\">Nenhum conhecimento base carregado.</p>\n          )}\n\n          <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mt-6 mb-2 px-1\">Documentos Enviados</h3>\n          {userDocuments.length > 0 ? (\n            userDocuments.map((doc) => <DocumentItem key={doc.id} doc={doc} onDelete={deleteDocument} onRename={renameDocument} onToggleExpand={handleToggleExpand} isExpanded={expandedDocId === doc.id} onMoveToKnowledgeBase={handleMoveToKnowledgeBase} />)\n          ) : (\n            <div className=\"text-center text-gray-500 dark:text-gray-400 mt-4 py-4 border-2 border-dashed border-gray-300 dark:border-white/20 rounded-lg\">\n              <DocumentIcon className=\"w-8 h-8 mx-auto mb-1 text-gray-400\" />\n              <p className='text-sm'>Nenhum documento enviado.</p>\n            </div>\n          )}\n\n          {isLoading && (\n            <div className=\"flex items-center justify-center mt-4\">\n              <div className=\"w-6 h-6 border-2 border-t-transparent border-black dark:border-white rounded-full animate-spin\"></div>\n              <span className=\"ml-2 text-gray-600 dark:text-gray-300\">Processando...</span>\n            </div>\n          )}\n\n          {error && <p className=\"text-black text-sm mt-2 p-2 bg-gray-100 dark:bg-white/10 rounded-md whitespace-pre-wrap\">{error}</p>}\n        </div>\n        <div className=\"p-4 border-t border-gray-200 dark:border-white/20\">\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            className=\"hidden\"\n            accept=\".txt,.md,.pdf\"\n          />\n          <button\n            onClick={handleUploadClick}\n            disabled={isLoading}\n            className=\"w-full flex items-center justify-center p-3 bg-black dark:bg-white text-white dark:text-black rounded-lg disabled:bg-gray-400 disabled:dark:bg-gray-600 hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white focus:ring-offset-2 dark:focus:ring-offset-black\"\n          >\n            <PaperclipIcon className=\"w-5 h-5 mr-2\" />\n            <span>Enviar Documento</span>\n          </button>\n        </div>\n      </aside>\n    </>\n  );\n};\n\nexport default DocumentSidebar;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7179, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/SunIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const SunIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 7216, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/MoonIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const MoonIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 7253, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ThemeToggle.tsx"],"sourcesContent":["import React from 'react';\nimport { SunIcon } from './icons/SunIcon';\nimport { MoonIcon } from './icons/MoonIcon';\n\ninterface ThemeToggleProps {\n  theme: 'light' | 'dark';\n  toggleTheme: () => void;\n}\n\nconst ThemeToggle: React.FC<ThemeToggleProps> = ({ theme, toggleTheme }) => {\n  return (\n    <button\n      onClick={toggleTheme}\n      className=\"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black dark:focus:ring-white dark:focus:ring-offset-black\"\n      aria-label=\"Alternar tema\"\n    >\n      {theme === 'light' ? (\n        <MoonIcon className=\"w-6 h-6\" />\n      ) : (\n        <SunIcon className=\"w-6 h-6\" />\n      )}\n    </button>\n  );\n};\n\nexport default ThemeToggle;"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAOA,MAAM,cAA0C,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE;IACrE,qBACE,6LAAC;QACC,SAAS;QACT,WAAU;QACV,cAAW;kBAEV,UAAU,wBACT,6LAAC,+IAAQ;YAAC,WAAU;;;;;qEAEpB,6LAAC,6IAAO;YAAC,WAAU;;;;;;;;;;;AAI3B;KAdM;uCAgBS"}},
    {"offset": {"line": 7298, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/TokenUsageDisplay.tsx"],"sourcesContent":["import React from 'react';\nimport { useChatStore } from '../store';\nimport { getModelForConversation } from '../services/geminiService';\n\nconst TokenUsageDisplay: React.FC = () => {\n    const { activeAgent, proTokenCount, proTokenLimit, visibleAgents } = useChatStore();\n\n    // Se visibleAgents for false, n√£o mostrar nada\n    if (!visibleAgents) {\n        return null;\n    }\n\n    // Obt√©m o modelo real configurado para o agente ativo\n    const activeModel = getModelForConversation(activeAgent);\n    const proUsagePercentage = (proTokenCount / proTokenLimit) * 100;\n\n    // Extrai um nome amig√°vel do modelo\n    const getModelDisplayName = (model: string) => {\n        if (model.includes('gpt-4o-mini')) return 'GPT-4o Mini';\n        if (model.includes('gpt-4o')) return 'GPT-4o';\n        if (model.includes('glm-4.5-air')) return 'GLM-4.5 Air';\n        if (model.includes('gemma-3-27b')) return 'Gemma 3-27B';\n        if (model.includes('flash')) return 'Flash';\n        if (model.includes('pro')) return 'Pro';\n        // Extrai parte final do modelo como fallback\n        const parts = model.split('/');\n        return parts[parts.length - 1] || model;\n    };\n\n    const modelDisplayName = getModelDisplayName(activeModel);\n\n    return (\n        <div className=\"flex flex-col items-end\">\n            <div className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                <span className=\"font-semibold hidden sm:inline\">Modelo Ativo: </span>\n                <span className={`font-bold px-2 py-0.5 rounded-full text-xs bg-gray-100 text-black dark:bg-white/10 dark:text-white`}>\n                    {modelDisplayName}\n                </span>\n            </div>\n            <div className=\"w-28 sm:w-48\">\n                <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-1 text-right whitespace-nowrap\">\n                    <span className=\"hidden sm:inline\">Uso: </span>\n                    {proTokenCount.toLocaleString()}/{proTokenLimit.toLocaleString()}\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2 dark:bg-white/10\">\n                    <div\n                        className=\"bg-black dark:bg-white h-2 rounded-full\"\n                        style={{ width: `${Math.min(proUsagePercentage, 100)}%` }}\n                    ></div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default TokenUsageDisplay;"],"names":[],"mappings":";;;;;AACA;AACA;;;;;AAEA,MAAM,oBAA8B;;IAChC,MAAM,EAAE,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG,IAAA,wHAAY;IAEjF,+CAA+C;IAC/C,IAAI,CAAC,eAAe;QAChB,OAAO;IACX;IAEA,sDAAsD;IACtD,MAAM,cAAc,IAAA,uJAAuB,EAAC;IAC5C,MAAM,qBAAqB,AAAC,gBAAgB,gBAAiB;IAE7D,oCAAoC;IACpC,MAAM,sBAAsB,CAAC;QACzB,IAAI,MAAM,QAAQ,CAAC,gBAAgB,OAAO;QAC1C,IAAI,MAAM,QAAQ,CAAC,WAAW,OAAO;QACrC,IAAI,MAAM,QAAQ,CAAC,gBAAgB,OAAO;QAC1C,IAAI,MAAM,QAAQ,CAAC,gBAAgB,OAAO;QAC1C,IAAI,MAAM,QAAQ,CAAC,UAAU,OAAO;QACpC,IAAI,MAAM,QAAQ,CAAC,QAAQ,OAAO;QAClC,6CAA6C;QAC7C,MAAM,QAAQ,MAAM,KAAK,CAAC;QAC1B,OAAO,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,IAAI;IACtC;IAEA,MAAM,mBAAmB,oBAAoB;IAE7C,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAK,WAAU;kCAAiC;;;;;;kCACjD,6LAAC;wBAAK,WAAW,CAAC,kGAAkG,CAAC;kCAChH;;;;;;;;;;;;0BAGT,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAK,WAAU;0CAAmB;;;;;;4BAClC,cAAc,cAAc;4BAAG;4BAAE,cAAc,cAAc;;;;;;;kCAElE,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BACG,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,KAAK,GAAG,CAAC,oBAAoB,KAAK,CAAC,CAAC;4BAAC;;;;;;;;;;;;;;;;;;;;;;;AAMhF;GAjDM;;QACmE,wHAAY;;;KAD/E;uCAmDS"}},
    {"offset": {"line": 7429, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/KeyIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const KeyIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 7467, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/EyeSlashIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const EyeSlashIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.243 4.243L6.228 6.228\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAiD,CAAC,EAAE,SAAS,EAAE,iBAC1E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 7505, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ChangePasswordModal.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useChatStore } from '../store';\nimport { KeyIcon } from './icons/KeyIcon';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { EyeIcon } from './icons/EyeIcon';\nimport { EyeSlashIcon } from './icons/EyeSlashIcon';\n\ninterface ChangePasswordModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst ChangePasswordModal: React.FC<ChangePasswordModalProps> = ({ isOpen, onClose }) => {\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [showPassword, setShowPassword] = useState(false);\n    const { updatePassword, authLoading, authError, authMessage, clearAuthFeedback } = useChatStore();\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (password !== confirmPassword) {\n            // Manually set an error if passwords don't match, or just alert\n            alert(\"As senhas n√£o coincidem.\");\n            return;\n        }\n        await updatePassword(password);\n    };\n\n    // Clear feedback when closing\n    React.useEffect(() => {\n        if (!isOpen) {\n            setPassword('');\n            setConfirmPassword('');\n            clearAuthFeedback();\n        }\n    }, [isOpen, clearAuthFeedback]);\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={onClose}>\n            <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-2xl shadow-2xl w-full max-w-md\" onClick={(e) => e.stopPropagation()}>\n                <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-gray-100 dark:bg-white/10\">\n                            <KeyIcon className=\"w-6 h-6 text-gray-600 dark:text-white\" />\n                        </div>\n                        <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Alterar Senha</h2>\n                    </div>\n                    <button onClick={onClose} className=\"p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full\">\n                        <CloseIcon className=\"w-6 h-6\" />\n                    </button>\n                </header>\n                <div className=\"p-6\">\n                    {!authMessage ? (\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\n                            <div>\n                                <label htmlFor=\"new-password\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                    Nova Senha\n                                </label>\n                                <div className=\"relative mt-1\">\n                                    <input\n                                        id=\"new-password\"\n                                        type={showPassword ? 'text' : 'password'}\n                                        required\n                                        value={password}\n                                        onChange={(e) => setPassword(e.target.value)}\n                                        className=\"w-full px-4 py-2.5 pr-10 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent\"\n                                    />\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => setShowPassword(!showPassword)}\n                                        className=\"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 dark:hover:text-white\"\n                                    >\n                                        {showPassword ? <EyeSlashIcon className=\"h-5 w-5\" /> : <EyeIcon className=\"h-5 w-5\" />}\n                                    </button>\n                                </div>\n                            </div>\n                            <div>\n                                <label htmlFor=\"confirm-password\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                    Confirmar Nova Senha\n                                </label>\n                                <input\n                                    id=\"confirm-password\"\n                                    type=\"password\"\n                                    required\n                                    value={confirmPassword}\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\n                                    className=\"w-full px-4 py-2.5 mt-1 text-gray-900 dark:text-white bg-white dark:bg-black border border-gray-300 dark:border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-white focus:border-transparent\"\n                                />\n                            </div>\n\n                            {authError && (\n                                <div className=\"p-3 text-sm text-red-600 bg-red-50 dark:text-white dark:bg-red-900/20 border border-red-200 dark:border-red-500/50 rounded-lg\">\n                                    <p className=\"font-bold\">Erro:</p>\n                                    <p>{authError.message}</p>\n                                </div>\n                            )}\n\n                            <div className=\"mt-6\">\n                                <button\n                                    type=\"submit\"\n                                    disabled={authLoading}\n                                    className=\"w-full px-4 py-2.5 font-semibold text-white bg-blue-600 dark:text-black dark:bg-white rounded-lg hover:bg-blue-700 dark:hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                                >\n                                    {authLoading ? 'Atualizando...' : 'Atualizar Senha'}\n                                </button>\n                            </div>\n                        </form>\n                    ) : (\n                        <div className=\"text-center\">\n                            <div className=\"p-4 mb-6 text-sm text-green-700 bg-green-50 dark:text-white dark:bg-green-900/20 border border-green-200 dark:border-green-500/50 rounded-lg\">\n                                <p className=\"font-bold text-lg mb-2\">Sucesso!</p>\n                                <p>{authMessage}</p>\n                            </div>\n                            <button\n                                onClick={onClose}\n                                className=\"w-full px-4 py-2.5 font-semibold text-gray-700 dark:text-white bg-gray-100 dark:bg-white/10 border border-gray-300 dark:border-white/20 rounded-lg hover:bg-gray-200 dark:hover:bg-white/20 transition-colors\"\n                            >\n                                Fechar\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ChangePasswordModal;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAOA,MAAM,sBAA0D,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;;IAChF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,EAAE,cAAc,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,iBAAiB,EAAE,GAAG,IAAA,wHAAY;IAE/F,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,aAAa,iBAAiB;YAC9B,gEAAgE;YAChE,MAAM;YACN;QACJ;QACA,MAAM,eAAe;IACzB;IAEA,8BAA8B;IAC9B,wKAAK,CAAC,SAAS;yCAAC;YACZ,IAAI,CAAC,QAAQ;gBACT,YAAY;gBACZ,mBAAmB;gBACnB;YACJ;QACJ;wCAAG;QAAC;QAAQ;KAAkB;IAE9B,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACI,6LAAC;QAAI,WAAU;QAAsE,SAAS;kBAC1F,cAAA,6LAAC;YAAI,WAAU;YAA4G,SAAS,CAAC,IAAM,EAAE,eAAe;;8BACxJ,6LAAC;oBAAO,WAAU;;sCACd,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,6IAAO;wCAAC,WAAU;;;;;;;;;;;8CAEvB,6LAAC;oCAAG,WAAU;8CAAsD;;;;;;;;;;;;sCAExE,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,6LAAC,iJAAS;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAG7B,6LAAC;oBAAI,WAAU;8BACV,CAAC,4BACE,6LAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACpC,6LAAC;;kDACG,6LAAC;wCAAM,SAAQ;wCAAe,WAAU;kDAA6D;;;;;;kDAGrG,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDACG,IAAG;gDACH,MAAM,eAAe,SAAS;gDAC9B,QAAQ;gDACR,OAAO;gDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gDAC3C,WAAU;;;;;;0DAEd,6LAAC;gDACG,MAAK;gDACL,SAAS,IAAM,gBAAgB,CAAC;gDAChC,WAAU;0DAET,6BAAe,6LAAC,uJAAY;oDAAC,WAAU;;;;;6GAAe,6LAAC,6IAAO;oDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0CAItF,6LAAC;;kDACG,6LAAC;wCAAM,SAAQ;wCAAmB,WAAU;kDAA6D;;;;;;kDAGzG,6LAAC;wCACG,IAAG;wCACH,MAAK;wCACL,QAAQ;wCACR,OAAO;wCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;wCAClD,WAAU;;;;;;;;;;;;4BAIjB,2BACG,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAE,WAAU;kDAAY;;;;;;kDACzB,6LAAC;kDAAG,UAAU,OAAO;;;;;;;;;;;;0CAI7B,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;oCACG,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,cAAc,mBAAmB;;;;;;;;;;;;;;;;iFAK9C,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAE,WAAU;kDAAyB;;;;;;kDACtC,6LAAC;kDAAG;;;;;;;;;;;;0CAER,6LAAC;gCACG,SAAS;gCACT,WAAU;0CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS7B;GAnHM;;QAIiF,wHAAY;;;KAJ7F;uCAqHS"}},
    {"offset": {"line": 7831, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/Dashboard.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { useChatStore, useDocumentStore } from '../store';\nimport { Conversation, AgentType } from '../types';\nimport { BotIcon } from './icons/BotIcon';\nimport { DocumentIcon } from './icons/DocumentIcon';\nimport { CloseIcon } from './icons/CloseIcon';\n\ninterface DashboardProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\ninterface AgentStats {\n    totalConversations: number;\n    totalMessages: number;\n    userMessages: number;\n    botMessages: number;\n    averageMessagesPerConversation: number;\n    feedbackGood: number;\n    feedbackBad: number;\n}\n\ninterface ConversationWithAgent extends Conversation {\n    agentType: AgentType;\n}\n\nconst Dashboard: React.FC<DashboardProps> = ({ isOpen, onClose }) => {\n    const {\n        documentConversations,\n        codeConversations,\n        suggestionConversations,\n        user,\n    } = useChatStore();\n\n    const { documents } = useDocumentStore();\n\n    // Calculate comprehensive statistics\n    const stats = useMemo(() => {\n        const allConversations: ConversationWithAgent[] = [\n            ...Object.values(documentConversations).map(c => ({ ...c, agentType: 'document' as AgentType })),\n            ...Object.values(codeConversations).map(c => ({ ...c, agentType: 'code' as AgentType })),\n            ...Object.values(suggestionConversations).map(c => ({ ...c, agentType: 'suggestion' as AgentType })),\n        ];\n\n        const allMessages = allConversations.flatMap(c => c.messages);\n\n        // Overall stats\n        const totalConversations = allConversations.length;\n        const totalMessages = allMessages.length;\n        const userMessages = allMessages.filter(m => m.sender === 'user').length;\n        const botMessages = allMessages.filter(m => m.sender === 'bot').length;\n        const feedbackGood = allMessages.filter(m => m.feedback === 'good').length;\n        const feedbackBad = allMessages.filter(m => m.feedback === 'bad').length;\n\n        // Agent-specific stats\n        const getAgentStats = (conversations: Record<string, Conversation>): AgentStats => {\n            const convos = Object.values(conversations);\n            const messages = convos.flatMap(c => c.messages);\n\n            return {\n                totalConversations: convos.length,\n                totalMessages: messages.length,\n                userMessages: messages.filter(m => m.sender === 'user').length,\n                botMessages: messages.filter(m => m.sender === 'bot').length,\n                averageMessagesPerConversation: convos.length > 0 ? messages.length / convos.length : 0,\n                feedbackGood: messages.filter(m => m.feedback === 'good').length,\n                feedbackBad: messages.filter(m => m.feedback === 'bad').length,\n            };\n        };\n\n        const documentStats = getAgentStats(documentConversations);\n        const codeStats = getAgentStats(codeConversations);\n        const suggestionStats = getAgentStats(suggestionConversations);\n\n        // Recent activity\n        const recentConversations = allConversations\n            .sort((a, b) => (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt))\n            .slice(0, 5);\n\n        const recentMessages = allMessages\n            .sort((a, b) => b.createdAt - a.createdAt)\n            .slice(0, 10);\n\n        // Document stats\n        const totalDocuments = documents.length;\n        const userDocuments = documents.filter(d => d.isDeletable).length;\n        const systemDocuments = documents.filter(d => !d.isDeletable).length;\n\n        // Time-based stats\n        const now = Date.now();\n        const oneDayAgo = now - 24 * 60 * 60 * 1000;\n        const oneWeekAgo = now - 7 * 24 * 60 * 60 * 1000;\n\n        const conversationsToday = allConversations.filter(c => c.createdAt > oneDayAgo).length;\n        const conversationsThisWeek = allConversations.filter(c => c.createdAt > oneWeekAgo).length;\n        const messagesToday = allMessages.filter(m => m.createdAt > oneDayAgo).length;\n        const messagesThisWeek = allMessages.filter(m => m.createdAt > oneWeekAgo).length;\n\n        return {\n            overall: {\n                totalConversations,\n                totalMessages,\n                userMessages,\n                botMessages,\n                feedbackGood,\n                feedbackBad,\n                conversationsToday,\n                conversationsThisWeek,\n                messagesToday,\n                messagesThisWeek,\n            },\n            agents: {\n                document: documentStats,\n                code: codeStats,\n                suggestion: suggestionStats,\n            },\n            documents: {\n                total: totalDocuments,\n                user: userDocuments,\n                system: systemDocuments,\n            },\n            recent: {\n                conversations: recentConversations,\n                messages: recentMessages,\n            },\n        };\n    }, [documentConversations, codeConversations, suggestionConversations, documents]);\n\n    if (!isOpen) return null;\n\n    const StatCard: React.FC<{ title: string; value: string | number; subtitle?: string; icon?: React.ReactNode }> =\n        ({ title, value, subtitle, icon }) => (\n            <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-lg p-4 hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">{title}</p>\n                        <p className=\"text-3xl font-bold text-black dark:text-white\">{value}</p>\n                        {subtitle && <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">{subtitle}</p>}\n                    </div>\n                    {icon && <div className=\"ml-2 text-gray-400 dark:text-gray-600\">{icon}</div>}\n                </div>\n            </div>\n        );\n\n    const AgentStatsCard: React.FC<{ stats: AgentStats; name: string }> =\n        ({ stats, name }) => (\n            <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                    <BotIcon className=\"w-6 h-6 text-black dark:text-white\" />\n                    <h3 className=\"text-lg font-semibold text-black dark:text-white\">{name}</h3>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                    <div>\n                        <p className=\"text-gray-600 dark:text-gray-400\">Conversas</p>\n                        <p className=\"text-xl font-bold text-black dark:text-white\">{stats.totalConversations}</p>\n                    </div>\n                    <div>\n                        <p className=\"text-gray-600 dark:text-gray-400\">Mensagens</p>\n                        <p className=\"text-xl font-bold text-black dark:text-white\">{stats.totalMessages}</p>\n                    </div>\n                    <div>\n                        <p className=\"text-gray-600 dark:text-gray-400\">M√©dia/Conv.</p>\n                        <p className=\"text-xl font-bold text-black dark:text-white\">\n                            {stats.averageMessagesPerConversation.toFixed(1)}\n                        </p>\n                    </div>\n                    <div>\n                        <p className=\"text-gray-600 dark:text-gray-400\">Feedback</p>\n                        <p className=\"text-xl font-bold text-black dark:text-white\">\n                            <span className=\"text-green-600 dark:text-green-400\">‚Üë{stats.feedbackGood}</span>\n                            {' '}\n                            <span className=\"text-red-600 dark:text-red-400\">‚Üì{stats.feedbackBad}</span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        );\n\n    const formatDate = (timestamp: number) => {\n        const date = new Date(timestamp);\n        const now = Date.now();\n        const diff = now - timestamp;\n\n        if (diff < 60000) return 'Agora mesmo';\n        if (diff < 3600000) return `${Math.floor(diff / 60000)}m atr√°s`;\n        if (diff < 86400000) return `${Math.floor(diff / 3600000)}h atr√°s`;\n        if (diff < 604800000) return `${Math.floor(diff / 86400000)}d atr√°s`;\n\n        return date.toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' });\n    };\n\n    const getAgentName = (agentType: AgentType) => {\n        switch (agentType) {\n            case 'document': return 'Consultor';\n            case 'code': return 'C√≥digo';\n            case 'suggestion': return 'Sugest√£o';\n        }\n    };\n\n    return (\n        <div\n            className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 animate-fade-in overflow-hidden\"\n            onClick={onClose}\n        >\n            <div\n                className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-xl shadow-2xl w-full max-w-7xl max-h-[95vh] flex flex-col\"\n                onClick={(e) => e.stopPropagation()}\n            >\n                {/* Header */}\n                <header className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-white/20\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center bg-gray-200 dark:bg-white/10\">\n                            <svg className=\"w-7 h-7 text-gray-600 dark:text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                            </svg>\n                        </div>\n                        <div>\n                            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dashboard</h2>\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                                Vis√£o geral de todos os dados da aplica√ß√£o\n                            </p>\n                        </div>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 text-gray-500 dark:text-white hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition-colors\"\n                        aria-label=\"Fechar dashboard\"\n                    >\n                        <CloseIcon className=\"w-6 h-6\" />\n                    </button>\n                </header>\n\n                {/* Content */}\n                <main className=\"flex-1 overflow-y-auto p-6\">\n                    {/* User Info */}\n                    <div className=\"mb-6 p-4 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-white/5 dark:to-white/10 rounded-lg border border-gray-200 dark:border-white/20\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"w-12 h-12 rounded-full bg-black dark:bg-white flex items-center justify-center\">\n                                <span className=\"text-xl font-bold text-white dark:text-black\">\n                                    {user?.email?.charAt(0).toUpperCase() || 'U'}\n                                </span>\n                            </div>\n                            <div>\n                                <p className=\"font-semibold text-black dark:text-white\">{user?.email}</p>\n                                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                                    Membro desde {new Date(user?.created_at || '').toLocaleDateString('pt-BR')}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Overall Statistics */}\n                    <section className=\"mb-8\">\n                        <h3 className=\"text-xl font-bold text-black dark:text-white mb-4\">Estat√≠sticas Gerais</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                            <StatCard\n                                title=\"Total de Conversas\"\n                                value={stats.overall.totalConversations}\n                                subtitle={`${stats.overall.conversationsThisWeek} esta semana`}\n                                icon={<BotIcon className=\"w-8 h-8\" />}\n                            />\n                            <StatCard\n                                title=\"Total de Mensagens\"\n                                value={stats.overall.totalMessages}\n                                subtitle={`${stats.overall.messagesThisWeek} esta semana`}\n                                icon={\n                                    <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                                    </svg>\n                                }\n                            />\n                            <StatCard\n                                title=\"Documentos\"\n                                value={stats.documents.total}\n                                subtitle={`${stats.documents.user} enviados por voc√™`}\n                                icon={<DocumentIcon className=\"w-8 h-8\" />}\n                            />\n                            <StatCard\n                                title=\"Taxa de Satisfa√ß√£o\"\n                                value={\n                                    stats.overall.feedbackGood + stats.overall.feedbackBad > 0\n                                        ? `${Math.round((stats.overall.feedbackGood / (stats.overall.feedbackGood + stats.overall.feedbackBad)) * 100)}%`\n                                        : 'N/A'\n                                }\n                                subtitle={`${stats.overall.feedbackGood} positivos, ${stats.overall.feedbackBad} negativos`}\n                                icon={\n                                    <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                                    </svg>\n                                }\n                            />\n                        </div>\n                    </section>\n\n                    {/* Activity This Week */}\n                    <section className=\"mb-8\">\n                        <h3 className=\"text-xl font-bold text-black dark:text-white mb-4\">Atividade Recente</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <StatCard\n                                title=\"Conversas Hoje\"\n                                value={stats.overall.conversationsToday}\n                                subtitle=\"√öltimas 24 horas\"\n                            />\n                            <StatCard\n                                title=\"Mensagens Hoje\"\n                                value={stats.overall.messagesToday}\n                                subtitle=\"√öltimas 24 horas\"\n                            />\n                        </div>\n                    </section>\n\n                    {/* Agent Statistics */}\n                    <section className=\"mb-8\">\n                        <h3 className=\"text-xl font-bold text-black dark:text-white mb-4\">Uso por Agente</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                            <AgentStatsCard\n                                stats={stats.agents.document}\n                                name=\"Consultor Fiscal\"\n                            />\n                            <AgentStatsCard\n                                stats={stats.agents.code}\n                                name=\"Gerador de C√≥digo\"\n                            />\n                            <AgentStatsCard\n                                stats={stats.agents.suggestion}\n                                name=\"Otimizador de Prompt\"\n                            />\n                        </div>\n                    </section>\n\n                    {/* Recent Conversations */}\n                    <section className=\"mb-8\">\n                        <h3 className=\"text-xl font-bold text-black dark:text-white mb-4\">Conversas Recentes</h3>\n                        <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-lg overflow-hidden\">\n                            <div className=\"max-h-64 overflow-y-auto\">\n                                {stats.recent.conversations.length > 0 ? (\n                                    <table className=\"w-full\">\n                                        <thead className=\"bg-gray-100 dark:bg-white/5 sticky top-0\">\n                                            <tr>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">T√≠tulo</th>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">Agente</th>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">Mensagens</th>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">Atualizado</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"divide-y divide-gray-200 dark:divide-white/10\">\n                                            {stats.recent.conversations.map((conv) => (\n                                                <tr key={conv.id} className=\"hover:bg-gray-50 dark:hover:bg-white/5\">\n                                                    <td className=\"p-3 text-sm text-black dark:text-white\">{conv.title}</td>\n                                                    <td className=\"p-3 text-sm text-gray-600 dark:text-gray-400\">\n                                                        <span className=\"px-2 py-1 bg-gray-200 dark:bg-white/10 rounded text-xs\">\n                                                            {getAgentName(conv.agentType)}\n                                                        </span>\n                                                    </td>\n                                                    <td className=\"p-3 text-sm text-gray-600 dark:text-gray-400\">{conv.messages.length}</td>\n                                                    <td className=\"p-3 text-sm text-gray-600 dark:text-gray-400\">\n                                                        {formatDate(conv.updatedAt || conv.createdAt)}\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                ) : (\n                                    <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\n                                        Nenhuma conversa encontrada\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </section>\n\n                    {/* Documents Overview */}\n                    <section>\n                        <h3 className=\"text-xl font-bold text-black dark:text-white mb-4\">Documentos</h3>\n                        <div className=\"bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-lg overflow-hidden\">\n                            <div className=\"max-h-64 overflow-y-auto\">\n                                {documents.length > 0 ? (\n                                    <table className=\"w-full\">\n                                        <thead className=\"bg-gray-100 dark:bg-white/5 sticky top-0\">\n                                            <tr>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">Nome</th>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">Tipo</th>\n                                                <th className=\"text-left p-3 text-sm font-semibold text-gray-700 dark:text-gray-300\">Chunks</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"divide-y divide-gray-200 dark:divide-white/10\">\n                                            {documents.map((doc) => (\n                                                <tr key={doc.id} className=\"hover:bg-gray-50 dark:hover:bg-white/5\">\n                                                    <td className=\"p-3 text-sm text-black dark:text-white truncate max-w-xs\">{doc.name}</td>\n                                                    <td className=\"p-3 text-sm text-gray-600 dark:text-gray-400\">\n                                                        <span className={`px-2 py-1 rounded text-xs ${doc.isDeletable\n                                                            ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300'\n                                                            : 'bg-gray-200 dark:bg-white/10 text-gray-800 dark:text-gray-300'\n                                                            }`}>\n                                                            {doc.isDeletable ? 'Usu√°rio' : 'Sistema'}\n                                                        </span>\n                                                    </td>\n                                                    <td className=\"p-3 text-sm text-gray-600 dark:text-gray-400\">{doc.chunks.length}</td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                ) : (\n                                    <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\n                                        Nenhum documento encontrado\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </section>\n                </main>\n            </div>\n\n            <style>{`\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out forwards;\n        }\n      `}</style>\n        </div>\n    );\n};\n\nexport default Dashboard;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8927, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/MenuIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const MenuIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 8965, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ChangelogModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { supabase } from '../services/supabaseClient';\n\ninterface ChangelogEntry {\n    id: string;\n    version: string;\n    title: string;\n    description: string | null;\n    category: 'feature' | 'bugfix' | 'improvement' | 'breaking' | 'security' | 'docs';\n    release_date: string;\n    author: string | null;\n    tags: string[] | null;\n    is_published: boolean;\n}\n\ninterface ChangelogModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst categoryConfig = {\n    feature: {\n        label: 'Nova Funcionalidade',\n        icon: '‚ú®',\n        color: 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300',\n        badgeColor: 'bg-blue-600 text-white',\n    },\n    bugfix: {\n        label: 'Corre√ß√£o',\n        icon: 'üêõ',\n        color: 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-700 dark:text-red-300',\n        badgeColor: 'bg-red-600 text-white',\n    },\n    improvement: {\n        label: 'Melhoria',\n        icon: '‚ö°',\n        color: 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-700 dark:text-green-300',\n        badgeColor: 'bg-green-600 text-white',\n    },\n    breaking: {\n        label: 'Breaking Change',\n        icon: '‚ö†Ô∏è',\n        color: 'bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-700 dark:text-orange-300',\n        badgeColor: 'bg-orange-600 text-white',\n    },\n    security: {\n        label: 'Seguran√ßa',\n        icon: 'üîí',\n        color: 'bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-700 dark:text-purple-300',\n        badgeColor: 'bg-purple-600 text-white',\n    },\n    docs: {\n        label: 'Documenta√ß√£o',\n        icon: 'üìö',\n        color: 'bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300',\n        badgeColor: 'bg-gray-600 text-white',\n    },\n};\n\nconst ChangelogModal: React.FC<ChangelogModalProps> = ({ isOpen, onClose }) => {\n    const [entries, setEntries] = useState<ChangelogEntry[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [selectedCategory, setSelectedCategory] = useState<string>('all');\n    const [searchTerm, setSearchTerm] = useState('');\n\n    useEffect(() => {\n        if (isOpen) {\n            loadChangelog();\n        }\n    }, [isOpen]);\n\n    const loadChangelog = async () => {\n        setIsLoading(true);\n        try {\n            const { data, error } = await supabase\n                .from('changelog')\n                .select('*')\n                .eq('is_published', true)\n                .order('release_date', { ascending: false });\n\n            if (error) throw error;\n            setEntries(data || []);\n        } catch (error) {\n            console.error('Error loading changelog:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const filteredEntries = entries.filter(entry => {\n        const matchesCategory = selectedCategory === 'all' || entry.category === selectedCategory;\n        const matchesSearch =\n            entry.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            entry.description?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            entry.version.toLowerCase().includes(searchTerm.toLowerCase());\n\n        return matchesCategory && matchesSearch;\n    });\n\n    // Agrupar por vers√£o\n    const groupedEntries = filteredEntries.reduce((acc, entry) => {\n        if (!acc[entry.version]) {\n            acc[entry.version] = [];\n        }\n        acc[entry.version].push(entry);\n        return acc;\n    }, {} as Record<string, ChangelogEntry[]>);\n\n    const formatDate = (dateString: string) => {\n        const date = new Date(dateString);\n        return new Intl.DateTimeFormat('pt-BR', {\n            day: '2-digit',\n            month: 'long',\n            year: 'numeric',\n        }).format(date);\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div\n            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in\"\n            onClick={onClose}\n        >\n            <div\n                className=\"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-gray-700\"\n                onClick={(e) => e.stopPropagation()}\n            >\n                {/* Header */}\n                <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                    <div>\n                        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\n                            üìù Changelog\n                        </h2>\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                            Acompanhe todas as novidades, melhorias e corre√ß√µes\n                        </p>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-all\"\n                        aria-label=\"Fechar\"\n                    >\n                        <CloseIcon className=\"w-5 h-5\" />\n                    </button>\n                </div>\n\n                {/* Filters */}\n                <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 space-y-4\">\n                    {/* Search */}\n                    <div className=\"relative\">\n                        <svg className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                        </svg>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Buscar por t√≠tulo, descri√ß√£o ou vers√£o...\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            className=\"w-full pl-10 pr-4 py-3 text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                    </div>\n\n                    {/* Category Filter */}\n                    <div className=\"flex flex-wrap gap-2\">\n                        <button\n                            onClick={() => setSelectedCategory('all')}\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${selectedCategory === 'all'\n                                    ? 'bg-blue-600 text-white'\n                                    : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\n                                }`}\n                        >\n                            Todos\n                        </button>\n                        {Object.entries(categoryConfig).map(([key, config]) => (\n                            <button\n                                key={key}\n                                onClick={() => setSelectedCategory(key)}\n                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${selectedCategory === key\n                                        ? config.badgeColor\n                                        : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\n                                    }`}\n                            >\n                                <span>{config.icon}</span>\n                                <span>{config.label}</span>\n                            </button>\n                        ))}\n                    </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 overflow-y-auto p-6\">\n                    {isLoading ? (\n                        <div className=\"flex flex-col items-center justify-center py-12\">\n                            <svg className=\"w-10 h-10 text-blue-600 dark:text-blue-500 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                            </svg>\n                            <p className=\"mt-3 text-sm text-gray-500 dark:text-gray-400\">Carregando changelog...</p>\n                        </div>\n                    ) : filteredEntries.length === 0 ? (\n                        <div className=\"flex flex-col items-center justify-center py-12\">\n                            <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4\">\n                                <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                                </svg>\n                            </div>\n                            <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                                {searchTerm || selectedCategory !== 'all' ? 'Nenhuma entrada encontrada' : 'Nenhuma atualiza√ß√£o ainda'}\n                            </p>\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                {searchTerm || selectedCategory !== 'all' ? 'Tente outro filtro ou busca' : 'As atualiza√ß√µes aparecer√£o aqui'}\n                            </p>\n                        </div>\n                    ) : (\n                        <div className=\"space-y-8\">\n                            {Object.entries(groupedEntries).map(([version, versionEntries]) => (\n                                <div key={version} className=\"space-y-4\">\n                                    {/* Version Header */}\n                                    <div className=\"flex items-center gap-3\">\n                                        <div className=\"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold shadow-lg\">\n                                            {version.split('.')[0]}\n                                        </div>\n                                        <div>\n                                            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n                                                Vers√£o {version}\n                                            </h3>\n                                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                                {formatDate(versionEntries[0].release_date)}\n                                            </p>\n                                        </div>\n                                    </div>\n\n                                    {/* Entries */}\n                                    <div className=\"space-y-3 ml-6 border-l-2 border-gray-200 dark:border-gray-700 pl-6\">\n                                        {versionEntries.map((entry) => {\n                                            const config = categoryConfig[entry.category];\n                                            return (\n                                                <div\n                                                    key={entry.id}\n                                                    className={`p-4 rounded-xl border-2 ${config.color} transition-all hover:shadow-md`}\n                                                >\n                                                    <div className=\"flex items-start justify-between gap-3\">\n                                                        <div className=\"flex-1\">\n                                                            <div className=\"flex items-center gap-2 mb-2\">\n                                                                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${config.badgeColor}`}>\n                                                                    {config.icon} {config.label}\n                                                                </span>\n                                                                {entry.tags && entry.tags.length > 0 && (\n                                                                    <div className=\"flex gap-1\">\n                                                                        {entry.tags.map((tag, idx) => (\n                                                                            <span\n                                                                                key={idx}\n                                                                                className=\"px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md text-xs\"\n                                                                            >\n                                                                                #{tag}\n                                                                            </span>\n                                                                        ))}\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                            <h4 className=\"font-semibold text-gray-900 dark:text-white mb-1\">\n                                                                {entry.title}\n                                                            </h4>\n                                                            {entry.description && (\n                                                                <p className=\"text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap\">\n                                                                    {entry.description}\n                                                                </p>\n                                                            )}\n                                                            {entry.author && (\n                                                                <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-2\">\n                                                                    Por {entry.author}\n                                                                </p>\n                                                            )}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            );\n                                        })}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ChangelogModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9503, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useChatStore, useDocumentStore } from './store';\nimport ChatMessage from './components/ChatMessage';\nimport ChatInput from './components/ChatInput';\nimport HistorySidebar from './components/HistorySidebar';\nimport DocumentSidebar from './components/DocumentSidebar';\nimport ThemeToggle from './components/ThemeToggle';\nimport TokenUsageDisplay from './components/TokenUsageDisplay';\nimport { LightbulbIcon } from './components/icons/LightbulbIcon';\nimport AgentInfoModal from './components/AgentInfoModal';\nimport ChangePasswordModal from './components/ChangePasswordModal';\nimport FeedbackModal from './components/FeedbackModal';\nimport Dashboard from './components/Dashboard';\nimport ContactFormModal from './components/ContactFormModal';\nimport { MenuIcon } from './components/icons/MenuIcon';\nimport { DocumentIcon } from './components/icons/DocumentIcon';\nimport { BotIcon } from './components/icons/BotIcon';\nimport { InfoIcon } from './components/icons/InfoIcon';\nimport { documentAgentSuggestions, codeAgentSuggestions, suggestionAgentSuggestions } from './suggestions';\nimport { Conversation, Message, AgentType } from './types';\nimport { KeyIcon } from './components/icons/KeyIcon';\nimport { CloseIcon } from './components/icons/CloseIcon';\nimport { EyeIcon } from './components/icons/EyeIcon';\nimport { EyeSlashIcon } from './components/icons/EyeSlashIcon';\nimport { UserIcon } from './components/icons/UserIcon';\nimport ChangelogModal from './components/ChangelogModal';\n\n// ForgotPasswordModal Component\nconst ForgotPasswordModal: React.FC<{ isOpen: boolean; onClose: () => void; }> = ({ isOpen, onClose }) => {\n  const [email, setEmail] = useState('');\n  const { sendPasswordResetEmail, authLoading, authError, authMessage } = useChatStore();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    sendPasswordResetEmail(email);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={onClose}>\n      <div className=\"bg-black border border-white/20 rounded-2xl shadow-2xl w-full max-w-md\" onClick={(e) => e.stopPropagation()}>\n        <header className=\"flex items-center justify-between p-4 border-b border-white/20\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-white/10\">\n              <KeyIcon className=\"w-6 h-6 text-white\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-white\">Redefinir Senha</h2>\n          </div>\n          <button onClick={onClose} className=\"p-1 text-gray-400 hover:bg-white/10 rounded-full\">\n            <CloseIcon className=\"w-6 h-6\" />\n          </button>\n        </header>\n        <div className=\"p-6\">\n          {!authMessage ? (\n            <form onSubmit={handleSubmit}>\n              <p className=\"text-sm text-gray-400 mb-4\">\n                Digite o endere√ßo de e-mail associado √† sua conta e enviaremos um link para redefinir sua senha.\n              </p>\n              <div>\n                <label htmlFor=\"reset-email\" className=\"block text-sm font-medium text-gray-300\">\n                  Email\n                </label>\n                <input\n                  id=\"reset-email\" name=\"email\" type=\"email\" autoComplete=\"email\" required\n                  value={email} onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full px-4 py-2.5 mt-1 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\"\n                />\n              </div>\n              {authError && (\n                <div className=\"p-3 mt-4 text-sm text-white bg-white/10 border border-white/20 rounded-lg\">\n                  <p className=\"font-bold\">Ocorreu um erro:</p>\n                  <pre className=\"mt-1 font-sans text-xs whitespace-pre-wrap\">{authError.message}</pre>\n                </div>\n              )}\n              <div className=\"mt-6\">\n                <button type=\"submit\" disabled={authLoading}\n                  className=\"w-full px-4 py-2.5 font-semibold text-black bg-white rounded-lg hover:bg-gray-200 disabled:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white dark:focus:ring-offset-black transition-all duration-300\">\n                  {authLoading ? 'Enviando...' : 'Enviar Link de Redefini√ß√£o'}\n                </button>\n              </div>\n            </form>\n          ) : (\n            <div>\n              <div className=\"p-4 text-sm text-center text-white bg-white/10 border border-white/20 rounded-lg\">\n                <p className=\"font-bold\">Verifique seu E-mail!</p>\n                <p className=\"mt-2\">{authMessage}</p>\n              </div>\n              <button onClick={onClose} className=\"w-full mt-6 px-4 py-2.5 font-semibold text-white bg-white/10 border border-white/20 rounded-lg hover:bg-white/20\">\n                Fechar\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n// LoginPage Component\nconst LoginPage: React.FC<{ onNavigateToSignup: () => void; onNavigateToForgotPassword: () => void; }> = ({ onNavigateToSignup, onNavigateToForgotPassword }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const { signIn, authLoading, authError } = useChatStore();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    signIn(email, password);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-4 flex items-center justify-center\">\n      <div className=\"w-full max-w-4xl mx-auto bg-black border border-white/20 rounded-2xl shadow-2xl flex overflow-hidden\">\n        {/* Coluna de Branding */}\n        <div className=\"hidden md:flex flex-col items-center justify-center w-1/2 bg-white text-black p-8 text-center\">\n          <BotIcon className=\"w-24 h-24 mb-4\" />\n          <h1 className=\"text-3xl font-bold mb-2\">G√™nesis Agente IA</h1>\n          <p className=\"text-gray-600\">Sua expertise fiscal, potencializada por IA.</p>\n        </div>\n        {/* Coluna do Formul√°rio */}\n        <div className=\"w-full md:w-1/2 p-8 sm:p-12\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">\n            Bem-vindo de volta!\n          </h1>\n          <p className=\"mb-8 text-sm text-gray-400\">\n            Fa√ßa login para acessar o assistente.\n          </p>\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-300\">\n                Email\n              </label>\n              <input\n                id=\"email\" name=\"email\" type=\"email\" autoComplete=\"email\" required\n                value={email} onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-4 py-2.5 mt-1 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\"\n              />\n            </div>\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-300\">\n                  Senha\n                </label>\n                <div className=\"text-sm\">\n                  <button type=\"button\" onClick={onNavigateToForgotPassword} className=\"font-medium text-white hover:underline\">\n                    Esqueci minha senha\n                  </button>\n                </div>\n              </div>\n              <div className=\"relative mt-1\">\n                <input\n                  id=\"password\" name=\"password\" type={showPassword ? 'text' : 'password'} autoComplete=\"current-password\" required\n                  value={password} onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-4 py-2.5 pr-10 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-white\"\n                  aria-label={showPassword ? \"Ocultar senha\" : \"Mostrar senha\"}\n                >\n                  {showPassword ? (\n                    <EyeSlashIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <EyeIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n            {authError && (\n              <div className=\"p-3 my-2 text-sm text-white bg-white/10 border border-white/20 rounded-lg\">\n                <p className=\"font-bold\">Ocorreu um erro:</p>\n                <pre className=\"mt-1 font-sans text-xs whitespace-pre-wrap\">{authError.message}</pre>\n              </div>\n            )}\n            <div>\n              <button type=\"submit\" disabled={authLoading}\n                className=\"w-full px-4 py-2.5 font-semibold text-black bg-white rounded-lg hover:bg-gray-200 disabled:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white dark:focus:ring-offset-black transition-all duration-300\">\n                {authLoading ? 'Entrando...' : 'Entrar'}\n              </button>\n            </div>\n          </form>\n          <p className=\"text-sm text-center text-gray-400 mt-8\">\n            N√£o tem uma conta?{' '}\n            <button onClick={onNavigateToSignup}\n              className=\"font-medium text-white hover:underline\">\n              Cadastre-se\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// SignupPage Component\nconst SignupPage: React.FC<{ onNavigateToLogin: () => void; }> = ({ onNavigateToLogin }) => {\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [userType, setUserType] = useState('Contador');\n  const { signUp, authLoading, authError, authMessage } = useChatStore();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    signUp(email, password, { full_name: fullName, user_type: userType });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-4 flex items-center justify-center\">\n      <div className=\"w-full max-w-4xl mx-auto bg-black border border-white/20 rounded-2xl shadow-2xl flex overflow-hidden\">\n        {/* Coluna de Branding */}\n        <div className=\"hidden md:flex flex-col items-center justify-center w-1/2 bg-white text-black p-8 text-center\">\n          <BotIcon className=\"w-24 h-24 mb-4\" />\n          <h1 className=\"text-3xl font-bold mb-2\">G√™nesis Agente IA</h1>\n          <p className=\"text-gray-600\">Comece a transformar sua an√°lise tribut√°ria.</p>\n        </div>\n        {/* Coluna do Formul√°rio */}\n        <div className=\"w-full md:w-1/2 p-8 sm:p-12\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\">\n            Crie sua Conta\n          </h1>\n          <p className=\"mb-6 text-sm text-gray-400\">\n            Junte-se a n√≥s e simplifique suas tarefas fiscais.\n          </p>\n          <form className=\"space-y-4\" onSubmit={handleSubmit}>\n            <fieldset disabled={authLoading || !!authMessage}>\n              <div>\n                <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-gray-300\">Nome Completo</label>\n                <input id=\"fullName\" name=\"fullName\" type=\"text\" required value={fullName} onChange={(e) => setFullName(e.target.value)}\n                  className=\"w-full px-4 py-2.5 mt-1 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\" />\n              </div>\n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-300\">Email</label>\n                <input id=\"email\" name=\"email\" type=\"email\" autoComplete=\"email\" required value={email} onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full px-4 py-2.5 mt-1 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\" />\n              </div>\n              <div>\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-300\">Senha</label>\n                <div className=\"relative mt-1\">\n                  <input id=\"password\" name=\"password\" type={showPassword ? 'text' : 'password'} required value={password} onChange={(e) => setPassword(e.target.value)}\n                    className=\"w-full px-4 py-2.5 pr-10 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\" />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-white\"\n                    aria-label={showPassword ? \"Ocultar senha\" : \"Mostrar senha\"}\n                  >\n                    {showPassword ? (\n                      <EyeSlashIcon className=\"h-5 w-5\" />\n                    ) : (\n                      <EyeIcon className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"userType\" className=\"block text-sm font-medium text-gray-300\">Tipo de Usu√°rio</label>\n                <select id=\"userType\" name=\"userType\" value={userType} onChange={(e) => setUserType(e.target.value)}\n                  className=\"w-full px-4 py-2.5 mt-1 text-white bg-black border border-white/20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white focus:border-white\">\n                  <option>Contador</option>\n                  <option>Advogado</option>\n                  <option>Empres√°rio</option>\n                  <option>Desenvolvedor</option>\n                  <option>Estudante</option>\n                  <option>Outro</option>\n                </select>\n              </div>\n\n              {authMessage && !authError && (\n                <div className=\"p-3 my-2 text-sm text-white bg-white/10 border border-white/20 rounded-lg\">\n                  <p className=\"font-bold\">Sucesso!</p>\n                  <p className=\"mt-1\">{authMessage}</p>\n                </div>\n              )}\n\n              {authError && (\n                <div className=\"p-3 my-2 text-sm text-white bg-white/10 border border-white/20 rounded-lg\">\n                  <p className=\"font-bold\">Ocorreu um erro ao cadastrar:</p>\n                  <pre className=\"mt-1 font-sans text-xs whitespace-pre-wrap\">{authError.message}</pre>\n                </div>\n              )}\n\n              <div>\n                <button type=\"submit\" disabled={authLoading || !!authMessage}\n                  className=\"w-full px-4 py-2.5 font-semibold text-black bg-white rounded-lg hover:bg-gray-200 disabled:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white dark:focus:ring-offset-black transition-all duration-300\">\n                  {authLoading ? 'Cadastrando...' : 'Cadastrar'}\n                </button>\n              </div>\n            </fieldset>\n          </form>\n          <p className=\"text-sm text-center text-gray-400 mt-6\">\n            J√° tem uma conta?{' '}\n            <button onClick={onNavigateToLogin} className=\"font-medium text-white hover:underline\">\n              Fa√ßa login\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n// Main Chat Application Component\nconst ChatApplication: React.FC = () => {\n  const {\n    documentConversations,\n    codeConversations,\n    suggestionConversations,\n    activeDocumentConversationId,\n    activeCodeConversationId,\n    activeSuggestionConversationId,\n    sendMessage,\n    isLoading,\n    activeAgent,\n    setActiveAgent,\n    setMessageFeedback,\n    loadInitialData,\n    signOut,\n    user,\n    deleteMessage\n  } = useChatStore();\n  const { documents, addDocument } = useDocumentStore();\n  const [attachedFiles, setAttachedFiles] = useState<File[]>([]);\n  const [messageFiles, setMessageFiles] = useState<Map<string, File[]>>(new Map());\n  const [theme, setTheme] = useState<'light' | 'dark'>('dark');\n  const [isHistoryOpen, setIsHistoryOpen] = useState(false);\n  const [isDocumentsOpen, setIsDocumentsOpen] = useState(false);\n  const [isAgentInfoOpen, setIsAgentInfoOpen] = useState(false);\n  const [isFeedbackOpen, setIsFeedbackOpen] = useState(false);\n  const [isDashboardOpen, setIsDashboardOpen] = useState(false);\n  const [isContactFormOpen, setIsContactFormOpen] = useState(false);\n  const [isChangelogOpen, setIsChangelogOpen] = useState(false);\n  const [isChangePasswordOpen, setIsChangePasswordOpen] = useState(false);\n  const [isInitializing, setIsInitializing] = useState(true);\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  let activeConversationId: string | null = null;\n  let conversations: Record<string, Conversation> = {};\n  let agentName = '';\n  let suggestions: string[] = [];\n\n  switch (activeAgent) {\n    case 'code':\n      activeConversationId = activeCodeConversationId;\n      conversations = codeConversations;\n      agentName = 'Gerador de C√≥digo';\n      suggestions = codeAgentSuggestions;\n      break;\n    case 'suggestion':\n      activeConversationId = activeSuggestionConversationId;\n      conversations = suggestionConversations;\n      agentName = 'Otimizador de Prompt';\n      suggestions = suggestionAgentSuggestions;\n      break;\n    case 'document':\n    default:\n      activeConversationId = activeDocumentConversationId;\n      conversations = documentConversations;\n      agentName = 'Consultor Fiscal';\n      suggestions = documentAgentSuggestions;\n      break;\n  }\n\n  const activeConversation: Conversation | undefined = activeConversationId ? conversations[activeConversationId] : undefined;\n  const messages: Message[] = activeConversation?.messages || [];\n\n  useEffect(() => {\n    const initializeApp = async () => {\n      await loadInitialData();\n      setIsInitializing(false);\n    };\n    initializeApp();\n  }, [loadInitialData]);\n\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [theme]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const toggleTheme = () => {\n    setTheme(theme === 'light' ? 'dark' : 'light');\n  };\n\n  const handleSendMessage = (message: string) => {\n    // Associate attached files with this message\n    if (attachedFiles.length > 0) {\n      const messageId = crypto.randomUUID();\n      setMessageFiles(prev => new Map(prev).set(messageId, [...attachedFiles]));\n    }\n    \n    sendMessage(message, documents);\n    // Clear attached files after sending\n    setAttachedFiles([]);\n  };\n\n  const handleFileSelect = (file: File) => {\n    setAttachedFiles(prev => [...prev, file]);\n    addDocument(file);\n    setIsDocumentsOpen(true);\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    handleSendMessage(suggestion);\n  };\n\n  const handleFeedback = (messageId: string, feedback: 'good' | 'bad') => {\n    if (activeConversationId) {\n      setMessageFeedback(activeAgent, activeConversationId, messageId, feedback);\n    }\n  };\n\n  const AgentTabButton: React.FC<{ agent: AgentType, label: string }> = ({ agent, label }) => {\n    const getIcon = () => {\n      switch (agent) {\n        case 'document':\n          return <DocumentIcon className=\"w-5 h-5\" />;\n        case 'code':\n          return <BotIcon className=\"w-5 h-5\" />;\n        case 'suggestion':\n          return <LightbulbIcon className=\"w-5 h-5\" />;\n      }\n    };\n\n    return (\n      <button\n        onClick={() => setActiveAgent(agent)}\n        className={`p-2 rounded-full transition-colors duration-200 ${activeAgent === agent\n          ? 'bg-white dark:bg-white/20 text-black dark:text-white shadow-sm'\n          : 'text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10'\n          }`}\n        title={label}\n      >\n        {getIcon()}\n      </button>\n    );\n  };\n\n\n\n\n  if (isInitializing) {\n    return (\n      <div className=\"flex h-screen w-full items-center justify-center bg-white dark:bg-black\">\n        <div className=\"flex flex-col items-center\">\n          <BotIcon className=\"w-16 h-16 text-black dark:text-white animate-pulse\" />\n          <p className=\"mt-4 text-lg text-gray-700 dark:text-gray-300\">\n            Carregando assistente...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const renderWelcomeScreen = () => (\n    <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\n      <div className=\"w-20 h-20 mb-6 rounded-full flex items-center justify-center bg-gray-200 dark:bg-white/10\">\n        <BotIcon className=\"w-12 h-12 text-gray-600 dark:text-gray-300\" />\n      </div>\n      <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n        {agentName}\n      </h2>\n      <p className=\"text-gray-600 dark:text-gray-400 mb-8 max-w-md\">\n        Comece uma conversa, envie um documento ou escolha uma das sugest√µes abaixo.\n      </p>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-2xl\">\n        {suggestions.map((s, i) => (\n          <button\n            key={i}\n            onClick={() => handleSuggestionClick(s)}\n            className=\"p-4 bg-white dark:bg-black border border-gray-200 dark:border-white/20 rounded-lg text-left hover:bg-gray-100 dark:hover:bg-white/10 transition-colors shadow\"\n          >\n            <p className=\"text-sm font-medium text-gray-800 dark:text-gray-200\">{s}</p>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className={`flex h-screen font-sans bg-white dark:bg-black text-black dark:text-white transition-colors`}>\n      <HistorySidebar\n        isOpen={isHistoryOpen}\n        onClose={() => setIsHistoryOpen(false)}\n        onOpenDashboard={() => setIsDashboardOpen(true)}\n        onOpenChangePassword={() => setIsChangePasswordOpen(true)}\n      />\n\n      <main className=\"flex-1 flex flex-col h-screen relative\">\n        <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-white/20 bg-white/50 dark:bg-black/50 backdrop-blur-sm z-10\">\n          <div className=\"flex items-center gap-4\">\n            <button onClick={() => setIsHistoryOpen(true)} className=\"lg:hidden p-2 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-200 dark:hover:bg-white/10\">\n              <MenuIcon className=\"w-5 h-5\" />\n            </button>\n            <div className=\"hidden lg:flex items-center p-1 bg-gray-200/50 dark:bg-white/10 rounded-lg gap-1\">\n              <AgentTabButton agent=\"document\" label=\"Consultor\" />\n              <AgentTabButton agent=\"code\" label=\"C√≥digo\" />\n              <AgentTabButton agent=\"suggestion\" label=\"Sugest√£o\" />\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button onClick={() => setIsDashboardOpen(true)} className=\"hidden md:block p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\" title=\"Dashboard\">\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n              </svg>\n            </button>\n            <button onClick={() => setIsContactFormOpen(true)} className=\"hidden md:block p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\" title=\"Novo Contato\">\n              <UserIcon className=\"w-5 h-5\" />\n            </button>\n            <button onClick={() => setIsAgentInfoOpen(true)} className=\"hidden md:block p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\" title=\"Informa√ß√µes do Agente\">\n              <InfoIcon className=\"w-5 h-5\" />\n            </button>\n            <button onClick={() => setIsFeedbackOpen(true)} className=\"hidden md:block p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\" title=\"Enviar Feedback\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z\" />\n              </svg>\n            </button>\n            <button onClick={() => setIsChangelogOpen(true)} className=\"hidden md:block p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\" title=\"Changelog\">\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n            </button>\n            <TokenUsageDisplay />\n            <ThemeToggle theme={theme} toggleTheme={toggleTheme} />\n\n            <button\n              onClick={() => setIsChangePasswordOpen(true)}\n              className=\"hidden md:flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-white/10 transition-colors cursor-pointer\"\n              title={`${user?.user_metadata?.full_name || user?.email} - Alterar Senha`}\n            >\n              <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white\">\n                {user?.user_metadata?.full_name?.charAt(0).toUpperCase() || user?.email?.charAt(0).toUpperCase()}\n              </div>\n            </button>\n\n            <button onClick={signOut} className=\"hidden md:block p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10\" title=\"Sair\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3h12\" />\n              </svg>\n            </button>\n            {activeAgent === 'document' && (\n              <button onClick={() => setIsDocumentsOpen(true)} className=\"lg:hidden p-2 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-200 dark:hover:bg-white/10\">\n                <DocumentIcon className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n        </header>\n\n        <div className=\"flex-1 overflow-y-auto p-4 pb-24\">\n          {messages.length === 0 ? renderWelcomeScreen() : (\n            <div>\n              <h1 className=\"text-center text-xl font-semibold text-gray-700 dark:text-gray-300 mb-6\">\n                {activeConversation?.title}\n              </h1>\n              {messages.map((msg) => {\n                // Get files associated with this message\n                const filesForMessage = messageFiles.get(msg.id) || [];\n                return (\n                  <ChatMessage\n                    key={msg.id}\n                    message={msg}\n                    onFeedback={(feedback) => handleFeedback(msg.id, feedback)}\n                    onDelete={() => {\n                      if (window.confirm('Tem certeza que deseja excluir esta mensagem?') && activeConversation) {\n                        deleteMessage(activeAgent, activeConversation.id, msg.id);\n                        // Remove files associated with this message\n                        setMessageFiles(prev => {\n                          const newMap = new Map(prev);\n                          newMap.delete(msg.id);\n                          return newMap;\n                        });\n                      }\n                    }}\n                    attachedFiles={filesForMessage}\n                  />\n                );\n              })}\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-white dark:from-black to-transparent\">\n          <ChatInput\n            onSendMessage={handleSendMessage}\n            isLoading={isLoading}\n            onFileSelect={handleFileSelect}\n            activeAgent={activeAgent}\n            attachedFiles={attachedFiles}\n          />\n        </div>\n      </main>\n\n      {activeAgent === 'document' && <DocumentSidebar isOpen={isDocumentsOpen} onClose={() => setIsDocumentsOpen(false)} />}\n\n      <AgentInfoModal\n        isOpen={isAgentInfoOpen}\n        onClose={() => setIsAgentInfoOpen(false)}\n        agentType={activeAgent}\n      />\n\n      <ChangePasswordModal\n        isOpen={isChangePasswordOpen}\n        onClose={() => setIsChangePasswordOpen(false)}\n      />\n\n      <FeedbackModal\n        isOpen={isFeedbackOpen}\n        onClose={() => setIsFeedbackOpen(false)}\n      />\n\n      <Dashboard\n        isOpen={isDashboardOpen}\n        onClose={() => setIsDashboardOpen(false)}\n      />\n\n      <ContactFormModal\n        isOpen={isContactFormOpen}\n        onClose={() => setIsContactFormOpen(false)}\n      />\n\n      <ChangelogModal\n        isOpen={isChangelogOpen}\n        onClose={() => setIsChangelogOpen(false)}\n      />\n    </div>\n  );\n};\n\n// App Router\nconst App: React.FC = () => {\n  const { session, authLoading, initAuth, clearAuthFeedback } = useChatStore();\n  const [page, setPage] = useState<'login' | 'signup'>('login');\n  const [isForgotPasswordOpen, setIsForgotPasswordOpen] = useState(false);\n\n  useEffect(() => {\n    const unsubscribe = initAuth();\n    return () => unsubscribe();\n  }, [initAuth]);\n\n  const handleCloseForgotPassword = () => {\n    setIsForgotPasswordOpen(false);\n    clearAuthFeedback();\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"flex h-screen w-full items-center justify-center bg-white dark:bg-black\">\n        <div className=\"flex flex-col items-center\">\n          <BotIcon className=\"w-16 h-16 text-black dark:text-white animate-pulse\" />\n          <p className=\"mt-4 text-lg text-gray-700 dark:text-gray-300\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!session) {\n    return (\n      <>\n        {page === 'login' ? (\n          <LoginPage\n            onNavigateToSignup={() => { clearAuthFeedback(); setPage('signup'); }}\n            onNavigateToForgotPassword={() => { clearAuthFeedback(); setIsForgotPasswordOpen(true); }}\n          />\n        ) : (\n          <SignupPage\n            onNavigateToLogin={() => { clearAuthFeedback(); setPage('login'); }}\n          />\n        )}\n        <ForgotPasswordModal\n          isOpen={isForgotPasswordOpen}\n          onClose={handleCloseForgotPassword}\n        />\n      </>\n    );\n  }\n\n  return <ChatApplication />;\n};\n\n\nexport default App;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11261, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport App from '../App';\n\nexport default function Page() {\n  return <App />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,6LAAC,kHAAG;;;;;AACb;KAFwB"}}]
}