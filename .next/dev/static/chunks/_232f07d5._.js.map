{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/services/geminiService.ts"],"sourcesContent":["import { GoogleGenAI } from \"@google/genai\";\nimport { WebSource } from \"../types\";\n\n// Initialize GoogleGenAI with API key from Next.js environment variables\nconst apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;\nif (!apiKey) {\n  throw new Error(\n    \"NEXT_PUBLIC_GEMINI_API_KEY não está configurada no arquivo .env.local\"\n  );\n}\nconst ai = new GoogleGenAI({ apiKey });\n\n// FIX: Define model names according to guidelines.\nexport const GEMINI_PRO = \"gemini-2.5-pro\";\nexport const GEMINI_FLASH = \"gemini-2.5-flash\";\n\nexport const DOCUMENT_AGENT_PROMPT = `Você é o \"Gênesis\", um assistente de IA especialista em tributação brasileira. Sua principal fonte de conhecimento são os documentos fornecidos no contexto. Responda às perguntas de forma clara, informativa e profissional, priorizando sempre as informações contidas nesses documentos. Quando o contexto não for suficiente, use seu conhecimento geral e a busca na web para complementar a resposta. Sempre cite as fontes da web que utilizar.`;\n\nexport const CODE_AGENT_PROMPT = `Você é um programador especialista sênior, fluente em Python e Delphi, com profundo conhecimento em regras tributárias e fiscais. Sua tarefa é gerar funções e trechos de código claros, eficientes e bem documentados para resolver problemas tributários. Sempre que possível, adicione comentários explicando a lógica e o cálculo fiscal implementado. Use blocos de código markdown para formatar sua resposta.`;\n\nexport const SUGGESTION_AGENT_PROMPT = `Você é um especialista em otimização de buscas e prompts. Sua tarefa é analisar a pergunta do usuário e, em vez de respondê-la diretamente, sugerir 3 maneiras alternativas e mais eficazes de formular a mesma pergunta para obter melhores resultados de um assistente de IA fiscal. Apresente as sugestões em uma lista numerada, cada uma com uma breve explicação do porquê a nova formulação é melhor. Use markdown para formatar a lista.`;\n\n/**\n * Generates embeddings for a batch of texts.\n * NOTE: The `@google/genai` JS SDK guidelines provided do not specify a method for\n * generating embeddings. This function uses a mocked implementation to allow the\n * Retrieval-Augmented Generation (RAG) functionality to operate. In a real-world\n * scenario, this would need to be replaced with a call to an actual embedding model endpoint.\n */\nexport async function generateEmbeddings(texts: string[]): Promise<number[][]> {\n  console.warn(\n    \"Using mock embeddings. Replace with a real embedding model API call.\"\n  );\n  // Returning random vectors of a common dimension size (e.g., 768) for demonstration.\n  return texts.map(() =>\n    Array(768)\n      .fill(0)\n      .map(() => Math.random() * 2 - 1)\n  );\n}\n\n/**\n * Generates a short, descriptive title for a conversation based on the user's first query.\n */\nexport async function generateTitle(query: string): Promise<string> {\n  try {\n    const prompt = `Gere um título curto e descritivo (3-5 palavras) para uma conversa que começa com a seguinte pergunta do usuário. Responda apenas com o título. Pergunta: \"${query}\"`;\n    // Use ai.models.generateContent as per guidelines.\n    const response = await ai.models.generateContent({\n      model: GEMINI_FLASH, // Use the faster model for this simple task\n      contents: prompt,\n    });\n    // Extract text directly from response.text as per guidelines.\n    // Clean up the response to remove potential quotes or newlines.\n    return response.text.trim().replace(/[\"']/g, \"\");\n  } catch (error) {\n    console.error(\"Error generating title:\", error);\n    // Return a generic title or a snippet of the query as a fallback\n    return query.substring(0, 30) + \"...\";\n  }\n}\n\n/**\n * Generates a response from the Gemini model, with optional web search.\n * Returns the response text and any web sources found.\n */\nexport async function generateResponse(\n  modelName: string,\n  prompt: string,\n  useWebSearch: boolean = false\n): Promise<{ text: string; sources: WebSource[] }> {\n  // Construct config conditionally\n  const config: { tools?: any[] } = {};\n  if (useWebSearch) {\n    config.tools = [{ googleSearch: {} }];\n  }\n\n  // Use ai.models.generateContent as per guidelines.\n  const response = await ai.models.generateContent({\n    model: modelName,\n    contents: prompt,\n    config,\n  });\n\n  // Extract text directly from response.text as per guidelines.\n  const text = response.text;\n\n  // Extract web sources from grounding metadata if web search was used\n  const sources: WebSource[] = [];\n  if (useWebSearch) {\n    const groundingMetadata = response.candidates?.[0]?.groundingMetadata;\n    if (groundingMetadata?.groundingChunks) {\n      for (const chunk of groundingMetadata.groundingChunks) {\n        if (chunk.web) {\n          sources.push({\n            uri: chunk.web.uri,\n            title: chunk.web.title || chunk.web.uri, // Use URI as fallback for title\n          });\n        }\n      }\n    }\n  }\n\n  // Deduplicate sources based on URI\n  const uniqueSources = Array.from(\n    new Map(sources.map((item) => [item.uri, item])).values()\n  );\n\n  return { text, sources: uniqueSources };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAIe;AAJf;;AAGA,yEAAyE;AACzE,MAAM;AACN;;AAKA,MAAM,KAAK,IAAI,4KAAW,CAAC;IAAE;AAAO;AAG7B,MAAM,aAAa;AACnB,MAAM,eAAe;AAErB,MAAM,wBAAwB,CAAC,ubAAub,CAAC;AAEvd,MAAM,oBAAoB,CAAC,oZAAoZ,CAAC;AAEhb,MAAM,0BAA0B,CAAC,gbAAgb,CAAC;AASld,eAAe,mBAAmB,KAAe;IACtD,QAAQ,IAAI,CACV;IAEF,qFAAqF;IACrF,OAAO,MAAM,GAAG,CAAC,IACf,MAAM,KACH,IAAI,CAAC,GACL,GAAG,CAAC,IAAM,KAAK,MAAM,KAAK,IAAI;AAErC;AAKO,eAAe,cAAc,KAAa;IAC/C,IAAI;QACF,MAAM,SAAS,CAAC,2JAA2J,EAAE,MAAM,CAAC,CAAC;QACrL,mDAAmD;QACnD,MAAM,WAAW,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC;YAC/C,OAAO;YACP,UAAU;QACZ;QACA,8DAA8D;QAC9D,gEAAgE;QAChE,OAAO,SAAS,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,SAAS;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,iEAAiE;QACjE,OAAO,MAAM,SAAS,CAAC,GAAG,MAAM;IAClC;AACF;AAMO,eAAe,iBACpB,SAAiB,EACjB,MAAc,EACd,eAAwB,KAAK;IAE7B,iCAAiC;IACjC,MAAM,SAA4B,CAAC;IACnC,IAAI,cAAc;QAChB,OAAO,KAAK,GAAG;YAAC;gBAAE,cAAc,CAAC;YAAE;SAAE;IACvC;IAEA,mDAAmD;IACnD,MAAM,WAAW,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC;QAC/C,OAAO;QACP,UAAU;QACV;IACF;IAEA,8DAA8D;IAC9D,MAAM,OAAO,SAAS,IAAI;IAE1B,qEAAqE;IACrE,MAAM,UAAuB,EAAE;IAC/B,IAAI,cAAc;QAChB,MAAM,oBAAoB,SAAS,UAAU,EAAE,CAAC,EAAE,EAAE;QACpD,IAAI,mBAAmB,iBAAiB;YACtC,KAAK,MAAM,SAAS,kBAAkB,eAAe,CAAE;gBACrD,IAAI,MAAM,GAAG,EAAE;oBACb,QAAQ,IAAI,CAAC;wBACX,KAAK,MAAM,GAAG,CAAC,GAAG;wBAClB,OAAO,MAAM,GAAG,CAAC,KAAK,IAAI,MAAM,GAAG,CAAC,GAAG;oBACzC;gBACF;YACF;QACF;IACF;IAEA,mCAAmC;IACnC,MAAM,gBAAgB,MAAM,IAAI,CAC9B,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,OAAS;YAAC,KAAK,GAAG;YAAE;SAAK,GAAG,MAAM;IAGzD,OAAO;QAAE;QAAM,SAAS;IAAc;AACxC"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/api.ts"],"sourcesContent":["// Adiciona a declaração para a biblioteca pdf.js carregada via CDN\ndeclare const pdfjsLib: any;\n\nimport { generateEmbeddings } from './services/geminiService';\nimport { Document, DocumentChunk } from './types';\n\nconst CHUNK_SIZE = 1000; // characters\nconst CHUNK_OVERLAP = 200; // characters\n\n/**\n * Lê um arquivo de texto e retorna seu conteúdo como uma string.\n */\nasync function readFileContent(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      resolve(event.target?.result as string);\n    };\n    reader.onerror = (error) => {\n      reject(error);\n    };\n    reader.readAsText(file);\n  });\n}\n\n/**\n * Lê um arquivo PDF usando pdf.js e retorna seu conteúdo de texto como uma string.\n */\nasync function readPdfContent(file: File): Promise<string> {\n  // Verificação de segurança para garantir que a biblioteca PDF foi carregada.\n  if (typeof pdfjsLib === 'undefined' || typeof pdfjsLib.getDocument !== 'function') {\n    throw new Error('A biblioteca PDF (pdf.js) não foi carregada corretamente. Verifique a conexão com a internet ou recarregue a página.');\n  }\n\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = async (event) => {\n      if (!event.target?.result) {\n        return reject(new Error('Falha ao ler o arquivo PDF.'));\n      }\n      try {\n        const typedArray = new Uint8Array(event.target.result as ArrayBuffer);\n        // FIX: Passa os dados do PDF como um objeto para alinhar com a API do pdf.js e aumentar a robustez.\n        const pdf = await pdfjsLib.getDocument({ data: typedArray }).promise;\n        let fullText = '';\n        for (let i = 1; i <= pdf.numPages; i++) {\n          const page = await pdf.getPage(i);\n          const textContent = await page.getTextContent();\n          const pageText = textContent.items.map((item: { str: string }) => item.str).join(' ');\n          fullText += pageText + '\\n\\n'; // Adiciona espaço entre as páginas para melhor separação\n        }\n        resolve(fullText.trim());\n      } catch (error) {\n        console.error(\"Erro ao analisar o PDF:\", error);\n        reject(new Error('O arquivo PDF está corrompido ou não pôde ser lido.'));\n      }\n    };\n    reader.onerror = (error) => {\n      reject(error);\n    };\n    // pdf.js precisa de um ArrayBuffer\n    reader.readAsArrayBuffer(file);\n  });\n}\n\n/**\n * Divide um texto longo em pedaços menores e sobrepostos.\n */\nfunction splitTextIntoChunks(text: string): string[] {\n  const chunks: string[] = [];\n  if (!text) return chunks;\n\n  let i = 0;\n  while (i < text.length) {\n    const chunk = text.substring(i, i + CHUNK_SIZE);\n    chunks.push(chunk);\n    i += CHUNK_SIZE - CHUNK_OVERLAP;\n  }\n  return chunks;\n}\n\n/**\n * Processa uma string de texto bruto: fragmenta e gera embeddings.\n */\nexport async function processText(text: string, fileName: string, isDeletable: boolean): Promise<Document> {\n  const textChunks = splitTextIntoChunks(text);\n\n  if (textChunks.length === 0) {\n    return {\n      id: `${fileName}-${Date.now()}`,\n      name: fileName,\n      chunks: [],\n      isDeletable,\n      content: text,\n    };\n  }\n\n  const embeddings = await generateEmbeddings(textChunks);\n\n  const documentChunks: DocumentChunk[] = textChunks.map((chunkText, i) => ({\n    text: chunkText,\n    embedding: embeddings[i],\n  }));\n\n  return {\n    id: `${fileName}-${Date.now()}`,\n    name: fileName,\n    chunks: documentChunks,\n    isDeletable,\n    content: text,\n  };\n}\n\n\n/**\n * Processa um arquivo enviado: lê, fragmenta e gera embeddings.\n * Diferencia entre arquivos PDF e de texto.\n */\nexport async function processDocument(file: File): Promise<Document> {\n  let text = '';\n  const fileType = file.type;\n  const fileName = file.name.toLowerCase();\n\n  if (fileType === 'application/pdf' || fileName.endsWith('.pdf')) {\n    text = await readPdfContent(file);\n  } else if (\n    fileType === 'text/plain' ||\n    fileType === 'text/markdown' ||\n    fileName.endsWith('.txt') ||\n    fileName.endsWith('.md')\n  ) {\n    text = await readFileContent(file);\n  } else {\n    throw new Error('Tipo de arquivo não suportado. Por favor, envie .txt, .md ou .pdf.');\n  }\n\n  // Documentos enviados pelo usuário são sempre deletáveis\n  return processText(text, file.name, true);\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/utils.ts"],"sourcesContent":["export const cosineSimilarity = (vecA: number[], vecB: number[]): number => {\n  if (vecA.length !== vecB.length) {\n    return 0;\n  }\n\n  let dotProduct = 0;\n  let normA = 0;\n  let normB = 0;\n\n  for (let i = 0; i < vecA.length; i++) {\n    dotProduct += vecA[i] * vecB[i];\n    normA += vecA[i] * vecA[i];\n    normB += vecB[i] * vecB[i];\n  }\n  \n  const denominator = Math.sqrt(normA) * Math.sqrt(normB);\n  \n  if(denominator === 0){\n      return 0;\n  }\n\n  return dotProduct / denominator;\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,mBAAmB,CAAC,MAAgB;IAC/C,IAAI,KAAK,MAAM,KAAK,KAAK,MAAM,EAAE;QAC/B,OAAO;IACT;IAEA,IAAI,aAAa;IACjB,IAAI,QAAQ;IACZ,IAAI,QAAQ;IAEZ,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAAK;QACpC,cAAc,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;QAC/B,SAAS,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;QAC1B,SAAS,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;IAC5B;IAEA,MAAM,cAAc,KAAK,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC;IAEjD,IAAG,gBAAgB,GAAE;QACjB,OAAO;IACX;IAEA,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/initialKnowledge.ts"],"sourcesContent":["export const initialKnowledgeText = `\nUm \"agente que tem conhecimento sobre tributação fiscal do Brasil\" é um profissional ou uma empresa especializada em entender, interpretar e aplicar as complexas regras do sistema tributário brasileiro.\n\nNo Brasil, a tributação é notoriamente uma das mais complexas do mundo, envolvendo três esferas de governo (Federal, Estadual e Municipal), cada uma com seus próprios impostos, regras e prazos. Um agente com este conhecimento é, portanto, uma peça-chave para qualquer empresa ou até mesmo para pessoas físicas com patrimônio mais significativo.\n\nVamos detalhar o que este agente **é**, o que ele **faz** e o que ele **precisa saber**.\n\n---\n\n### 1. Quem é este Agente? (Os Perfis)\n\nEste agente pode ser um profissional com diferentes formações, mas com uma especialização em tributos. Os mais comuns são:\n\n*   **Contador / Empresa de Contabilidade:** É o profissional mais próximo do dia a dia das empresas. Responsável pela escrituração contábil, apuração dos impostos e entrega das obrigações acessórias.\n*   **Advogado Tributarista:** Focado na interpretação da lei, na defesa do cliente em processos administrativos e judiciais (contencioso tributário) e na emissão de pareceres legais para operações complexas.\n*   **Consultor Tributário:** Pode ser um contador, advogado ou economista com especialização. Geralmente atua de forma estratégica, focado em **planejamento tributário** para otimizar e reduzir a carga de impostos de forma legal.\n*   **Auditor Fiscal (do lado do Fisco):** É o agente do governo que fiscaliza o cumprimento das obrigações tributárias. Conhecer seu trabalho é fundamental para se preparar para uma fiscalização.\n*   **Gestor Financeiro / Empresário:** Embora não seja um especialista, um bom gestor precisa ter um conhecimento sólido dos basics de tributação para tomar decisões de negócio conscientes.\n\n---\n\n### 2. O que ele Faz? (As Principais Atividades)\n\nAs funções deste agente vão muito além de apenas \"calcular e pagar impostos\". Elas se dividem em áreas estratégicas e operacionais:\n\n#### a) Planejamento Tributário\n*   **O que é:** A atividade mais estratégica e valiosa. Consiste em estudar a legislação para encontrar a forma legal mais eficiente de uma empresa operar, pagando menos impostos sem sonegar.\n*   **Exemplos:** Escolher o melhor regime tributário (Simples Nacional, Lucro Presumido ou Lucro Real), estruturar operações de fusão e aquisição, decidir sobre a localização de uma nova fábrica (levando em conta os benefícios fiscais estaduais).\n\n#### b) Compliance Tributário (Conformidade)\n*   **O que é:** É a área operacional que garante que a empresa esteja em dia com todas as suas obrigações.\n*   **Atividades:**\n    *   Apurar e calcular os impostos (PIS, COFINS, IRPJ, ICMS, ISS, etc.).\n    *   Preencher e entregar as declarações e obrigações acessórias (SPEDs, DCTF, GFIP, GIA, etc.).\n    *   Emitir guias de pagamento (DARF, GARE, etc.) e garantir o pagamento dentro do prazo.\n    *   Manter a documentação fiscal em ordem.\n\n#### c) Contencioso Tributário\n*   **O que é:** A área de defesa da empresa. Quando há uma autuação ou cobrança indevida por parte do Fisco, este agente atua para reverter a situação.\n*   **Atividades:**\n    *   Apresentar defesas administrativas.\n    *   Negotiar parcelamentos de dívidas.\n    *   Entrar com ações judiciais para discutir a cobrança de tributos.\n\n#### d) Consultoria e Assessoria\n*   **O que é:** Dar suporte ao dia a dia e a decisões específicas.\n*   **Exemplos:** \"Posso deduzir esta despesa?\", \"Qual o impacto tributário de vender este produto para outro estado?\", \"Como tratar este imposto na contabilidade?\".\n\n---\n\n### 3. O que ele Precisa Saber? (O Conhecimento Essencial)\n\nO conhecimento deste agente é vasto e precisa ser constantemente atualizado. Os pilares são:\n\n*   **Sistema Tributário Nacional:** Entender a divisão de competências entre União, Estados e Municípios.\n*   **Regimes Tributários:** Dominar as regras do **Simples Nacional**, **Lucro Presumido** e **Lucro Real**, sabendo qual a vantagem de cada um para um tipo específico de empresa.\n*   **Principais Tributos:**\n    *   **Federais:** IRPJ (Imposto de Renda da Pessoa Jurídrica), CSLL (Contribuição Social sobre o Lucro Líquido), PIS, COFINS, IPI (Imposto sobre Produtos Industrializados).\n    *   **Estaduais:** ICMS (Imposto sobre Circulação de Mercadorias e Serviços).\n    *   **Municipais:** ISS (Imposto Sobre Serviços).\n*   **Obrigações Acessórias:** Conhecer a fundo o SPED (Sistema Público de Escrituração Digital) e suas vertentes (EFD-Contribuições, EFD-ICMS/IPI, ECF, etc.).\n*   **Legislação e Jurisprudência:** A lei tributária muda constantemente. Além das leis, é preciso acompanhar as decisões dos tribunais (jurisprudência), que definem como a lei é interpretada na prática.\n*   **Áreas Correlatas:** Ter noções de Contabilidade, Direito Empresarial e Finanças, pois a tributação impacta todas essas áreas.\n\n---\n\n### Conclusão: Por que este Agente é Fundamental?\n\nNo Brasil, ter um agente com conhecimento profundo em tributação não é um luxo, mas uma **necessidade estratégica**. Ele é fundamental para:\n\n1.  **Evitar Multas e Juros:** O erro no cumprimento de uma obrigação pode gerar penalidades altíssimas.\n2.  **Otimizar Custos:** Um bom planejamento pode reduzir a carga tributária, aumentando a competitividade e o lucro da empresa.\n3.  **Garantir a Sustentabilidade:** A gestão tributária inadequada é uma das principais causas de falência de empresas no Brasil.\n4.  **Proporcionar Segurança Jurídica:** Dar tranquilidade ao empresário para que ele possa focar no seu negócio, sabendo que a parte fiscal está sob controle.\n\nEm resumo, este agente é o **navegador** que ajuda as empresas e indivíduos a atravessar o \"mar revolto\" da tributação brasileira de forma segura, eficiente e estratégica. É um investimento, não um custo.\n`;"],"names":[],"mappings":";;;;AAAO,MAAM,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4ErC,CAAC"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/taxReformKnowledge.ts"],"sourcesContent":["export const taxReformKnowledgeText = `\nA nova reforma tributária brasileira, aprovada entre 2023 e 2025, configura-se como a maior mudança fiscal das últimas décadas e tem impacto significativo em praticamente todos os setores econômicos. Ela substitui os antigos tributos sobre consumo por novos impostos, simplificando a estrutura e promovendo maior transparência, porém trazendo desafios específicos para serviços, agronegócio, indústria e varejo[1][2][3].\n\n### Principais Mudanças\n\n- Os impostos federais PIS, Cofins e IPI, o estadual ICMS e o municipal ISS serão substituídos por dois novos tributos:\n  - CBS (Contribuição sobre Bens e Serviços), federal.\n  - IBS (Imposto sobre Bens e Serviços), com gestão compartilhada entre estados e municípios.\n- Implementação do Imposto Seletivo (IS), incidente sobre bens e serviços nocivos à saúde ou ao meio ambiente (bebidas alcoólicas, cigarros, combustíveis fósseis).\n- Fim da cumulatividade e ampliação do crédito financeiro para os tributos.\n- Nova sistemática de cobrança no destino para operações entre estados, eliminando benefícios regionais e simplificando obrigações acessórias[1][3][4][5].\n\n### Impacto nos Setores Econômicos\n\n- **Serviços**: Tende a ser o mais impactado negativamente, pois atualmente usufrui de regimes simplificados e alíquotas menores. A nova alíquota geral, próxima de 25%, pode elevar significativamente o custo para empresas com pouca possibilidade de apropriação de créditos tributários (como advocacia, educação, saúde, tecnologia)[2][6][7].\n- **Agronegócio**: Apesar de isenções para itens da cesta básica, outros insumos essenciais passarão a ser tributados, demandando readequação fiscal e controle de créditos.\n- **Varejo**: Terá que investir em sistemas e compliance para lidar com os novos tributos e garantir o correto aproveitamento dos créditos fiscais. A transição oferece oportunidade competitiva para quem se adaptar rápido[2][4].\n- **Transporte**: Mudanças na incidência territorial (de origem para destino) e eliminação de benefícios podem elevar custos do setor, exigindo reajuste de preços e modelos operacionais[2][8].\n\n### Cronograma de Implantação\n\n- **2023-2025**: Aprovação constitucional e regulamentação infraconstitucional.\n- **2026**: Início da fase experimental, CBS e IBS com alíquotas simbólicas para testes nos sistemas das empresas.\n- **2027**: Início do Imposto Seletivo (IS)[9][5][4].\n- **Até 2033**: Transição gradual até extinção completa dos antigos tributos e consolidação do novo modelo, exigindo adaptação simultânea aos sistemas antigos e novos nos próximos anos[9][4].\n\n### Novidades para Empresas\n\n- Obrigatoriedade de atualizar sistemas fiscais, adaptar classificações de produto e processos internos.\n- Maior fiscalização e risco de autuações para quem não respeitar as novas regras.\n- Introdução do cashback, com devolução tributária para famílias de baixa renda, especialmente via IBS e CBS[10][5].\n\n### Situação Atual e Próximos Passos\n\nEm setembro de 2025, o Senado aprovou a segunda etapa da regulamentação, detalhando a operação e a distribuição dos impostos e criando o Comitê Gestor do IBS. O texto agora segue para aprovação final na Câmara e posterior sanção presidencial. As empresas precisam acompanhar a regulamentação complementar e já preparar migração de sistemas e processos[9][11][12].\n\n***\nA reforma tributária brasileira, portanto, mudará profundamente a lógica da tributação sobre consumo no país. A simplificação e ampliação de controles e créditos fiscais exigirão atualização tecnológica e estratégica por parte de todos os agentes econômicos — com impactos distintos conforme o perfil de cada atividade[1][3][2][9][5].\n\nCitações:\n[1] Reforma tributária 2025: o que pequenos negócios ... https://sebrae.com.br/sites/PortalSebrae/ufs/pe/artigos/reforma-tributaria-2025-o-que-pequenos-negocios-precisam-saber,6d772d5ec7b37910VgnVCM1000001b00320aRCRD\n[2] Reforma Tributária: o impacto nos setores https://drfiscal.com.br/planejamento-e-gestao/reforma-tributaria-o-impacto-nos-setores/\n[3] Reforma Tributária: quais as últimas atualizações em 2025 https://www.contabeis.com.br/noticias/71673/reforma-tributaria-quais-as-ultimas-atualizacoes-em-2025/\n[4] Reforma Tributária 2025 - KPMG Brasil https://kpmg.com/br/pt/home/insights/2025/05/reforma-tributaria-2025-5-passos-essenciais-empresa-preparar.html\n[5] Reforma tributária: veja o que muda com aprovação no ... https://fin.org.br/reforma-tributaria-veja-o-que-muda-com-aprovacao-no-senado/\n[6] Quais setores serão mais afetados com a reforma tributária? https://portaldacontabilidade.clmcontroller.com.br/quais-setores-serao-mais-afetados-com-a-reforma-tributaria/\n[7] Reforma tributária pode elevar custos e alterar ... https://fenacon.org.br/reforma-tributaria/reforma-tributaria-pode-elevar-custos-e-alterar-competitividade-do-setor-de-servicos/\n[8] Reforma Tributária em prática: impactos e próximos passos https://lefosse.com/noticias/reforma-tributaria-em-pratica-impactos-e-proximos-passos/\n[9] Cronograma reforma tributária: quando entra em vigor? https://blog.tecnospeed.com.br/cronograma-reforma-tributaria-quando-entra-em-vigor/\n[10] Modificada, regulamentação da reforma tributária volta à ... https://www12.senado.leg.br/noticias/materias/2025/09/30/modificada-regulamentacao-da-reforma-tributaria-volta-a-camara\n[11] Reforma Tributária Regulamentação — Ministério da Fazenda https://www.gov.br/fazenda/pt-br/acesso-a-informacao/acoes-e-programas/reforma-tributaria\n[12] Reforma Tributária: últimas atualizações de 2025 https://qive.com.br/blog/atualizacoes-reforma-tributaria/\n[13] Reforma Tributária - Portal Gov.br https://www.gov.br/fazenda/pt-br/acesso-a-informacao/acoes-e-programas/reforma-tributaria/apresentacoes/apresentacao-reforma-tributaria-para-o-brasil-crescer-ela-precisa-acontecer-02-8-2023\n[14] Reforma Tributária: o que é e quais as mudanças para 2025 https://nsdocs.com.br/blog/reforma-tributaria\n[15] Reforma Tributária - TOTVS - Espaço Legislação https://espacolegislacao.totvs.com/reforma-tributaria/\n[16] Reforma Tributária 2025: Desafios e Impactos Econômicos ... https://www.ibmec.br/blog/conteudo-gratuito/reforma-tributaria-nos-moldes-dos-desafios-economicos-e-sociais-globais\n[17] Reforma Tributária 2025: Impactos e Mudanças nas ... https://www.mantoanadvogados.com.br/blog/reforma-tributaria-2025-quais-mudancas-afetam-sua-empresa-/374\n[18] Veja principais mudanças na reforma tributária aprovada ... https://www.cnnbrasil.com.br/economia/financas/veja-principais-mudancas-na-reforma-tributaria-aprovada-pelo-senado/\n[19] Reforma Tributária – Perguntas e Respostas - Portal Gov.br https://www.gov.br/fazenda/pt-br/acesso-a-informacao/acoes-e-programas/reforma-tributaria/arquivos/perguntas-e-respostas-reforma-tributaria_.pdf\n[20] Reforma Tributária 2025: principais pontos e o que falta ... https://www.taxgroup.com.br/intelligence/reforma-tributaria-2025-principais-pontos-e-o-que-falta-para-entrar-em-vigor/\n`;\n"],"names":[],"mappings":";;;;AAAO,MAAM,yBAAyB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DvC,CAAC"}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/services/supabaseClient.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\n// Supabase configuration for Next.js environment variables\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error(\n    \"NEXT_PUBLIC_SUPABASE_URL e NEXT_PUBLIC_SUPABASE_ANON_KEY devem estar configuradas no .env.local\"\n  );\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAGoB;AAHpB;;AAEA,2DAA2D;AAC3D,MAAM;AACN,MAAM;AAEN;;AAMO,MAAM,WAAW,IAAA,0MAAY,EAAC,aAAa"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/store.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { processDocument, processText } from \"./api\";\nimport {\n  generateEmbeddings,\n  generateResponse,\n  generateTitle,\n  GEMINI_PRO,\n  GEMINI_FLASH,\n  CODE_AGENT_PROMPT,\n  DOCUMENT_AGENT_PROMPT,\n  SUGGESTION_AGENT_PROMPT,\n} from \"./services/geminiService\";\nimport { Document, Message, AgentType, Conversation } from \"./types\";\nimport { cosineSimilarity } from \"./utils\";\nimport { initialKnowledgeText } from \"./initialKnowledge\";\nimport { taxReformKnowledgeText } from \"./taxReformKnowledge\";\nimport { supabase } from \"./services/supabaseClient\";\nimport { Session, User, AuthError } from \"@supabase/supabase-js\";\n\nconst PRO_TOKEN_LIMIT = 32768; // Token limit for Gemini 2.5 Pro\nconst MAX_CONTEXT_CHUNKS = 5;\nconst PRO_TOKEN_THRESHOLD = 0.7; // Switch to flash at 70% usage\nconst CONVERSATION_CONTEXT_MESSAGES = 4; // Number of recent messages to use as context\n\nconst agentAliases: { [key: string]: AgentType } = {\n  web: \"document\",\n  codigo: \"code\",\n  sugestao: \"suggestion\",\n};\n\n// Escapa as aspas simples para uso dentro de uma string SQL.\nconst initialKnowledgeTextEscaped = initialKnowledgeText.replace(/'/g, \"''\");\nconst taxReformKnowledgeTextEscaped = taxReformKnowledgeText.replace(\n  /'/g,\n  \"''\"\n);\n\n/**\n * Script SQL para configurar as tabelas necessárias no Supabase com suporte multi-usuário (RLS).\n * É seguro executar este script várias vezes.\n */\nconst SETUP_SQL_SCRIPT = `-- Habilita a extensão uuid-ossp se ainda não estiver habilitada\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\" WITH SCHEMA extensions;\n\n-- Tabela de perfis de usuário\nCREATE TABLE IF NOT EXISTS public.user_profiles (\n  user_id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,\n  full_name TEXT,\n  user_type TEXT,\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n);\nALTER TABLE public.user_profiles ENABLE ROW LEVEL SECURITY;\nDROP POLICY IF EXISTS \"Os usuários podem gerenciar seu próprio perfil.\" ON public.user_profiles;\nCREATE POLICY \"Os usuários podem gerenciar seu próprio perfil.\"\nON public.user_profiles FOR ALL\nUSING (auth.uid() = user_id)\nWITH CHECK (auth.uid() = user_id);\n\n\n-- Tabela de documentos\nCREATE TABLE IF NOT EXISTS public.documents (\n  id UUID PRIMARY KEY DEFAULT extensions.uuid_generate_v4(),\n  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE, -- user_id é nulo para documentos públicos\n  name TEXT NOT NULL,\n  content TEXT NOT NULL,\n  is_deletable BOOLEAN DEFAULT TRUE,\n  created_at TIMESTAMPTZ DEFAULT NOW()\n);\n-- Adiciona um índice único para nomes de documentos públicos para o ON CONFLICT funcionar de forma confiável.\nCREATE UNIQUE INDEX IF NOT EXISTS documents_public_name_key ON public.documents (name) WHERE (user_id IS NULL);\nALTER TABLE public.documents ENABLE ROW LEVEL SECURITY;\n-- Política SELECT: permite ver documentos próprios ou públicos (user_id IS NULL)\nDROP POLICY IF EXISTS \"Usuários podem visualizar documentos públicos e os seus próprios.\" ON public.documents;\nCREATE POLICY \"Usuários podem visualizar documentos públicos e os seus próprios.\"\nON public.documents FOR SELECT\nUSING (user_id IS NULL OR user_id = auth.uid());\n-- Política INSERT: só pode criar documentos para si mesmo\nDROP POLICY IF EXISTS \"Usuários podem criar seus próprios documentos.\" ON public.documents;\nCREATE POLICY \"Usuários podem criar seus próprios documentos.\"\nON public.documents FOR INSERT\nWITH CHECK (user_id = auth.uid());\n-- Política UPDATE: só pode modificar seus próprios documentos\nDROP POLICY IF EXISTS \"Usuários podem modificar seus próprios documentos.\" ON public.documents;\nCREATE POLICY \"Usuários podem modificar seus próprios documentos.\"\nON public.documents FOR UPDATE\nUSING (user_id = auth.uid() AND is_deletable = TRUE)\nWITH CHECK (user_id = auth.uid());\n-- Política DELETE: só pode excluir seus próprios documentos\nDROP POLICY IF EXISTS \"Usuários podem excluir seus próprios documentos.\" ON public.documents;\nCREATE POLICY \"Usuários podem excluir seus próprios documentos.\"\nON public.documents FOR DELETE\nUSING (user_id = auth.uid() AND is_deletable = TRUE);\n\n\n-- Tabela de conversas\nCREATE TABLE IF NOT EXISTS public.conversations (\n  id UUID PRIMARY KEY DEFAULT extensions.uuid_generate_v4(),\n  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,\n  title TEXT NOT NULL,\n  agent_type TEXT NOT NULL CHECK (agent_type IN ('document', 'code', 'suggestion')),\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n);\nALTER TABLE public.conversations ADD COLUMN IF NOT EXISTS updated_at TIMESTAMPTZ DEFAULT NOW();\nALTER TABLE public.conversations DISABLE ROW LEVEL SECURITY;\nALTER TABLE public.conversations ENABLE ROW LEVEL SECURITY;\n\n-- Políticas de segurança para conversas\nDROP POLICY IF EXISTS \"Usuários podem visualizar suas próprias conversas ou órfãs.\" ON public.conversations;\nCREATE POLICY \"Usuários podem visualizar suas próprias conversas ou órfãs.\"\nON public.conversations FOR SELECT\nUSING (user_id = auth.uid() OR user_id IS NULL);\n\nDROP POLICY IF EXISTS \"Usuários podem criar conversas para si mesmos.\" ON public.conversations;\nCREATE POLICY \"Usuários podem criar conversas para si mesmos.\"\nON public.conversations FOR INSERT\nWITH CHECK (user_id = auth.uid());\n\nDROP POLICY IF EXISTS \"Usuários podem atualizar suas próprias conversas ou reivindicar órfãs.\" ON public.conversations;\nCREATE POLICY \"Usuários podem atualizar suas próprias conversas ou reivindicar órfãs.\"\nON public.conversations FOR UPDATE\nUSING (user_id = auth.uid() OR user_id IS NULL)\nWITH CHECK (user_id = auth.uid());\n\nDROP POLICY IF EXISTS \"Usuários podem excluir suas próprias conversas ou órfãs.\" ON public.conversations;\nCREATE POLICY \"Usuários podem excluir suas próprias conversas ou órfãs.\"\nON public.conversations FOR DELETE\nUSING (user_id = auth.uid() OR user_id IS NULL);\n\n\n-- Tabela de mensagens\nCREATE TABLE IF NOT EXISTS public.messages (\n  id UUID PRIMARY KEY DEFAULT extensions.uuid_generate_v4(),\n  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n  conversation_id UUID NOT NULL REFERENCES public.conversations(id) ON DELETE CASCADE,\n  sender TEXT NOT NULL CHECK (sender IN ('user', 'bot')),\n  text TEXT NOT NULL,\n  sources JSONB,\n  feedback TEXT CHECK (feedback IN ('good', 'bad')),\n  created_at TIMESTAMPTZ DEFAULT NOW()\n);\nALTER TABLE public.messages ENABLE ROW LEVEL SECURITY;\n\n/*\n * **REVISÃO PROFUNDA E CORREÇÃO DEFINITIVA DA POLÍTICA DE MENSAGENS**\n * A causa raiz do problema de exclusão é que a política de mensagens verificava a posse\n * da *mensagem* individual. Isso falhava durante uma exclusão em cascata se alguma\n * mensagem legada tivesse um 'user_id' inconsistente.\n * A nova política resolve isso vinculando a permissão para modificar uma mensagem\n * à posse da *conversa* pai. Se um usuário pode excluir a conversa, ele\n * implicitamente pode excluir todas as mensagens contidas nela. Isso garante\n * que a exclusão em cascata funcione corretamente em todos os casos.\n */\nDROP POLICY IF EXISTS \"Usuários podem gerenciar suas mensagens próprias ou órfãs.\" ON public.messages;\nDROP POLICY IF EXISTS \"Usuários gerenciam mensagens baseadas na posse da conversa.\" ON public.messages;\nCREATE POLICY \"Usuários gerenciam mensagens baseadas na posse da conversa.\"\nON public.messages FOR ALL\nUSING (\n  EXISTS (\n    SELECT 1 FROM public.conversations\n    WHERE id = messages.conversation_id AND (user_id = auth.uid() OR user_id IS NULL)\n  )\n)\nWITH CHECK (\n  -- A verificação (WITH CHECK) para novas inserções/atualizações garante que o usuário\n  -- que está agindo seja o dono da mensagem E da conversa, mantendo a integridade.\n  user_id = auth.uid() AND\n  EXISTS (\n    SELECT 1 FROM public.conversations\n    WHERE id = messages.conversation_id AND user_id = auth.uid()\n  )\n);\n\n\n-- Índices para otimizar buscas\nCREATE INDEX IF NOT EXISTS idx_messages_conversation_id ON public.messages(conversation_id);\nCREATE INDEX IF NOT EXISTS idx_messages_user_id ON public.messages(user_id);\nCREATE INDEX IF NOT EXISTS idx_conversations_updated_at ON public.conversations(updated_at DESC);\n\n\n-- SEED DE DADOS: Insere os documentos da base de conhecimento inicial.\n-- É seguro rodar isso várias vezes por causa do \"ON CONFLICT\".\n-- A execução deste script no painel do Supabase ignora a RLS, permitindo a inserção de documentos públicos (user_id = NULL).\nINSERT INTO public.documents (name, content, is_deletable, user_id) VALUES\n('Conhecimento - Agente.txt', '${initialKnowledgeTextEscaped}', false, NULL),\n('Conhecimento - Reforma.txt', '${taxReformKnowledgeTextEscaped}', false, NULL)\nON CONFLICT (name) WHERE (user_id IS NULL) DO NOTHING;\n\n\n-- Comentários para clareza\nCOMMENT ON COLUMN public.documents.user_id IS 'Chave estrangeira para o usuário que enviou o documento. NULO para documentos da base de conhecimento global.';\nCOMMENT ON COLUMN public.conversations.user_id IS 'Chave estrangeira para o usuário dono da conversa.';\nCOMMENT ON COLUMN public.messages.user_id IS 'Chave estrangeira para o usuário que criou a mensagem.';\nCOMMENT ON POLICY \"Usuários gerenciam mensagens baseadas na posse da conversa.\" ON public.messages IS 'Permite operações em mensagens se o usuário possuir a conversa pai.';\n`;\n\n/**\n * Gera uma mensagem de erro de configuração do banco de dados com o script SQL.\n * @param issue A descrição do problema detectado (ex: \"tabela 'profiles' ausente\").\n * @returns Uma string formatada com instruções e o script SQL.\n */\nconst generateSetupErrorMessage = (\n  issue: string\n) => `ERRO DE CONFIGURAÇÃO DO BANCO DE DADOS\n\nFoi detectado um problema com a estrutura do seu banco de dados: **${issue}**.\n\nIsso geralmente significa que as tabelas ou políticas de segurança (Row Level Security) necessárias para separar os dados por usuário estão ausentes ou incorretas.\n\nSOLUÇÃO:\n1. Vá para o seu projeto em supabase.com.\n2. No menu à esquerda, clique no ícone de \"SQL Editor\".\n3. Clique em \"+ New query\".\n4. Cole o script SQL abaixo e clique em \"RUN\". Este script é seguro para ser executado várias vezes e irá criar ou corrigir as tabelas, políticas de segurança e dados iniciais.\n\n--- SCRIPT SQL PARA COPIAR ---\n${SETUP_SQL_SCRIPT}\n---------------------------------`;\n\n/**\n * Helper to safely extract a detailed error message from a caught value.\n * This function prioritizes the .message property from Error objects and formats Supabase errors.\n * @param error The value caught in a catch block.\n * @returns A formatted string representing the error message.\n */\nfunction getErrorMessage(error: unknown): string {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  if (typeof error === \"object\" && error !== null) {\n    const errObj = error as {\n      message?: string;\n      details?: string;\n      hint?: string;\n      code?: string;\n    };\n    let fullMessage = errObj.message || \"Ocorreu um erro desconhecido.\";\n    if (errObj.details) fullMessage += `\\nDetalhes: ${errObj.details}`;\n    if (errObj.hint) fullMessage += `\\nHINT: ${errObj.hint}`;\n    if (errObj.code) fullMessage += ` (Código: ${errObj.code})`;\n    return fullMessage;\n  }\n  try {\n    const stringified = JSON.stringify(error);\n    return stringified === \"{}\" ? String(error) : stringified;\n  } catch {\n    return String(error);\n  }\n}\n\ninterface DocumentState {\n  documents: Document[];\n  isLoading: boolean;\n  error: string | null;\n  addDocument: (file: File) => Promise<void>;\n  deleteDocument: (id: string) => Promise<void>;\n  renameDocument: (id: string, newName: string) => Promise<void>;\n  loadInitialDocuments: () => Promise<void>;\n}\n\nexport const useDocumentStore = create<DocumentState>((set, get) => ({\n  documents: [],\n  isLoading: false,\n  error: null,\n  loadInitialDocuments: async () => {\n    if (get().isLoading) return;\n    set({ isLoading: true, error: null });\n\n    try {\n      // A RLS irá filtrar para mostrar os documentos do usuário e os documentos públicos.\n      // Os documentos públicos iniciais agora são criados pelo SETUP_SQL_SCRIPT.\n      const { data: dbDocs, error: fetchError } = await supabase\n        .from(\"documents\")\n        .select(\"*\");\n\n      if (fetchError) throw fetchError;\n\n      const processedDocs: Document[] = [];\n      for (const dbDoc of dbDocs) {\n        const processed = await processText(\n          dbDoc.content,\n          dbDoc.name,\n          dbDoc.is_deletable\n        );\n        processed.id = dbDoc.id; // Manter o ID original do banco de dados\n        processed.content = dbDoc.content; // Adicionar o conteúdo completo\n        processedDocs.push(processed);\n      }\n\n      set({ documents: processedDocs });\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      let errorMessage = `Erro detalhado ao carregar documentos:\\n${detail}`;\n      const isSetupError =\n        typeof detail === \"string\" &&\n        (detail.includes(\"relation\") ||\n          detail.includes(\"does not exist\") ||\n          detail.includes(\"violates row-level security policy\"));\n\n      if (isSetupError) {\n        errorMessage = generateSetupErrorMessage(\n          \"A política de segurança (RLS) para `documents` pode estar ausente ou incorreta.\"\n        );\n      }\n\n      set({ error: errorMessage });\n      console.error(\"Erro detalhado ao carregar documentos:\", e);\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n  addDocument: async (file) => {\n    set({ isLoading: true, error: null });\n    try {\n      const {\n        data: { user },\n      } = await supabase.auth.getUser(); // Get current user\n      if (!user)\n        throw new Error(\"Usuário não autenticado para adicionar documento.\");\n\n      const newDocument = await processDocument(file);\n      if (newDocument.chunks.length === 0) {\n        throw new Error(\"O documento está vazio ou não pôde ser processado.\");\n      }\n\n      const documentContent =\n        newDocument.content || newDocument.chunks.map((c) => c.text).join(\"\");\n\n      const { data, error } = await supabase\n        .from(\"documents\")\n        .insert({\n          name: newDocument.name,\n          content: documentContent,\n          is_deletable: true,\n          user_id: user.id, // Associa o documento ao usuário atual\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      // Atualiza o documento em memória com o ID confirmado do banco de dados\n      newDocument.id = data.id;\n\n      set((state) => ({ documents: [...state.documents, newDocument] }));\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      set({ error: `Erro ao adicionar documento: ${detail}` });\n      console.error(\"Error adding document:\", e);\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n  deleteDocument: async (id) => {\n    // A política RLS garante que o usuário só pode deletar seus próprios documentos.\n    const { error } = await supabase.from(\"documents\").delete().match({ id });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Error deleting document:\", detail);\n      set({ error: detail });\n      return;\n    }\n    set((state) => ({\n      documents: state.documents.filter((doc) => doc.id !== id),\n    }));\n  },\n  renameDocument: async (id, newName) => {\n    // A política RLS garante que o usuário só pode renomear seus próprios documentos.\n    const { error } = await supabase\n      .from(\"documents\")\n      .update({ name: newName })\n      .match({ id });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Error renaming document:\", detail);\n      set({ error: detail });\n      return;\n    }\n    set((state) => ({\n      documents: state.documents.map((doc) =>\n        doc.id === id ? { ...doc, name: newName } : doc\n      ),\n    }));\n  },\n}));\n\n// Helper to create a new conversation object\nconst createNewConversation = (title = \"Nova Conversa\"): Conversation => ({\n  id: crypto.randomUUID(),\n  title,\n  messages: [],\n  createdAt: Date.now(),\n  updatedAt: Date.now(),\n});\n\ninterface ChatState {\n  documentConversations: Record<string, Conversation>;\n  codeConversations: Record<string, Conversation>;\n  suggestionConversations: Record<string, Conversation>;\n  activeDocumentConversationId: string | null;\n  activeCodeConversationId: string | null;\n  activeSuggestionConversationId: string | null;\n  isLoading: boolean;\n  activeAgent: AgentType;\n  activeModel: string;\n  proTokenCount: number;\n  proTokenLimit: number;\n  // Auth state\n  session: Session | null;\n  user: User | null;\n  authLoading: boolean;\n  authError: AuthError | null;\n  authMessage: string | null; // For success messages\n  // Auth methods\n  initAuth: () => () => void;\n  signUp: (\n    email: string,\n    password: string,\n    metadata: { [key: string]: any }\n  ) => Promise<void>;\n  signIn: (email: string, password: string) => Promise<void>;\n  signOut: () => Promise<void>;\n  sendPasswordResetEmail: (email: string) => Promise<void>;\n  clearAuthFeedback: () => void;\n  // Chat methods\n  loadInitialData: () => Promise<void>;\n  setActiveAgent: (agent: AgentType) => void;\n  sendMessage: (userInput: string, documents: Document[]) => Promise<void>;\n  startNewConversation: (agent: AgentType) => Promise<void>;\n  deleteConversation: (\n    agent: AgentType,\n    conversationId: string\n  ) => Promise<void>;\n  setActiveConversation: (agent: AgentType, conversationId: string) => void;\n  setMessageFeedback: (\n    agent: AgentType,\n    conversationId: string,\n    messageId: string,\n    feedback: \"good\" | \"bad\"\n  ) => Promise<void>;\n}\n\nexport const useChatStore = create<ChatState>((set, get) => ({\n  documentConversations: {},\n  codeConversations: {},\n  suggestionConversations: {},\n  activeDocumentConversationId: null,\n  activeCodeConversationId: null,\n  activeSuggestionConversationId: null,\n  isLoading: false,\n  activeAgent: \"document\",\n  activeModel: GEMINI_FLASH,\n  proTokenCount: 0,\n  proTokenLimit: PRO_TOKEN_LIMIT,\n  // Auth initial state\n  session: null,\n  user: null,\n  authLoading: true,\n  authError: null,\n  authMessage: null,\n\n  // Auth methods\n  initAuth: () => {\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      set({ session, user: session?.user ?? null, authLoading: false });\n    });\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      set({ session, user: session?.user ?? null, authLoading: false });\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  },\n  signUp: async (email, password, metadata) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    useDocumentStore.setState({ error: null });\n\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: { data: metadata },\n    });\n\n    if (error) {\n      const detail = getErrorMessage(error);\n      const isSetupError =\n        detail.toLowerCase().includes(\"database error saving new user\") ||\n        detail.includes(\n          'violates row-level security policy for table \"user_profiles\"'\n        );\n\n      if (isSetupError) {\n        const setupError = {\n          name: \"DatabaseSetupError\",\n          message: generateSetupErrorMessage(\n            \"A criação de perfil de usuário falhou, indicando uma configuração de banco de dados incorreta ou políticas de RLS ausentes.\"\n          ),\n        } as AuthError;\n        set({ authLoading: false, authError: setupError });\n      } else if (error.message.includes(\"User already registered\")) {\n        const helpfulError = {\n          name: \"UserAlreadyRegisteredError\",\n          message:\n            \"Este e-mail já está cadastrado.\\n\\n\" +\n            \"1. Se você ainda não ativou sua conta, por favor, verifique sua caixa de entrada e a pasta de spam para encontrar o e-mail de confirmação.\\n\\n\" +\n            '2. Se você já confirmou mas esqueceu a senha, utilize a opção \"Esqueci minha senha\" na tela de login.',\n        } as AuthError;\n        set({ authLoading: false, authError: helpfulError });\n      } else {\n        set({ authLoading: false, authError: error });\n      }\n      return;\n    }\n\n    // Add helpful console log for debugging confirmation issues\n    if (\n      data.user &&\n      data.user.identities &&\n      data.user.identities.length === 0\n    ) {\n      console.log(\n        \"Cadastro enviado com sucesso. O usuário está aguardando confirmação por e-mail e ainda não aparecerá na tabela auth.users. Verifique o e-mail ou desative a confirmação de e-mail nas configurações de autenticação do Supabase.\"\n      );\n    }\n\n    set({\n      authLoading: false,\n      authError: null,\n      authMessage:\n        \"Cadastro realizado! Verifique seu e-mail para confirmar a conta e poder fazer o login.\",\n    });\n  },\n  signIn: async (email, password) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    set({ authLoading: false, authError: error || null });\n  },\n  signOut: async () => {\n    set({ authLoading: true, authError: null });\n    await supabase.auth.signOut();\n    set({ session: null, user: null, authLoading: false, authError: null });\n  },\n  sendPasswordResetEmail: async (email) => {\n    set({ authLoading: true, authError: null, authMessage: null });\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\n      // Opcional: redireciona para uma página específica após a redefinição\n      // redirectTo: `${window.location.origin}/update-password`,\n    });\n    if (error) {\n      set({ authLoading: false, authError: error });\n    } else {\n      set({\n        authLoading: false,\n        authMessage:\n          \"Se o e-mail estiver correto, você receberá um link para redefinir sua senha em breve.\",\n      });\n    }\n  },\n  clearAuthFeedback: () => {\n    set({ authError: null, authMessage: null });\n  },\n\n  loadInitialData: async () => {\n    set({ isLoading: true });\n    useDocumentStore.setState({ error: null });\n\n    await useDocumentStore.getState().loadInitialDocuments();\n\n    if (useDocumentStore.getState().error) {\n      set({ isLoading: false });\n      return;\n    }\n\n    const user = get().user;\n    if (user) {\n      try {\n        // RLS on user_profiles ensures we only get the current user's profile.\n        const { data: profile, error: profileError } = await supabase\n          .from(\"user_profiles\")\n          .select(\"user_id, full_name\")\n          .eq(\"user_id\", user.id)\n          .single();\n\n        const userMetadata = user.user_metadata;\n\n        if (\n          profileError &&\n          profileError.code === \"PGRST116\" &&\n          userMetadata?.full_name\n        ) {\n          console.log(\"Perfil de usuário não encontrado. Criando agora...\");\n          const { error: insertError } = await supabase\n            .from(\"user_profiles\")\n            .insert({\n              user_id: user.id,\n              full_name: userMetadata.full_name,\n              user_type: userMetadata.user_type,\n            });\n          if (insertError) throw insertError;\n        } else if (profileError && profileError.code !== \"PGRST116\") {\n          throw profileError;\n        }\n      } catch (e) {\n        const detail = getErrorMessage(e);\n        const isSetupError =\n          detail.includes('relation \"public.user_profiles\" does not exist') ||\n          (detail.includes(\"column\") && detail.includes(\"does not exist\")) ||\n          detail.includes(\"violates row-level security policy\");\n\n        if (isSetupError) {\n          let reason = \"tabela ausente\";\n          if (detail.includes(\"column\"))\n            reason = \"estrutura de coluna incorreta\";\n          if (detail.includes(\"security policy\"))\n            reason = \"políticas de segurança ausentes ou incorretas\";\n\n          useDocumentStore.setState({\n            error: generateSetupErrorMessage(`user_profiles (${reason})`),\n          });\n          set({ isLoading: false });\n          return; // Interrompe o carregamento se o BD não estiver configurado\n        }\n\n        console.error(\"Erro durante a verificação/criação do perfil:\", detail);\n      }\n    }\n\n    try {\n      // RLS transparently filters these queries to the logged-in user.\n      const { data: convos, error: convoError } = await supabase\n        .from(\"conversations\")\n        .select(\"*\");\n      if (convoError) throw convoError;\n\n      const { data: messages, error: msgError } = await supabase\n        .from(\"messages\")\n        .select(\"*\")\n        .order(\"created_at\", { ascending: true });\n      if (msgError) throw msgError;\n\n      const docConvos: Record<string, Conversation> = {};\n      const codeConvos: Record<string, Conversation> = {};\n      const suggestionConvos: Record<string, Conversation> = {};\n\n      for (const convo of convos) {\n        const convoMessages = messages\n          .filter((m) => m.conversation_id === convo.id)\n          .map((m) => ({\n            id: m.id,\n            sender: m.sender as \"user\" | \"bot\",\n            text: m.text,\n            feedback: m.feedback as \"good\" | \"bad\" | null,\n            sources: m.sources,\n            createdAt: new Date(m.created_at).getTime(),\n          }));\n\n        const conversationObject: Conversation = {\n          id: convo.id,\n          title: convo.title,\n          createdAt: new Date(convo.created_at).getTime(),\n          updatedAt: convo.updated_at\n            ? new Date(convo.updated_at).getTime()\n            : new Date(convo.created_at).getTime(),\n          messages: convoMessages,\n        };\n\n        if (convo.agent_type === \"document\") {\n          docConvos[convo.id] = conversationObject;\n        } else if (convo.agent_type === \"code\") {\n          codeConvos[convo.id] = conversationObject;\n        } else if (convo.agent_type === \"suggestion\") {\n          suggestionConvos[convo.id] = conversationObject;\n        }\n      }\n\n      const sortConversations = (a: Conversation, b: Conversation) =>\n        (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt);\n\n      const sortedDocIds = Object.values(docConvos)\n        .sort(sortConversations)\n        .map((c) => c.id);\n      const sortedCodeIds = Object.values(codeConvos)\n        .sort(sortConversations)\n        .map((c) => c.id);\n      const sortedSuggestionIds = Object.values(suggestionConvos)\n        .sort(sortConversations)\n        .map((c) => c.id);\n\n      set({\n        documentConversations: docConvos,\n        codeConversations: codeConvos,\n        suggestionConversations: suggestionConvos,\n        activeDocumentConversationId: sortedDocIds[0] || null,\n        activeCodeConversationId: sortedCodeIds[0] || null,\n        activeSuggestionConversationId: sortedSuggestionIds[0] || null,\n      });\n\n      if (\n        get().activeAgent === \"document\" &&\n        !get().activeDocumentConversationId\n      ) {\n        await get().startNewConversation(\"document\");\n      }\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      let errorMessage = `Erro ao carregar o histórico de conversas: ${detail}`;\n      const isSetupError =\n        typeof detail === \"string\" &&\n        (detail.includes(\"relation\") ||\n          detail.includes(\"does not exist\") ||\n          detail.includes(\"violates row-level security policy\"));\n\n      if (isSetupError) {\n        errorMessage = generateSetupErrorMessage(\n          \"A política de segurança (RLS) para `conversations` ou `messages` pode estar ausente ou incorreta.\"\n        );\n      }\n\n      useDocumentStore.setState({ error: errorMessage });\n      console.error(\"Erro detalhado ao carregar conversas:\", e);\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n\n  setActiveAgent: (agent) => {\n    set({ activeAgent: agent });\n    const state = get();\n    let shouldStartNew = false;\n    switch (agent) {\n      case \"document\":\n        shouldStartNew =\n          !state.activeDocumentConversationId ||\n          !state.documentConversations[state.activeDocumentConversationId];\n        break;\n      case \"code\":\n        shouldStartNew =\n          !state.activeCodeConversationId ||\n          !state.codeConversations[state.activeCodeConversationId];\n        break;\n      case \"suggestion\":\n        shouldStartNew =\n          !state.activeSuggestionConversationId ||\n          !state.suggestionConversations[state.activeSuggestionConversationId];\n        break;\n    }\n\n    if (shouldStartNew) {\n      get().startNewConversation(agent);\n    }\n  },\n\n  startNewConversation: async (agent) => {\n    const {\n      data: { user },\n    } = await supabase.auth.getUser();\n\n    if (!user) {\n      const errorMsg =\n        \"Usuário não autenticado. Não é possível criar uma nova conversa.\";\n      console.error(errorMsg);\n      useDocumentStore.setState({ error: errorMsg });\n      return;\n    }\n\n    const newConvo = createNewConversation();\n    const { error } = await supabase.from(\"conversations\").insert({\n      id: newConvo.id,\n      user_id: user.id, // Explicitamente define o proprietário\n      title: newConvo.title,\n      agent_type: agent,\n      created_at: new Date(newConvo.createdAt).toISOString(),\n      updated_at: new Date(newConvo.updatedAt).toISOString(),\n    });\n\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to create conversation:\", detail);\n      const isSetupError =\n        typeof detail === \"string\" &&\n        (detail.includes(\"violates row-level security policy\") ||\n          (detail.includes(\"column\") && detail.includes(\"does not exist\")) ||\n          detail.includes(\"PGRST204\")); // Código de erro do Supabase para coluna não encontrada no cache do esquema\n\n      if (isSetupError) {\n        const errorMessage = generateSetupErrorMessage(\n          \"Falha ao criar conversa. A estrutura da tabela `conversations` parece estar desatualizada ou incorreta.\"\n        );\n        useDocumentStore.setState({ error: errorMessage });\n      } else {\n        useDocumentStore.setState({\n          error: `Falha ao criar a conversa: ${detail}`,\n        });\n      }\n      return;\n    }\n\n    switch (agent) {\n      case \"document\":\n        set((state) => ({\n          documentConversations: {\n            ...state.documentConversations,\n            [newConvo.id]: newConvo,\n          },\n          activeDocumentConversationId: newConvo.id,\n        }));\n        break;\n      case \"code\":\n        set((state) => ({\n          codeConversations: {\n            ...state.codeConversations,\n            [newConvo.id]: newConvo,\n          },\n          activeCodeConversationId: newConvo.id,\n        }));\n        break;\n      case \"suggestion\":\n        set((state) => ({\n          suggestionConversations: {\n            ...state.suggestionConversations,\n            [newConvo.id]: newConvo,\n          },\n          activeSuggestionConversationId: newConvo.id,\n        }));\n        break;\n    }\n  },\n\n  deleteConversation: async (agent, conversationId) => {\n    let conversationKey: keyof ChatState | null = null;\n    let activeIdKey: keyof ChatState | null = null;\n\n    if (agent === \"document\") {\n      conversationKey = \"documentConversations\";\n      activeIdKey = \"activeDocumentConversationId\";\n    } else if (agent === \"code\") {\n      conversationKey = \"codeConversations\";\n      activeIdKey = \"activeCodeConversationId\";\n    } else if (agent === \"suggestion\") {\n      conversationKey = \"suggestionConversations\";\n      activeIdKey = \"activeSuggestionConversationId\";\n    }\n\n    if (!conversationKey || !activeIdKey) return;\n\n    const originalConversations = get()[conversationKey] as Record<\n      string,\n      Conversation\n    >;\n    const originalActiveId = get()[activeIdKey] as string | null;\n\n    const updatedConversations = { ...originalConversations };\n    delete updatedConversations[conversationId];\n\n    let newActiveId = originalActiveId;\n    if (newActiveId === conversationId) {\n      const remainingIds = Object.values(updatedConversations)\n        .sort(\n          (a, b) => (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt)\n        )\n        .map((c) => c.id);\n      newActiveId = remainingIds[0] || null;\n    }\n\n    set({\n      [conversationKey]: updatedConversations,\n      [activeIdKey]: newActiveId,\n    });\n\n    const { error } = await supabase\n      .from(\"conversations\")\n      .delete()\n      .match({ id: conversationId });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to delete conversation:\", detail);\n      useDocumentStore.setState({\n        error: `Falha ao excluir a conversa: ${detail}`,\n      });\n      set({\n        [conversationKey]: originalConversations,\n        [activeIdKey]: originalActiveId,\n      });\n    }\n\n    if (\n      Object.keys(get()[conversationKey] as Record<string, Conversation>)\n        .length === 0\n    ) {\n      get().startNewConversation(agent);\n    }\n  },\n\n  setActiveConversation: (agent, conversationId) => {\n    switch (agent) {\n      case \"document\":\n        set({ activeDocumentConversationId: conversationId });\n        break;\n      case \"code\":\n        set({ activeCodeConversationId: conversationId });\n        break;\n      case \"suggestion\":\n        set({ activeSuggestionConversationId: conversationId });\n        break;\n    }\n  },\n\n  setMessageFeedback: async (agent, conversationId, messageId, feedback) => {\n    let conversationKey:\n      | \"documentConversations\"\n      | \"codeConversations\"\n      | \"suggestionConversations\"\n      | null = null;\n    if (agent === \"document\") conversationKey = \"documentConversations\";\n    else if (agent === \"code\") conversationKey = \"codeConversations\";\n    else if (agent === \"suggestion\")\n      conversationKey = \"suggestionConversations\";\n    if (!conversationKey) return;\n\n    const conversations = get()[conversationKey];\n    const conversation = conversations[conversationId];\n    if (!conversation) return;\n\n    const message = conversation.messages.find((m) => m.id === messageId);\n    if (!message) return;\n\n    const newFeedback = message.feedback === feedback ? null : feedback;\n\n    const updatedMessages = conversation.messages.map((msg) =>\n      msg.id === messageId ? { ...msg, feedback: newFeedback } : msg\n    );\n    set((state) => ({\n      [conversationKey!]: {\n        ...state[conversationKey!],\n        [conversationId]: { ...conversation, messages: updatedMessages },\n      },\n    }));\n\n    const { error } = await supabase\n      .from(\"messages\")\n      .update({ feedback: newFeedback })\n      .match({ id: messageId });\n    if (error) {\n      const detail = getErrorMessage(error);\n      console.error(\"Failed to set feedback:\", detail);\n      useDocumentStore.setState({\n        error: `Falha ao salvar o feedback: ${detail}`,\n      });\n      set((state) => ({\n        [conversationKey!]: {\n          ...state[conversationKey!],\n          [conversationId]: {\n            ...conversation,\n            messages: conversation.messages,\n          },\n        },\n      }));\n    }\n  },\n\n  sendMessage: async (userInput, documents) => {\n    const originalUserInput = userInput.trim();\n    if (!originalUserInput) return;\n\n    const currentError = useDocumentStore.getState().error;\n    if (\n      currentError &&\n      !currentError.includes(\"ERRO DE CONFIGURAÇÃO DO BANCO DE DADOS\")\n    ) {\n      useDocumentStore.setState({ error: null });\n    }\n\n    const user = get().user;\n    if (!user) {\n      const errorMsg =\n        \"Usuário não autenticado. A mensagem não pode ser enviada. Por favor, faça o login novamente.\";\n      console.error(errorMsg);\n      useDocumentStore.setState({ error: errorMsg });\n      set({ isLoading: false });\n      return;\n    }\n\n    let agentForThisMessage = get().activeAgent;\n    let finalUserInput = originalUserInput;\n\n    const match = originalUserInput.match(/^@(\\w+)/);\n    if (match) {\n      const alias = match[1].toLowerCase();\n      const resolvedAgent = agentAliases[alias];\n      if (resolvedAgent) {\n        agentForThisMessage = resolvedAgent;\n        finalUserInput = originalUserInput.replace(/^@\\w+\\s?/, \"\").trim();\n      }\n    }\n\n    if (!finalUserInput) {\n      if (get().activeAgent !== agentForThisMessage) {\n        get().setActiveAgent(agentForThisMessage);\n      }\n      return;\n    }\n\n    if (get().activeAgent !== agentForThisMessage) {\n      set({ activeAgent: agentForThisMessage });\n    }\n\n    const activeAgent = get().activeAgent;\n    let activeConversationId: string | null;\n    let conversationKey:\n      | \"documentConversations\"\n      | \"codeConversations\"\n      | \"suggestionConversations\";\n\n    switch (activeAgent) {\n      case \"document\":\n        activeConversationId = get().activeDocumentConversationId;\n        conversationKey = \"documentConversations\";\n        break;\n      case \"code\":\n        activeConversationId = get().activeCodeConversationId;\n        conversationKey = \"codeConversations\";\n        break;\n      case \"suggestion\":\n        activeConversationId = get().activeSuggestionConversationId;\n        conversationKey = \"suggestionConversations\";\n        break;\n    }\n\n    if (!activeConversationId) {\n      await get().startNewConversation(activeAgent);\n      activeConversationId = (get() as any)[\n        `active${\n          activeAgent.charAt(0).toUpperCase() + activeAgent.slice(1)\n        }ConversationId`\n      ];\n      if (!activeConversationId) {\n        console.error(\"Failed to create or find an active conversation.\");\n        useDocumentStore.setState({\n          error: \"Falha ao criar ou encontrar uma conversa ativa.\",\n        });\n        return;\n      }\n    }\n\n    const isNewConversation =\n      ((get()[conversationKey] as Record<string, Conversation>)[\n        activeConversationId!\n      ]?.messages.length ?? 0) === 0;\n\n    const userMessage: Message = {\n      id: crypto.randomUUID(),\n      sender: \"user\",\n      text: finalUserInput,\n      createdAt: Date.now(),\n    };\n\n    set((state) => {\n      const conversations = state[conversationKey];\n      const currentConvo = conversations?.[activeConversationId!];\n      if (currentConvo) {\n        return {\n          [conversationKey]: {\n            ...conversations,\n            [activeConversationId!]: {\n              ...currentConvo,\n              messages: [...currentConvo.messages, userMessage],\n            },\n          },\n        };\n      }\n      return state;\n    });\n    set({ isLoading: true });\n\n    const { error: userMsgError } = await supabase.from(\"messages\").insert({\n      id: userMessage.id,\n      conversation_id: activeConversationId,\n      sender: \"user\",\n      text: finalUserInput,\n      sources: null,\n      created_at: new Date(userMessage.createdAt).toISOString(),\n      user_id: user.id,\n    });\n    if (userMsgError) {\n      const detail = getErrorMessage(userMsgError);\n      console.error(\"Failed to save user message:\", detail);\n      useDocumentStore.setState({\n        error: `Falha ao salvar sua mensagem: ${detail}`,\n      });\n    }\n\n    if (isNewConversation) {\n      generateTitle(finalUserInput).then(async (title) => {\n        const finalTitle = title || finalUserInput.substring(0, 30);\n        const { error } = await supabase\n          .from(\"conversations\")\n          .update({ title: finalTitle, user_id: user.id })\n          .match({ id: activeConversationId });\n        if (error) {\n          const detail = getErrorMessage(error);\n          console.error(\"Failed to update title:\", detail);\n          useDocumentStore.setState({\n            error: `Falha ao atualizar o título: ${detail}`,\n          });\n        }\n\n        set((state) => {\n          const conversations = state[conversationKey];\n          const currentConvo = conversations?.[activeConversationId!];\n          if (currentConvo) {\n            return {\n              [conversationKey]: {\n                ...conversations,\n                [activeConversationId!]: { ...currentConvo, title: finalTitle },\n              },\n            };\n          }\n          return state;\n        });\n      });\n    }\n\n    let context = \"\";\n    let prompt = finalUserInput;\n    let preferredModel = GEMINI_FLASH;\n    let useWebSearch = false;\n\n    try {\n      if (activeAgent === \"document\" && documents.length > 0) {\n        const queryEmbedding = (await generateEmbeddings([finalUserInput]))[0];\n        const allChunks = documents.flatMap((doc) => doc.chunks);\n        if (allChunks.length > 0 && queryEmbedding) {\n          const chunksWithSimilarity = allChunks\n            .map((chunk) => ({\n              ...chunk,\n              similarity: cosineSimilarity(queryEmbedding, chunk.embedding),\n            }))\n            .sort((a, b) => b.similarity - a.similarity);\n          const lambda = 0.7;\n          const relevantChunks: (typeof chunksWithSimilarity)[0][] = [];\n          let candidates = chunksWithSimilarity;\n\n          if (candidates.length > 0) {\n            relevantChunks.push(candidates[0]);\n            candidates = candidates.slice(1);\n            while (\n              relevantChunks.length < MAX_CONTEXT_CHUNKS &&\n              candidates.length > 0\n            ) {\n              let bestCandidateIndex = -1;\n              let maxMmrScore = -Infinity;\n              for (let i = 0; i < candidates.length; i++) {\n                const candidate = candidates[i];\n                const similarityToQuery = candidate.similarity;\n                const maxSimilarityToSelected = Math.max(\n                  ...relevantChunks.map((selected) =>\n                    cosineSimilarity(candidate.embedding, selected.embedding)\n                  )\n                );\n                const mmrScore =\n                  lambda * similarityToQuery -\n                  (1 - lambda) * maxSimilarityToSelected;\n                if (mmrScore > maxMmrScore) {\n                  maxMmrScore = mmrScore;\n                  bestCandidateIndex = i;\n                }\n              }\n              if (bestCandidateIndex !== -1) {\n                relevantChunks.push(candidates[bestCandidateIndex]);\n                candidates.splice(bestCandidateIndex, 1);\n              } else {\n                break;\n              }\n            }\n          }\n          if (relevantChunks.length > 0 && relevantChunks[0].similarity > 0.5) {\n            context = relevantChunks\n              .map((chunk) => chunk.text)\n              .join(\"\\n\\n---\\n\\n\");\n          }\n        }\n      }\n\n      if (activeAgent === \"document\") {\n        useWebSearch = true;\n        if (context) {\n          preferredModel = GEMINI_PRO;\n          prompt = `${DOCUMENT_AGENT_PROMPT}\\n\\nCom base no seguinte contexto recuperado de seus documentos de conhecimento, responda à pergunta do usuário. Priorize estritamente as informações do contexto. Se o contexto não for suficiente, indique isso e use a busca na web para complementar.\\n\\nContexto:\\n${context}\\n\\n---\\n\\nPergunta do usuário: ${finalUserInput}`;\n        } else {\n          preferredModel = GEMINI_FLASH;\n          prompt = `${DOCUMENT_AGENT_PROMPT}\\n\\nResponda à pergunta do usuário usando seu conhecimento fundamental e a busca na web, pois nenhum contexto relevante foi encontrado nos documentos enviados. Sempre cite as fontes da web que utilizar.\\n\\nPergunta: ${finalUserInput}`;\n        }\n      } else if (activeAgent === \"code\") {\n        preferredModel = GEMINI_PRO;\n        let conversationContext = \"\";\n        const currentConvo = (\n          get()[conversationKey] as Record<string, Conversation>\n        )[activeConversationId!];\n        if (currentConvo && currentConvo.messages.length > 1) {\n          const conversationHistory = currentConvo.messages.slice(0, -1);\n          const recentMessages = conversationHistory.slice(\n            -CONVERSATION_CONTEXT_MESSAGES\n          );\n          if (recentMessages.length > 0) {\n            const historyText = recentMessages\n              .map(\n                (msg) =>\n                  `${msg.sender === \"user\" ? \"Usuário\" : \"Assistente\"}: ${\n                    msg.text\n                  }`\n              )\n              .join(\"\\n\");\n            conversationContext = `Considere o histórico recente desta conversa como contexto:\\n\\n--- HISTÓRICO DA CONVERSA ---\\n${historyText}\\n--- FIM DO HISTÓRICO ---\\n\\n`;\n          }\n        }\n        prompt = `${CODE_AGENT_PROMPT}\\n\\n${conversationContext}Tarefa do usuário: ${finalUserInput}`;\n      } else if (activeAgent === \"suggestion\") {\n        preferredModel = GEMINI_FLASH;\n        prompt = `${SUGGESTION_AGENT_PROMPT}\\n\\nPergunta do usuário para melhorar: \"${finalUserInput}\"`;\n        useWebSearch = false;\n      }\n\n      const proTokenCount = get().proTokenCount + prompt.length / 4;\n      set({ proTokenCount });\n\n      let modelToUse = preferredModel;\n      if (\n        preferredModel === GEMINI_PRO &&\n        proTokenCount > PRO_TOKEN_LIMIT * PRO_TOKEN_THRESHOLD\n      ) {\n        modelToUse = GEMINI_FLASH;\n        console.warn(\n          `Token limit for ${GEMINI_PRO} is approaching. Switching to ${GEMINI_FLASH} for this request.`\n        );\n      }\n      set({ activeModel: modelToUse });\n\n      const { text, sources } = await generateResponse(\n        modelToUse,\n        prompt,\n        useWebSearch\n      );\n\n      const now = Date.now();\n      const botMessage: Message = {\n        id: crypto.randomUUID(),\n        sender: \"bot\",\n        text,\n        sources,\n        createdAt: now,\n      };\n\n      const { error: botMsgError } = await supabase.from(\"messages\").insert({\n        id: botMessage.id,\n        conversation_id: activeConversationId,\n        sender: \"bot\",\n        text: botMessage.text,\n        sources: botMessage.sources,\n        created_at: new Date(botMessage.createdAt).toISOString(),\n        user_id: user.id,\n      });\n      if (botMsgError) {\n        const detail = getErrorMessage(botMsgError);\n        console.error(\"Failed to save bot message:\", detail);\n        useDocumentStore.setState({\n          error: `Falha ao salvar a resposta do assistente: ${detail}`,\n        });\n      }\n\n      const { error: convoUpdateError } = await supabase\n        .from(\"conversations\")\n        .update({ updated_at: new Date(now).toISOString() })\n        .match({ id: activeConversationId });\n      if (convoUpdateError) {\n        console.error(\n          \"Failed to update conversation timestamp:\",\n          getErrorMessage(convoUpdateError)\n        );\n      }\n\n      set((state) => {\n        const conversations = state[conversationKey];\n        const currentConvo = conversations?.[activeConversationId!];\n        if (currentConvo) {\n          return {\n            [conversationKey]: {\n              ...conversations,\n              [activeConversationId!]: {\n                ...currentConvo,\n                messages: [...currentConvo.messages, botMessage],\n                updatedAt: now,\n              },\n            },\n          };\n        }\n        return state;\n      });\n    } catch (e: unknown) {\n      const detail = getErrorMessage(e);\n      console.error(\"Error generating response:\", detail);\n      const errorTime = Date.now();\n      const errorMessage: Message = {\n        id: crypto.randomUUID(),\n        sender: \"bot\",\n        text: `Ocorreu um erro ao processar sua solicitação. Por favor, tente novamente.\\n\\nDetalhes do erro:\\n\\`\\`\\`\\n${detail}\\n\\`\\`\\``,\n        createdAt: errorTime,\n      };\n\n      const { error: convoUpdateError } = await supabase\n        .from(\"conversations\")\n        .update({ updated_at: new Date(errorTime).toISOString() })\n        .match({ id: activeConversationId });\n      if (convoUpdateError) {\n        console.error(\n          \"Failed to update conversation timestamp on error:\",\n          getErrorMessage(convoUpdateError)\n        );\n      }\n\n      set((state) => {\n        const conversations = state[conversationKey];\n        const currentConvo = conversations?.[activeConversationId!];\n        if (currentConvo) {\n          return {\n            [conversationKey]: {\n              ...conversations,\n              [activeConversationId!]: {\n                ...currentConvo,\n                messages: [...currentConvo.messages, errorMessage],\n                updatedAt: errorTime,\n              },\n            },\n          };\n        }\n        return state;\n      });\n    } finally {\n      set({ isLoading: false });\n    }\n  },\n}));\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1605, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/BotIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const BotIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n    aria-label=\"Ícone do Robô\"\n  >\n    <path d=\"M12 2a2 2 0 0 1 2 2v2h-4V4a2 2 0 0 1 2-2zM4.636 8.364A9 9 0 0 1 12 4a9 9 0 0 1 7.364 4.364L20 10v6a2 2 0 0 1-2 2h-1.586l-1.707-1.707A4.002 4.002 0 0 0 12 15a4.002 4.002 0 0 0-2.707 1.293L7.586 18H6a2 2 0 0 1-2-2v-6l.636-1.636zM9 12a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm6 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\" />\n    <path d=\"M5 20h14a1 1 0 0 1 1 1v1H4v-1a1 1 0 0 1 1-1z\" />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;QACX,cAAW;;0BAEX,6LAAC;gBAAK,GAAE;;;;;;0BACR,6LAAC;gBAAK,GAAE;;;;;;;;;;;;KATC"}},
    {"offset": {"line": 1648, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/UserIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const UserIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n  >\n    <path\n      fillRule=\"evenodd\"\n      d=\"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;kBAEX,cAAA,6LAAC;YACC,UAAS;YACT,GAAE;YACF,UAAS;;;;;;;;;;;KAVF"}},
    {"offset": {"line": 1683, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ClipboardIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ClipboardIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 0 1-2.25 2.25H9.75A2.25 2.25 0 0 1 7.5 4.5v0a2.25 2.25 0 0 1 2.25-2.25h3.879a2.25 2.25 0 0 1 1.95.879Z\"\n    />\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M9 11.25h6M9 13.5h6M9 15.75h6M4.5 5.25v13.5A2.25 2.25 0 0 0 6.75 21h10.5A2.25 2.25 0 0 0 19.5 18.75V5.25c0-1.076-.874-1.95-1.95-1.95H7.2a1.95 1.95 0 0 0-1.95 1.95Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAkD,CAAC,EAAE,SAAS,EAAE,iBAC3E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;;0BAEX,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;0BAEJ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;;;;;;;KAjBK"}},
    {"offset": {"line": 1731, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/CheckIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const CheckIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m4.5 12.75 6 6 9-13.5\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,YAA8C,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 1768, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/SaveIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const SaveIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\" \n      d=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\" \n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 1806, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/CodeBlock.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ClipboardIcon } from './icons/ClipboardIcon';\nimport { CheckIcon } from './icons/CheckIcon';\nimport { SaveIcon } from './icons/SaveIcon';\n\ninterface CodeBlockProps {\n  language: string;\n  code: string;\n}\n\nconst CodeBlock: React.FC<CodeBlockProps> = ({ language, code }) => {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(code).then(() => {\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000); // Reset after 2 seconds\n    });\n  };\n\n  // Mapeia identificadores comuns de linguagem para extensões de arquivo\n  const languageToFileExtension: { [key: string]: string } = {\n    python: 'py',\n    py: 'py',\n    javascript: 'js',\n    js: 'js',\n    typescript: 'ts',\n    ts: 'ts',\n    html: 'html',\n    css: 'css',\n    json: 'json',\n    delphi: 'pas', // A extensão de Delphi/Pascal é frequentemente .pas\n    pascal: 'pas',\n  };\n\n  const fileExtension = languageToFileExtension[language.toLowerCase()];\n\n  const handleSave = () => {\n    // Usa um tipo MIME genérico de texto/plano para o blob\n    const blob = new Blob([code], { type: 'text/plain;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    // Usa a extensão determinada para o nome do arquivo, com fallback para .txt se desconhecida\n    a.download = `codigo_gerado_${Date.now()}.${fileExtension || 'txt'}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // O botão de salvar agora aparecerá para qualquer linguagem com uma extensão mapeada.\n  const canSave = !!fileExtension;\n\n  return (\n    <div className=\"my-4 rounded-lg bg-gray-900 dark:bg-black overflow-hidden\">\n      <div className=\"flex items-center justify-between px-4 py-2 bg-gray-800 dark:bg-gray-900/50\">\n        <span className=\"text-xs font-semibold text-gray-400 uppercase\">{language}</span>\n        <div className=\"flex items-center gap-4\">\n          {canSave && (\n            <button\n              onClick={handleSave}\n              className=\"flex items-center gap-1.5 text-xs text-gray-400 hover:text-white transition-colors\"\n            >\n              <SaveIcon className=\"w-4 h-4\" />\n              Salvar .{fileExtension}\n            </button>\n          )}\n          <button\n            onClick={handleCopy}\n            className=\"flex items-center gap-1.5 text-xs text-gray-400 hover:text-white transition-colors\"\n          >\n            {copied ? (\n              <>\n                <CheckIcon className=\"w-4 h-4 text-green-400\" />\n                Copiado!\n              </>\n            ) : (\n              <>\n                <ClipboardIcon className=\"w-4 h-4\" />\n                Copiar\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n      <pre className=\"p-4 text-sm text-white overflow-x-auto\">\n        <code>{code}</code>\n      </pre>\n    </div>\n  );\n};\n\nexport default CodeBlock;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AAOA,MAAM,YAAsC,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;;IAC7D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,aAAa;QACjB,UAAU,SAAS,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC;YACvC,UAAU;YACV,WAAW,IAAM,UAAU,QAAQ,OAAO,wBAAwB;QACpE;IACF;IAEA,uEAAuE;IACvE,MAAM,0BAAqD;QACzD,QAAQ;QACR,IAAI;QACJ,YAAY;QACZ,IAAI;QACJ,YAAY;QACZ,IAAI;QACJ,MAAM;QACN,KAAK;QACL,MAAM;QACN,QAAQ;QACR,QAAQ;IACV;IAEA,MAAM,gBAAgB,uBAAuB,CAAC,SAAS,WAAW,GAAG;IAErE,MAAM,aAAa;QACjB,uDAAuD;QACvD,MAAM,OAAO,IAAI,KAAK;YAAC;SAAK,EAAE;YAAE,MAAM;QAA2B;QACjE,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,4FAA4F;QAC5F,EAAE,QAAQ,GAAG,CAAC,cAAc,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,iBAAiB,OAAO;QACpE,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,EAAE,KAAK;QACP,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,IAAI,eAAe,CAAC;IACtB;IAEA,sFAAsF;IACtF,MAAM,UAAU,CAAC,CAAC;IAElB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAAiD;;;;;;kCACjE,6LAAC;wBAAI,WAAU;;4BACZ,yBACC,6LAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,6LAAC,+IAAQ;wCAAC,WAAU;;;;;;oCAAY;oCACvB;;;;;;;0CAGb,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAET,uBACC;;sDACE,6LAAC,iJAAS;4CAAC,WAAU;;;;;;wCAA2B;;iEAIlD;;sDACE,6LAAC,yJAAa;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;;;;;;;;;;;;;0BAO/C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;8BAAM;;;;;;;;;;;;;;;;;AAIf;GAjFM;KAAA;uCAmFS"}},
    {"offset": {"line": 1976, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ThumbsUpIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ThumbsUpIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path d=\"M1 8.25a1.25 1.25 0 112.5 0v7.5a1.25 1.25 0 11-2.5 0v-7.5zM11 3V1.7c0-.268.14-.516.372-.658.232-.142.518-.142.75 0l1.823.912a.75.75 0 01.428.656V8.25c0 .285.11.55.293.742l3.08 2.923c.34.323.527.773.527 1.246v1.757a2.25 2.25 0 01-2.25 2.25H9.75a.75.75 0 01-.75-.75V8.25a.75.75 0 00-.75-.75h-.5a.75.75 0 00-.75.75v5.02c0 .357-.184.686-.488.869l-2.096 1.258A.75.75 0 013.5 15.25V8.25a.75.75 0 01.75-.75h2a.75.75 0 01.75.75v2.25c0 .414.336.75.75.75h2.5a.75.75 0 00.75-.75V3z\" />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAiD,CAAC,EAAE,SAAS,EAAE,iBAC1E,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;KARC"}},
    {"offset": {"line": 2010, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/ThumbsDownIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const ThumbsDownIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path d=\"M1 11.75a1.25 1.25 0 102.5 0V4.25a1.25 1.25 0 10-2.5 0v7.5zM11 17v1.3c0 .268-.14.516-.372.658-.232.142-.518.142-.75 0l-1.823-.912a.75.75 0 01-.428-.656V11.75a.75.75 0 00-.293-.742l-3.08-2.923A2.25 2.25 0 014.25 7V5.243a2.25 2.25 0 012.25-2.25H9.25a.75.75 0 01.75.75v7.5a.75.75 0 00.75.75h.5a.75.75 0 00.75-.75V6.48c0-.357.184-.686.488-.869l2.096-1.258a.75.75 0 011.012.82V11.75a.75.75 0 01-.75.75h-2a.75.75 0 01-.75-.75V8.75a.75.75 0 00-.75-.75h-2.5a.75.75 0 00-.75.75V17z\" />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,iBAAmD,CAAC,EAAE,SAAS,EAAE,iBAC5E,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;KARC"}},
    {"offset": {"line": 2044, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ChatMessage.tsx"],"sourcesContent":["import React from 'react';\nimport { Message } from '../types';\nimport { BotIcon } from './icons/BotIcon';\nimport { UserIcon } from './icons/UserIcon';\nimport CodeBlock from './CodeBlock';\nimport { ThumbsUpIcon } from './icons/ThumbsUpIcon';\nimport { ThumbsDownIcon } from './icons/ThumbsDownIcon';\n\ninterface ChatMessageProps {\n  message: Message;\n  onFeedback: (feedback: 'good' | 'bad') => void;\n}\n\n// Regex to find markdown code blocks\nconst codeBlockRegex = /```(\\w+)?\\n([\\s\\S]+?)```/g;\n\nconst ChatMessage: React.FC<ChatMessageProps> = ({ message, onFeedback }) => {\n  const { sender, text, sources, feedback } = message;\n  const isBot = sender === 'bot';\n\n  const renderContent = () => {\n    const parts = [];\n    let lastIndex = 0;\n    let match;\n\n    while ((match = codeBlockRegex.exec(text)) !== null) {\n      // Add text before the code block\n      if (match.index > lastIndex) {\n        parts.push(\n          <div key={`text-${lastIndex}`} className=\"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap\">\n            {text.slice(lastIndex, match.index)}\n          </div>\n        );\n      }\n      \n      const language = match[1] || 'text';\n      const code = match[2];\n\n      parts.push(<CodeBlock key={`code-${match.index}`} language={language} code={code} />);\n      \n      lastIndex = match.index + match[0].length;\n    }\n\n    // Add any remaining text after the last code block\n    if (lastIndex < text.length) {\n      parts.push(\n        <div key={`text-${lastIndex}`} className=\"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap\">\n          {text.slice(lastIndex)}\n        </div>\n      );\n    }\n\n    return parts.length > 0 ? parts : <div className=\"prose prose-sm dark:prose-invert max-w-none whitespace-pre-wrap\">{text}</div>;\n  };\n\n  return (\n    <div className={`flex items-start gap-4 my-6 ${!isBot ? 'flex-row-reverse' : ''}`}>\n      <div className={`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${isBot ? 'bg-gray-200 dark:bg-gray-700' : 'bg-blue-600 text-white'}`}>\n        {isBot ? <BotIcon className=\"w-6 h-6 text-gray-600 dark:text-gray-300\" /> : <UserIcon className=\"w-6 h-6\" />}\n      </div>\n      <div className={`p-4 rounded-lg max-w-2xl shadow ${isBot ? 'bg-white dark:bg-gray-800' : 'bg-blue-500 text-white'}`}>\n        {renderContent()}\n        {sources && sources.length > 0 && (\n          <div className=\"mt-4 border-t border-gray-200 dark:border-gray-700 pt-3\">\n            <h4 className=\"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2\">Fontes:</h4>\n            <ul className=\"space-y-1\">\n              {sources.map((source, index) => (\n                <li key={index} className=\"flex items-center\">\n                  <span className=\"text-gray-500 dark:text-gray-400 text-xs mr-2\">{index + 1}.</span>\n                  <a\n                    href={source.uri}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm truncate\"\n                    title={source.uri}\n                  >\n                    {source.title}\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n         {isBot && (\n          <div className={`mt-3 flex items-center gap-2 ${sources && sources.length > 0 ? 'pt-3 border-t border-gray-200 dark:border-gray-700' : ''}`}>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mr-auto\">Avalie esta resposta:</p>\n            <button\n              onClick={() => onFeedback('good')}\n              className={`p-1.5 rounded-full transition-colors ${\n                feedback === 'good'\n                  ? 'bg-green-100 text-green-600 dark:bg-green-900/50 dark:text-green-400'\n                  : 'text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700'\n              }`}\n              aria-label=\"Resposta boa\"\n            >\n              <ThumbsUpIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => onFeedback('bad')}\n              className={`p-1.5 rounded-full transition-colors ${\n                feedback === 'bad'\n                  ? 'bg-red-100 text-red-600 dark:bg-red-900/50 dark:text-red-400'\n                  : 'text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700'\n              }`}\n              aria-label=\"Resposta ruim\"\n            >\n              <ThumbsDownIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMessage;"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;;;;;AAOA,qCAAqC;AACrC,MAAM,iBAAiB;AAEvB,MAAM,cAA0C,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE;IACtE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG;IAC5C,MAAM,QAAQ,WAAW;IAEzB,MAAM,gBAAgB;QACpB,MAAM,QAAQ,EAAE;QAChB,IAAI,YAAY;QAChB,IAAI;QAEJ,MAAO,CAAC,QAAQ,eAAe,IAAI,CAAC,KAAK,MAAM,KAAM;YACnD,iCAAiC;YACjC,IAAI,MAAM,KAAK,GAAG,WAAW;gBAC3B,MAAM,IAAI,eACR,6LAAC;oBAA8B,WAAU;8BACtC,KAAK,KAAK,CAAC,WAAW,MAAM,KAAK;mBAD1B,CAAC,KAAK,EAAE,WAAW;;;;;YAIjC;YAEA,MAAM,WAAW,KAAK,CAAC,EAAE,IAAI;YAC7B,MAAM,OAAO,KAAK,CAAC,EAAE;YAErB,MAAM,IAAI,eAAC,6LAAC,sIAAS;gBAA6B,UAAU;gBAAU,MAAM;eAAjD,CAAC,KAAK,EAAE,MAAM,KAAK,EAAE;;;;;YAEhD,YAAY,MAAM,KAAK,GAAG,KAAK,CAAC,EAAE,CAAC,MAAM;QAC3C;QAEA,mDAAmD;QACnD,IAAI,YAAY,KAAK,MAAM,EAAE;YAC3B,MAAM,IAAI,eACR,6LAAC;gBAA8B,WAAU;0BACtC,KAAK,KAAK,CAAC;eADJ,CAAC,KAAK,EAAE,WAAW;;;;;QAIjC;QAEA,OAAO,MAAM,MAAM,GAAG,IAAI,sBAAQ,6LAAC;YAAI,WAAU;sBAAmE;;;;;;IACtH;IAEA,qBACE,6LAAC;QAAI,WAAW,CAAC,4BAA4B,EAAE,CAAC,QAAQ,qBAAqB,IAAI;;0BAC/E,6LAAC;gBAAI,WAAW,CAAC,sEAAsE,EAAE,QAAQ,iCAAiC,0BAA0B;0BACzJ,sBAAQ,6LAAC,6IAAO;oBAAC,WAAU;;;;;6EAAgD,6LAAC,+IAAQ;oBAAC,WAAU;;;;;;;;;;;0BAElG,6LAAC;gBAAI,WAAW,CAAC,gCAAgC,EAAE,QAAQ,8BAA8B,0BAA0B;;oBAChH;oBACA,WAAW,QAAQ,MAAM,GAAG,mBAC3B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA8D;;;;;;0CAC5E,6LAAC;gCAAG,WAAU;0CACX,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBACpB,6LAAC;wCAAe,WAAU;;0DACxB,6LAAC;gDAAK,WAAU;;oDAAiD,QAAQ;oDAAE;;;;;;;0DAC3E,6LAAC;gDACC,MAAM,OAAO,GAAG;gDAChB,QAAO;gDACP,KAAI;gDACJ,WAAU;gDACV,OAAO,OAAO,GAAG;0DAEhB,OAAO,KAAK;;;;;;;uCATR;;;;;;;;;;;;;;;;oBAgBf,uBACA,6LAAC;wBAAI,WAAW,CAAC,6BAA6B,EAAE,WAAW,QAAQ,MAAM,GAAG,IAAI,uDAAuD,IAAI;;0CACzI,6LAAC;gCAAE,WAAU;0CAAmD;;;;;;0CAChE,6LAAC;gCACC,SAAS,IAAM,WAAW;gCAC1B,WAAW,CAAC,qCAAqC,EAC/C,aAAa,SACT,yEACA,6EACJ;gCACF,cAAW;0CAEX,cAAA,6LAAC,uJAAY;oCAAC,WAAU;;;;;;;;;;;0CAE1B,6LAAC;gCACC,SAAS,IAAM,WAAW;gCAC1B,WAAW,CAAC,qCAAqC,EAC/C,aAAa,QACT,iEACA,6EACJ;gCACF,cAAW;0CAEX,cAAA,6LAAC,2JAAc;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC;KAjGM;uCAmGS"}},
    {"offset": {"line": 2269, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/SendIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const SendIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n  >\n    <path d=\"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z\" />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;kBAEX,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;KAPC"}},
    {"offset": {"line": 2302, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/PaperclipIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const PaperclipIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.122 2.122l7.81-7.81\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAkD,CAAC,EAAE,SAAS,EAAE,iBAC3E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 2339, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/suggestions.ts"],"sourcesContent":["export const documentAgentSuggestions = [\n  \"O que muda com a nova Reforma Tributária para o setor de serviços?\",\n  \"Como funciona o regime de Lucro Presumido?\",\n  \"Quais são os principais impostos federais no Brasil?\",\n  \"Explique o que é o SPED Fiscal.\",\n];\n\nexport const codeAgentSuggestions = [\n  \"Gere uma função em Python para calcular o ICMS em uma venda interestadual.\",\n  \"Escreva um trecho de código em Delphi para validar um CNPJ.\",\n  \"Crie uma função Python que retorne a alíquota do ISS para um serviço em São Paulo.\",\n  \"Mostre um exemplo de como gerar um XML de NF-e em Python.\",\n];\n\n// FIX: Add suggestionAgentSuggestions to provide example prompts for the suggestion agent and resolve import error in App.tsx.\nexport const suggestionAgentSuggestions = [\n  \"Melhore a pergunta: 'impostos sobre software'\",\n  \"Como posso perguntar sobre créditos de PIS/COFINS de forma mais eficaz?\",\n  \"Otimize minha dúvida sobre a tributação de serviços exportados.\",\n  \"Sugira alternativas para a pergunta: 'reforma tributária'\",\n];\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,2BAA2B;IACtC;IACA;IACA;IACA;CACD;AAEM,MAAM,uBAAuB;IAClC;IACA;IACA;IACA;CACD;AAGM,MAAM,6BAA6B;IACxC;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 2372, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/CodeBracketIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const CodeBracketIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 15\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,kBAAoD,CAAC,EAAE,SAAS,EAAE,iBAC7E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2410, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/WebIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const WebIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z\"\n    />\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M3.75 12h16.5m-16.5 3.75a9.023 9.023 0 0 1 0-7.5M12 3.75c1.62 3.32 1.62 7.18 0 10.5\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;;0BAEZ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;0BAEJ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;;;;;;;KAlBK"}},
    {"offset": {"line": 2459, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/LightbulbIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const LightbulbIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-4.5 6.01 6.01 0 0 0-1.5-4.5m0 9a6.01 6.01 0 0 1-1.5-4.5 6.01 6.01 0 0 1 1.5-4.5M12 6.75v-1.5m0 12.75a3 3 0 0 1-3-3h6a3 3 0 0 1-3 3z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,gBAAkD,CAAC,EAAE,SAAS,EAAE,iBAC3E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2497, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ChatInput.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, KeyboardEvent } from 'react';\nimport { useChatStore } from '../store'; // Import store\nimport { SendIcon } from './icons/SendIcon';\nimport { PaperclipIcon } from './icons/PaperclipIcon';\n// FIX: Import suggestionAgentSuggestions to provide suggestions based on the active agent.\nimport { documentAgentSuggestions, codeAgentSuggestions, suggestionAgentSuggestions } from '../suggestions';\nimport { AgentType } from '../types';\nimport { CodeBracketIcon } from './icons/CodeBracketIcon';\nimport { WebIcon } from './icons/WebIcon';\nimport { LightbulbIcon } from './icons/LightbulbIcon';\n\ninterface ChatInputProps {\n  onSendMessage: (message: string) => void;\n  onUploadClick: () => void;\n  isLoading: boolean;\n  activeAgent: AgentType;\n}\n\nconst ChatInput: React.FC<ChatInputProps> = ({ onSendMessage, onUploadClick, isLoading, activeAgent }) => {\n  const [input, setInput] = useState('');\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState(-1);\n  const [isCommandPaletteOpen, setIsCommandPaletteOpen] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const setActiveAgent = useChatStore((state) => state.setActiveAgent);\n\n  const commands = [\n      { \n        name: 'Pesquisa na web', \n        description: 'Mudar para o agente de documentos.',\n        agent: 'document' as AgentType, \n        alias: 'web',\n        icon: <WebIcon className=\"w-5 h-5 mr-3 text-green-500 flex-shrink-0\" /> \n      },\n      { \n        name: 'Gerar Código', \n        description: 'Mudar para o agente de programação.',\n        agent: 'code' as AgentType, \n        alias: 'codigo',\n        icon: <CodeBracketIcon className=\"w-5 h-5 mr-3 text-blue-500 flex-shrink-0\" /> \n      },\n      {\n        name: 'Sugestão',\n        description: 'Melhorar a sua pergunta.',\n        agent: 'suggestion' as AgentType,\n        alias: 'sugestao',\n        icon: <LightbulbIcon className=\"w-5 h-5 mr-3 text-yellow-500 flex-shrink-0\" />\n      }\n  ];\n  \n  const filteredCommands = commands.filter(cmd => \n    cmd.name.toLowerCase().includes(input.substring(1).toLowerCase()) ||\n    cmd.alias.toLowerCase().includes(input.substring(1).toLowerCase())\n  );\n\n\n  useEffect(() => {\n    // FIX: Determine which set of suggestions to use based on the active agent and use it to filter suggestions. This resolves the 'allSuggestions is not defined' error.\n    let allSuggestions: string[] = [];\n    switch (activeAgent) {\n      case 'document':\n        allSuggestions = documentAgentSuggestions;\n        break;\n      case 'code':\n        allSuggestions = codeAgentSuggestions;\n        break;\n      case 'suggestion':\n        allSuggestions = suggestionAgentSuggestions;\n        break;\n    }\n\n    // Command Palette Logic\n    if (input.startsWith('@') && !input.includes(' ')) {\n        setIsCommandPaletteOpen(true);\n        setSuggestions([]);\n        setActiveSuggestionIndex(0); // Default to the first command\n        return;\n    } \n    setIsCommandPaletteOpen(false);\n\n    // Regular Suggestions Logic\n    if (input.trim().length > 0 && !input.startsWith('@')) {\n      const filtered = allSuggestions.filter(s => \n        s.toLowerCase().includes(input.toLowerCase())\n      );\n      setSuggestions(filtered.slice(0, 5)); // Show up to 5 suggestions\n    } else {\n      setSuggestions([]);\n    }\n    setActiveSuggestionIndex(-1); // Reset selection when input changes\n  }, [input, activeAgent]);\n\n\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = `${textarea.scrollHeight}px`;\n    }\n  }, [input]);\n\n  const handleSendMessage = (message: string) => {\n    if (message.trim() && !isLoading) {\n      onSendMessage(message.trim());\n      setInput('');\n      setSuggestions([]);\n    }\n  };\n  \n  const handleCommandSelect = (agent: AgentType, alias: string) => {\n    setActiveAgent(agent);\n    setInput(`@${alias} `);\n    setIsCommandPaletteOpen(false);\n    textareaRef.current?.focus();\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    handleSendMessage(suggestion);\n  };\n\n  const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n     if (isCommandPaletteOpen && filteredCommands.length > 0) {\n        if (e.key === 'ArrowDown') {\n            e.preventDefault();\n            setActiveSuggestionIndex(prev => (prev + 1) % filteredCommands.length);\n        } else if (e.key === 'ArrowUp') {\n            e.preventDefault();\n            setActiveSuggestionIndex(prev => (prev - 1 + filteredCommands.length) % filteredCommands.length);\n        } else if (e.key === 'Enter') {\n            e.preventDefault();\n            if(filteredCommands[activeSuggestionIndex]) {\n                const { agent, alias } = filteredCommands[activeSuggestionIndex];\n                handleCommandSelect(agent, alias);\n            }\n        } else if (e.key === 'Escape') {\n            setIsCommandPaletteOpen(false);\n            setInput('');\n        }\n        return;\n     }\n\n     if (suggestions.length > 0) {\n      if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        setActiveSuggestionIndex(prev => (prev + 1) % suggestions.length);\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        setActiveSuggestionIndex(prev => (prev - 1 + suggestions.length) % suggestions.length);\n      } else if (e.key === 'Enter' && activeSuggestionIndex > -1) {\n        e.preventDefault();\n        handleSendMessage(suggestions[activeSuggestionIndex]);\n      } else if (e.key === 'Escape') {\n        setSuggestions([]);\n      }\n    }\n    \n    if (e.key === 'Enter' && !e.shiftKey && activeSuggestionIndex === -1) {\n      e.preventDefault();\n      handleSendMessage(input);\n    }\n  };\n\n  const renderCommandPalette = () => (\n     <div className=\"absolute bottom-full mb-2 w-full bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-2xl shadow-lg p-2\">\n        <p className=\"px-2 py-1 text-xs font-semibold text-gray-500 dark:text-gray-400\">AGENTES</p>\n        <ul className=\"space-y-1\">\n            {filteredCommands.map((command, index) => (\n              <li\n                key={command.name}\n                onClick={() => handleCommandSelect(command.agent, command.alias)}\n                className={`p-2 rounded-md cursor-pointer flex items-center ${\n                    index === activeSuggestionIndex ? 'bg-blue-100 dark:bg-blue-900/50' : 'hover:bg-gray-100 dark:hover:bg-gray-700'\n                }`}\n              >\n                {command.icon}\n                <div>\n                    <p className=\"text-sm font-medium text-gray-800 dark:text-gray-200\">{command.name}</p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">{command.description}</p>\n                </div>\n              </li>\n            ))}\n        </ul>\n     </div>\n  );\n\n  return (\n    <div className=\"w-full max-w-3xl mx-auto relative\">\n       {isCommandPaletteOpen && filteredCommands.length > 0 && renderCommandPalette()}\n       {suggestions.length > 0 && !isCommandPaletteOpen && (\n        <div className=\"absolute bottom-full mb-2 w-full bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-2xl shadow-lg p-2\">\n          <ul className=\"space-y-1\">\n            {suggestions.map((suggestion, index) => (\n              <li\n                key={suggestion}\n                onClick={() => handleSuggestionClick(suggestion)}\n                className={`p-2 rounded-md cursor-pointer text-sm text-gray-800 dark:text-gray-200 ${\n                  index === activeSuggestionIndex ? 'bg-blue-100 dark:bg-blue-900/50' : 'hover:bg-gray-100 dark:hover:bg-gray-700'\n                }`}\n              >\n                {suggestion}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      <div className=\"relative flex items-end p-2 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-2xl shadow-lg\">\n        <button\n          onClick={onUploadClick}\n          className=\"p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors mr-2 flex-shrink-0\"\n          aria-label=\"Anexar documento\"\n        >\n          <PaperclipIcon className=\"w-6 h-6\" />\n        </button>\n        <textarea\n          ref={textareaRef}\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Digite sua mensagem ou '@' para mudar de agente...\"\n          rows={1}\n          className=\"flex-1 w-full bg-transparent resize-none focus:outline-none text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 max-h-52\"\n          disabled={isLoading}\n        />\n        <button\n          onClick={() => handleSendMessage(input)}\n          disabled={isLoading || !input.trim()}\n          className=\"ml-2 p-3 bg-blue-600 text-white rounded-full disabled:bg-gray-400 disabled:dark:bg-gray-600 hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 flex-shrink-0\"\n          aria-label=\"Enviar mensagem\"\n        >\n          {isLoading ? (\n            <div className=\"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin\"></div>\n          ) : (\n            <SendIcon className=\"w-5 h-5\" />\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInput;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2848, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/CloseIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const CloseIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M6 18 18 6M6 6l12 12\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,YAA8C,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2886, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/NewChatIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const NewChatIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 4.5v15m7.5-7.5h-15\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,cAAgD,CAAC,EAAE,SAAS,EAAE,iBACzE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2924, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/TrashIcon.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const TrashIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,YAA8C,CAAC,EAAE,SAAS,EAAE,iBACvE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 2962, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/DotsVerticalIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const DotsVerticalIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,mBAAqD,CAAC,EAAE,SAAS,EAAE,iBAC9E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3000, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/HistorySidebar.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useChatStore } from '../store';\nimport { Conversation } from '../types';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { NewChatIcon } from './icons/NewChatIcon';\nimport { TrashIcon } from './icons/TrashIcon';\nimport { DotsVerticalIcon } from './icons/DotsVerticalIcon';\n\ninterface HistorySidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\n// Helper function for relative time\nconst timeAgo = (timestamp: number): string => {\n  const now = new Date();\n  const secondsPast = (now.getTime() - timestamp) / 1000;\n  if (secondsPast < 60) return `agora mesmo`;\n  if (secondsPast < 3600) return `${Math.round(secondsPast / 60)}m atrás`;\n  if (secondsPast <= 86400) return `${Math.round(secondsPast / 3600)}h atrás`;\n  \n  const day = new Date(timestamp);\n  return day.toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' });\n};\n\n\nconst HistorySidebar: React.FC<HistorySidebarProps> = ({ isOpen, onClose }) => {\n  const { \n    documentConversations, \n    codeConversations,\n    suggestionConversations,\n    activeDocumentConversationId,\n    activeCodeConversationId,\n    activeSuggestionConversationId,\n    startNewConversation, \n    deleteConversation, \n    setActiveConversation,\n    activeAgent\n  } = useChatStore();\n\n  const [menuOpenFor, setMenuOpenFor] = useState<string | null>(null);\n  const menuRef = useRef<HTMLDivElement>(null);\n  \n  let conversations: Record<string, Conversation>;\n  let activeConversationId: string | null;\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setMenuOpenFor(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  switch(activeAgent) {\n    case 'code':\n      conversations = codeConversations;\n      activeConversationId = activeCodeConversationId;\n      break;\n    case 'suggestion':\n      conversations = suggestionConversations;\n      activeConversationId = activeSuggestionConversationId;\n      break;\n    case 'document':\n    default:\n      conversations = documentConversations;\n      activeConversationId = activeDocumentConversationId;\n      break;\n  }\n\n\n  const handleSelectConversation = (id: string) => {\n    setActiveConversation(activeAgent, id);\n    onClose(); // Close sidebar on mobile after selection\n  };\n  \n  const handleNewChat = () => {\n    startNewConversation(activeAgent);\n    onClose();\n  };\n\n  const handleDelete = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    setMenuOpenFor(null);\n    if (window.confirm(\"Tem certeza que deseja excluir esta conversa?\")) {\n        deleteConversation(activeAgent, id);\n    }\n  };\n\n  const handleMenuToggle = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    setMenuOpenFor(prev => (prev === id ? null : id));\n  };\n\n\n  const sortedConversations = Object.values(conversations).sort((a: Conversation, b: Conversation) => (b.updatedAt || b.createdAt) - (a.updatedAt || a.createdAt));\n\n  return (\n     <aside className={`fixed inset-y-0 left-0 z-40 w-80 bg-gray-50 dark:bg-gray-900 flex flex-col h-full border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : '-translate-x-full'} lg:relative lg:translate-x-0 lg:flex-shrink-0`}>\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Histórico</h2>\n         <button \n          onClick={onClose} \n          className=\"lg:hidden p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full\"\n          aria-label=\"Fechar histórico\"\n        >\n            <CloseIcon className=\"w-6 h-6\" />\n        </button>\n      </div>\n\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n        <button\n          onClick={handleNewChat}\n          className=\"w-full flex items-center justify-center p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900\"\n        >\n          <NewChatIcon className=\"w-5 h-5 mr-2\" />\n          <span>Novo Chat</span>\n        </button>\n      </div>\n      \n      <div className=\"flex-grow p-2 overflow-y-auto\">\n        {sortedConversations.length === 0 ? (\n          <div className=\"text-center text-gray-500 dark:text-gray-400 mt-8 px-4\">\n            <p>Nenhum histórico para o agente \"{\n              activeAgent === 'document' ? 'Consultor' : \n              activeAgent === 'code' ? 'Código' : 'Sugestão'\n            }\".</p>\n          </div>\n        ) : (\n          <ul className=\"space-y-1\">\n            {sortedConversations.map((convo: Conversation) => (\n              <li key={convo.id}>\n                <div\n                  onClick={() => handleSelectConversation(convo.id)}\n                  className={`w-full text-left p-3 rounded-md group flex items-center justify-between transition-colors duration-200 cursor-pointer ${\n                    convo.id === activeConversationId\n                      ? 'bg-blue-100 dark:bg-blue-900/50'\n                      : 'hover:bg-gray-200 dark:hover:bg-gray-800'\n                  }`}\n                >\n                  <div className=\"flex-grow overflow-hidden pr-2\">\n                    <p className=\"truncate text-sm font-medium text-gray-800 dark:text-gray-200\" title={convo.title}>\n                      {convo.title}\n                    </p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                      {timeAgo(convo.updatedAt || convo.createdAt)}\n                    </p>\n                  </div>\n\n                  <div className=\"relative flex-shrink-0\" ref={menuOpenFor === convo.id ? menuRef : null}>\n                    <button\n                      onClick={(e) => handleMenuToggle(e, convo.id)}\n                      className=\"p-1 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                      aria-label=\"Opções da conversa\"\n                    >\n                      <DotsVerticalIcon className=\"w-4 h-4\" />\n                    </button>\n                     {menuOpenFor === convo.id && (\n                      <div className=\"absolute right-0 mt-2 w-32 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10\">\n                        <ul className=\"py-1\">\n                          <li>\n                            <button onClick={(e) => handleDelete(e, convo.id)} className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center\">\n                              <TrashIcon className=\"w-4 h-4 mr-2\" /> Excluir\n                            </button>\n                          </li>\n                        </ul>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </aside>\n  );\n};\n\nexport default HistorySidebar;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3318, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/DocumentIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const DocumentIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAiD,CAAC,EAAE,SAAS,EAAE,iBAC1E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 3355, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/LockIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const LockIcon: React.FC<{ className?: string; title?: string }> = ({ className, title }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    {title && <title>{title}</title>}\n    <path\n      fillRule=\"evenodd\"\n      d=\"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6D,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,iBAC7F,6LAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAW;QACX,eAAY;;YAEX,uBAAS,6LAAC;0BAAO;;;;;;0BAClB,6LAAC;gBACC,UAAS;gBACT,GAAE;gBACF,UAAS;;;;;;;;;;;;KAZF"}},
    {"offset": {"line": 3400, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/PencilIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const PencilIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,aAA+C,CAAC,EAAE,SAAS,EAAE,iBACxE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 3438, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/EyeIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const EyeIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z\"\n    />\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;;0BAEZ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;0BAEJ,6LAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,GAAE;;;;;;;;;;;;KAlBK"}},
    {"offset": {"line": 3487, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/DocumentSidebar.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { useDocumentStore } from '../store';\nimport { DocumentIcon } from './icons/DocumentIcon';\nimport { PaperclipIcon } from './icons/PaperclipIcon';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { LockIcon } from './icons/LockIcon';\nimport { DotsVerticalIcon } from './icons/DotsVerticalIcon';\nimport { PencilIcon } from './icons/PencilIcon';\nimport { EyeIcon } from './icons/EyeIcon';\nimport { TrashIcon } from './icons/TrashIcon';\nimport { Document } from '../types';\n\nconst ChevronDownIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m19.5 8.25-7.5 7.5-7.5-7.5\" />\n  </svg>\n);\n\n\ninterface DocumentContentViewerProps {\n  content: string;\n}\n\nconst DocumentContentViewer: React.FC<DocumentContentViewerProps> = ({ content }) => (\n  <div className=\"p-3 pt-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/50\">\n    <div className=\"max-h-64 overflow-y-auto border-t border-gray-200 dark:border-gray-700 pt-2\">\n        <pre className=\"whitespace-pre-wrap font-sans\">\n        {content || \"Este documento não contém texto para ser exibido.\"}\n        </pre>\n    </div>\n  </div>\n);\n\n\ninterface DocumentItemProps {\n  doc: Document;\n  isExpanded: boolean;\n  onDelete: (id: string) => void;\n  onRename: (id: string, newName: string) => void;\n  onToggleExpand: (id: string) => void;\n}\n\nconst DocumentItem: React.FC<DocumentItemProps> = ({ doc, isExpanded, onDelete, onRename, onToggleExpand }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isRenaming, setIsRenaming] = useState(false);\n  const [name, setName] = useState(doc.name);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (isRenaming && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isRenaming]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsMenuOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleRename = () => {\n    if (name.trim() && name.trim() !== doc.name) {\n      onRename(doc.id, name.trim());\n    } else {\n      setName(doc.name); // Revert to original if empty or unchanged\n    }\n    setIsRenaming(false);\n    setIsMenuOpen(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      handleRename();\n    } else if (e.key === 'Escape') {\n      setName(doc.name);\n      setIsRenaming(false);\n      setIsMenuOpen(false);\n    }\n  };\n\n  return (\n    <div className=\"mb-2 rounded-md bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700\">\n      <div className=\"flex items-center justify-between p-2 cursor-pointer\" onClick={() => onToggleExpand(doc.id)}>\n        <div className=\"flex items-center overflow-hidden flex-grow\">\n          <DocumentIcon className=\"w-5 h-5 mr-2 flex-shrink-0 text-gray-500 dark:text-gray-400\" />\n          {isRenaming ? (\n            <input\n              ref={inputRef}\n              type=\"text\"\n              value={name}\n              onClick={(e) => e.stopPropagation()} // Prevent expand/collapse when clicking input\n              onChange={(e) => setName(e.target.value)}\n              onBlur={handleRename}\n              onKeyDown={handleKeyDown}\n              className=\"text-sm bg-transparent border-b border-blue-500 focus:outline-none text-gray-800 dark:text-gray-200 w-full\"\n            />\n          ) : (\n            <span className=\"truncate text-sm text-gray-800 dark:text-gray-200\" title={doc.name}>\n              {doc.name}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex items-center\" onClick={(e) => e.stopPropagation()}>\n           <ChevronDownIcon className={`w-5 h-5 text-gray-400 dark:text-gray-500 transition-transform duration-300 mr-1 ${isExpanded ? 'rotate-180' : ''}`} />\n            <div className=\"relative flex-shrink-0\" ref={menuRef}>\n            {doc.isDeletable ? (\n                <button onClick={() => setIsMenuOpen(!isMenuOpen)} className=\"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700\">\n                <DotsVerticalIcon className=\"w-5 h-5\" />\n                </button>\n            ) : (\n                <LockIcon className=\"w-4 h-4 ml-2 flex-shrink-0 text-gray-400 dark:text-gray-500\" title=\"Este documento faz parte da base de conhecimento e não pode ser excluído.\" />\n            )}\n            {isMenuOpen && (\n                <div className=\"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10\">\n                <ul className=\"py-1\">\n                    <li>\n                    <button onClick={() => { onToggleExpand(doc.id); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center\">\n                        <EyeIcon className=\"w-4 h-4 mr-2\" /> {isExpanded ? 'Ocultar' : 'Visualizar'}\n                    </button>\n                    </li>\n                    <li>\n                    <button onClick={() => { setIsRenaming(true); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center\">\n                        <PencilIcon className=\"w-4 h-4 mr-2\" /> Renomear\n                    </button>\n                    </li>\n                    <li>\n                    <button onClick={() => { onDelete(doc.id); setIsMenuOpen(false); }} className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center\">\n                        <TrashIcon className=\"w-4 h-4 mr-2\" /> Excluir\n                    </button>\n                    </li>\n                </ul>\n                </div>\n            )}\n            </div>\n        </div>\n      </div>\n       <div\n        className={`grid transition-[grid-template-rows] duration-300 ease-in-out ${isExpanded ? 'grid-rows-[1fr]' : 'grid-rows-[0fr]'}`}\n      >\n        <div className=\"overflow-hidden\">\n            <DocumentContentViewer content={doc.content || ''} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\nconst DocumentSidebar: React.FC<{ isOpen: boolean; onClose: () => void; }> = ({ isOpen, onClose }) => {\n  const { documents, addDocument, deleteDocument, renameDocument, isLoading, error } = useDocumentStore();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [expandedDocId, setExpandedDocId] = useState<string | null>(null);\n\n  const handleToggleExpand = (docId: string) => {\n    setExpandedDocId(prevId => prevId === docId ? null : docId);\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      addDocument(file);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const baseDocuments = documents.filter(doc => !doc.isDeletable);\n  const userDocuments = documents.filter(doc => doc.isDeletable);\n\n  return (\n    <>\n      <aside className={`fixed inset-y-0 right-0 z-40 w-80 bg-gray-50 dark:bg-gray-900/95 flex flex-col h-full border-l border-gray-200 dark:border-gray-700/50 backdrop-blur-sm transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : 'translate-x-full'} lg:relative lg:translate-x-0 lg:flex-shrink-0`}>\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Documentos</h2>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">Contexto do agente.</p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"lg:hidden p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full\"\n            aria-label=\"Fechar documentos\"\n          >\n            <CloseIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n        <div className=\"flex-grow p-4 overflow-y-auto\">\n          \n          <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 px-1\">Base de Conhecimento</h3>\n          {baseDocuments.length > 0 ? (\n              baseDocuments.map((doc) => <DocumentItem key={doc.id} doc={doc} onDelete={() => {}} onRename={() => {}} onToggleExpand={handleToggleExpand} isExpanded={expandedDocId === doc.id} />)\n          ) : (\n              <p className=\"text-xs text-gray-400 dark:text-gray-500 px-1\">Nenhum conhecimento base carregado.</p>\n          )}\n\n          <h3 className=\"text-sm font-semibold text-gray-500 dark:text-gray-400 mt-6 mb-2 px-1\">Documentos Enviados</h3>\n          {userDocuments.length > 0 ? (\n              userDocuments.map((doc) => <DocumentItem key={doc.id} doc={doc} onDelete={deleteDocument} onRename={renameDocument} onToggleExpand={handleToggleExpand} isExpanded={expandedDocId === doc.id} />)\n          ) : (\n              <div className=\"text-center text-gray-500 dark:text-gray-400 mt-4 py-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg\">\n                  <DocumentIcon className=\"w-8 h-8 mx-auto mb-1 text-gray-400\" />\n                  <p className='text-sm'>Nenhum documento enviado.</p>\n              </div>\n          )}\n\n          {isLoading && (\n            <div className=\"flex items-center justify-center mt-4\">\n              <div className=\"w-6 h-6 border-2 border-t-transparent border-blue-500 rounded-full animate-spin\"></div>\n              <span className=\"ml-2 text-gray-600 dark:text-gray-300\">Processando...</span>\n            </div>\n          )}\n\n          {error && <p className=\"text-red-500 text-sm mt-2 p-2 bg-red-100 dark:bg-red-900/20 rounded-md whitespace-pre-wrap\">{error}</p>}\n        </div>\n        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700\">\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            className=\"hidden\"\n            accept=\".txt,.md,.pdf\"\n          />\n          <button\n            onClick={handleUploadClick}\n            disabled={isLoading}\n            className=\"w-full flex items-center justify-center p-3 bg-blue-600 text-white rounded-lg disabled:bg-gray-400 disabled:dark:bg-gray-600 hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900\"\n          >\n            <PaperclipIcon className=\"w-5 h-5 mr-2\" />\n            <span>Enviar Documento</span>\n          </button>\n        </div>\n      </aside>\n    </>\n  );\n};\n\nexport default DocumentSidebar;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4094, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/SunIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const SunIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 4131, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/MoonIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const MoonIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;kBAEX,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAZK"}},
    {"offset": {"line": 4168, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/ThemeToggle.tsx"],"sourcesContent":["import React from 'react';\nimport { SunIcon } from './icons/SunIcon';\nimport { MoonIcon } from './icons/MoonIcon';\n\ninterface ThemeToggleProps {\n  theme: 'light' | 'dark';\n  toggleTheme: () => void;\n}\n\nconst ThemeToggle: React.FC<ThemeToggleProps> = ({ theme, toggleTheme }) => {\n  return (\n    <button\n      onClick={toggleTheme}\n      className=\"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800\"\n      aria-label=\"Alternar tema\"\n    >\n      {theme === 'light' ? (\n        <MoonIcon className=\"w-6 h-6\" />\n      ) : (\n        <SunIcon className=\"w-6 h-6\" />\n      )}\n    </button>\n  );\n};\n\nexport default ThemeToggle;"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAOA,MAAM,cAA0C,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE;IACrE,qBACE,6LAAC;QACC,SAAS;QACT,WAAU;QACV,cAAW;kBAEV,UAAU,wBACT,6LAAC,+IAAQ;YAAC,WAAU;;;;;qEAEpB,6LAAC,6IAAO;YAAC,WAAU;;;;;;;;;;;AAI3B;KAdM;uCAgBS"}},
    {"offset": {"line": 4213, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/TokenUsageDisplay.tsx"],"sourcesContent":["import React from 'react';\nimport { useChatStore } from '../store';\nimport { GEMINI_PRO } from '../services/geminiService';\n\nconst TokenUsageDisplay: React.FC = () => {\n  const { activeModel, proTokenCount, proTokenLimit } = useChatStore();\n\n  const proUsagePercentage = (proTokenCount / proTokenLimit) * 100;\n\n  return (\n    <div className=\"flex flex-col items-end\">\n        <div className=\"text-sm text-gray-700 dark:text-gray-300 mb-1\">\n            <span className=\"font-semibold hidden sm:inline\">Modelo Ativo: </span>\n            <span className={`font-bold px-2 py-0.5 rounded-full text-xs ${activeModel === GEMINI_PRO ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' : 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'}`}>\n                {activeModel.includes('pro') ? 'Pro' : 'Flash'}\n            </span>\n        </div>\n        {activeModel === GEMINI_PRO && (\n             <div className=\"w-28 sm:w-48\">\n                <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-1 text-right whitespace-nowrap\">\n                    <span className=\"hidden sm:inline\">Uso (Pro): </span>\n                    {proTokenCount.toLocaleString()}/{proTokenLimit.toLocaleString()}\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n                    <div\n                        className=\"bg-blue-600 h-2 rounded-full\"\n                        style={{ width: `${Math.min(proUsagePercentage, 100)}%` }}\n                    ></div>\n                </div>\n            </div>\n        )}\n    </div>\n  );\n};\n\nexport default TokenUsageDisplay;"],"names":[],"mappings":";;;;;AACA;AACA;;;;;AAEA,MAAM,oBAA8B;;IAClC,MAAM,EAAE,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG,IAAA,wHAAY;IAElE,MAAM,qBAAqB,AAAC,gBAAgB,gBAAiB;IAE7D,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAK,WAAU;kCAAiC;;;;;;kCACjD,6LAAC;wBAAK,WAAW,CAAC,2CAA2C,EAAE,gBAAgB,0IAAU,GAAG,kEAAkE,qEAAqE;kCAC9N,YAAY,QAAQ,CAAC,SAAS,QAAQ;;;;;;;;;;;;YAG9C,gBAAgB,0IAAU,kBACtB,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAK,WAAU;0CAAmB;;;;;;4BAClC,cAAc,cAAc;4BAAG;4BAAE,cAAc,cAAc;;;;;;;kCAElE,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BACG,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,KAAK,GAAG,CAAC,oBAAoB,KAAK,CAAC,CAAC;4BAAC;;;;;;;;;;;;;;;;;;;;;;;AAOhF;GA7BM;;QACkD,wHAAY;;;KAD9D;uCA+BS"}},
    {"offset": {"line": 4325, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/AgentInfoModal.tsx"],"sourcesContent":["import React from 'react';\nimport { AgentType } from '../types';\nimport { CloseIcon } from './icons/CloseIcon';\nimport { BotIcon } from './icons/BotIcon';\n\ninterface AgentInfoModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  agentType: AgentType;\n}\n\nconst agentContent = {\n  document: {\n    title: 'Sobre o Consultor de Documentos',\n    description:\n      'Este agente é um especialista em análise de documentos e conhecimento tributário. Sua principal função é responder a perguntas com base no contexto fornecido nos documentos enviados e em sua base de conhecimento interna. Quando necessário, ele utiliza a busca na web para complementar suas respostas.',\n    capabilities: [\n      'Analisar arquivos de texto (TXT, MD) e PDF.',\n      'Utilizar a técnica RAG (Retrieval-Augmented Generation) para encontrar as informações mais relevantes nos documentos.',\n      'Buscar informações atualizadas na web para complementar o conhecimento.',\n      'Citar as fontes da web utilizadas nas respostas.',\n    ],\n    limitations: [\n      'Não fornece aconselhamento financeiro ou tributário licenciado.',\n      'As respostas são baseadas nas informações disponíveis e podem não cobrir todas as especificidades de um caso real.',\n      'A precisão depende da qualidade e clareza dos documentos fornecidos.',\n      'O conhecimento sobre eventos muito recentes pode ser limitado.',\n    ],\n  },\n  code: {\n    title: 'Sobre o Gerador de Código Fiscal',\n    description:\n      'Este agente é um programador sênior especialista em criar trechos de código para resolver problemas tributários e fiscais, com foco em Python e Delphi. Ele pode utilizar o contexto da conversa na aba \"Consultor\" para gerar um código mais preciso.',\n    capabilities: [\n      'Gerar funções e scripts em Python e Delphi.',\n      'Adicionar comentários explicativos no código.',\n      'Utilizar o histórico da conversa do \"Consultor\" como contexto.',\n      'Formatar o código em blocos para fácil leitura e cópia.',\n    ],\n    limitations: [\n      'Não pode executar ou testar o código gerado.',\n      'O código é fornecido como um exemplo e deve ser revisado por um desenvolvedor qualificado antes do uso em produção.',\n      'Não compreende a arquitetura completa de um projeto ou sistema existente.',\n      'Pode não utilizar as bibliotecas ou frameworks mais recentes, a menos que seja especificado.',\n    ],\n  },\n  suggestion: {\n    title: 'Sobre o Otimizador de Sugestões',\n    description:\n      'Este agente atua como um especialista em prompts. Em vez de responder diretamente à sua pergunta, ele analisa sua intenção e sugere 3 maneiras alternativas e mais eficazes de formular a mesma pergunta para obter melhores resultados de um assistente de IA fiscal. Ideal para refinar suas buscas e obter respostas mais precisas.',\n    capabilities: [\n      'Analisar a intenção por trás de uma pergunta.',\n      'Sugerir 3 novas formulações de prompt.',\n      'Explicar brevemente por que cada sugestão é melhor.',\n      'Ajudar a treinar o usuário a fazer perguntas mais eficazes.',\n    ],\n    limitations: [\n      'Não responde à pergunta original diretamente.',\n      'As sugestões são baseadas em heurísticas e podem não ser sempre perfeitas.',\n      'Funciona melhor com perguntas abertas e complexas.',\n    ],\n  },\n};\n\nconst AgentInfoModal: React.FC<AgentInfoModalProps> = ({ isOpen, onClose, agentType }) => {\n  if (!isOpen) return null;\n\n  const content = agentContent[agentType];\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-fade-in\"\n      onClick={onClose}\n      aria-modal=\"true\"\n      role=\"dialog\"\n    >\n      <div\n        className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-transform duration-300 animate-slide-up\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-gray-200 dark:bg-gray-700\">\n                <BotIcon className=\"w-6 h-6 text-gray-600 dark:text-gray-300\" />\n            </div>\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\" id=\"modal-title\">\n                {content.title}\n            </h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-1 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full\"\n            aria-label=\"Fechar modal\"\n          >\n            <CloseIcon className=\"w-6 h-6\" />\n          </button>\n        </header>\n\n        <main className=\"p-6 overflow-y-auto text-gray-700 dark:text-gray-300\">\n          <p className=\"text-sm leading-relaxed mb-6\">{content.description}</p>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h3 className=\"text-md font-semibold text-gray-800 dark:text-gray-100 mb-2\">\n                Capacidades\n              </h3>\n              <ul className=\"space-y-2 list-disc list-inside text-sm\">\n                {content.capabilities.map((item, index) => (\n                  <li key={index} className=\"flex items-start\">\n                    <span className=\"text-green-500 mr-2 mt-1\">&#10003;</span>\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n            <div>\n              <h3 className=\"text-md font-semibold text-gray-800 dark:text-gray-100 mb-2\">\n                Limitações\n              </h3>\n              <ul className=\"space-y-2 list-disc list-inside text-sm\">\n                {content.limitations.map((item, index) => (\n                   <li key={index} className=\"flex items-start\">\n                    <span className=\"text-red-500 mr-2 mt-1\">&#10007;</span>\n                    <span>{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n          \n           <div className=\"mt-6 p-3 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 dark:border-yellow-500 rounded-r-lg\">\n                <p className=\"text-xs text-yellow-800 dark:text-yellow-300\">\n                    <strong>Aviso:</strong> As informações e o código gerados por esta IA são para fins informativos e não substituem o aconselhamento de um profissional qualificado. Verifique sempre as informações com fontes oficiais.\n                </p>\n            </div>\n\n        </main>\n      </div>\n      {/* FIX: Removed invalid 'jsx' prop from style tag. The 'jsx' prop is specific to styled-jsx (commonly used with Next.js) and is not a standard React attribute. A standard <style> tag achieves the same result for defining the keyframe animations. */}\n      <style>{`\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out forwards;\n        }\n        @keyframes slide-up {\n          from { transform: translateY(20px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        .animate-slide-up {\n           animation: slide-up 0.3s ease-out forwards;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default AgentInfoModal;"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAQA,MAAM,eAAe;IACnB,UAAU;QACR,OAAO;QACP,aACE;QACF,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,MAAM;QACJ,OAAO;QACP,aACE;QACF,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,YAAY;QACV,OAAO;QACP,aACE;QACF,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;SACD;IACH;AACF;AAEA,MAAM,iBAAgD,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE;IACnF,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,UAAU,YAAY,CAAC,UAAU;IAEvC,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;QACT,cAAW;QACX,MAAK;;0BAEL,6LAAC;gBACC,WAAU;gBACV,SAAS,CAAC,IAAM,EAAE,eAAe;;kCAEjC,6LAAC;wBAAO,WAAU;;0CAChB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC,6IAAO;4CAAC,WAAU;;;;;;;;;;;kDAEvB,6LAAC;wCAAG,WAAU;wCAAsD,IAAG;kDAClE,QAAQ,KAAK;;;;;;;;;;;;0CAGpB,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,cAAW;0CAEX,cAAA,6LAAC,iJAAS;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAIzB,6LAAC;wBAAK,WAAU;;0CACd,6LAAC;gCAAE,WAAU;0CAAgC,QAAQ,WAAW;;;;;;0CAEhE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAA8D;;;;;;0DAG5E,6LAAC;gDAAG,WAAU;0DACX,QAAQ,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC/B,6LAAC;wDAAe,WAAU;;0EACxB,6LAAC;gEAAK,WAAU;0EAA2B;;;;;;0EAC3C,6LAAC;0EAAM;;;;;;;uDAFA;;;;;;;;;;;;;;;;kDAOf,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAA8D;;;;;;0DAG5E,6LAAC;gDAAG,WAAU;0DACX,QAAQ,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC7B,6LAAC;wDAAe,WAAU;;0EACzB,6LAAC;gEAAK,WAAU;0EAAyB;;;;;;0EACzC,6LAAC;0EAAM;;;;;;;uDAFC;;;;;;;;;;;;;;;;;;;;;;0CASjB,6LAAC;gCAAI,WAAU;0CACV,cAAA,6LAAC;oCAAE,WAAU;;sDACT,6LAAC;sDAAO;;;;;;wCAAe;;;;;;;;;;;;;;;;;;;;;;;;0BAOrC,6LAAC;0BAAO,CAAC;;;;;;;;;;;;;;;MAeT,CAAC;;;;;;;;;;;;AAGP;KA7FM;uCA+FS"}},
    {"offset": {"line": 4644, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/MenuIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const MenuIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 4682, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/InfoIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const InfoIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n    />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,WAA6C,CAAC,EAAE,SAAS,EAAE,iBACtE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 4720, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/KeyIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const KeyIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,UAA4C,CAAC,EAAE,SAAS,EAAE,iBACrE,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 4758, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/components/icons/EyeSlashIcon.tsx"],"sourcesContent":["import React from 'react';\n\nexport const EyeSlashIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth={1.5}\n    stroke=\"currentColor\"\n    className={className}\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.243 4.243L6.228 6.228\"\n    />\n  </svg>\n);"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAiD,CAAC,EAAE,SAAS,EAAE,iBAC1E,6LAAC;QACC,OAAM;QACN,MAAK;QACL,SAAQ;QACR,aAAa;QACb,QAAO;QACP,WAAW;QACX,eAAY;kBAEZ,cAAA,6LAAC;YACC,eAAc;YACd,gBAAe;YACf,GAAE;;;;;;;;;;;KAbK"}},
    {"offset": {"line": 4796, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useChatStore, useDocumentStore } from './store';\nimport ChatMessage from './components/ChatMessage';\nimport ChatInput from './components/ChatInput';\nimport HistorySidebar from './components/HistorySidebar';\nimport DocumentSidebar from './components/DocumentSidebar';\nimport ThemeToggle from './components/ThemeToggle';\nimport TokenUsageDisplay from './components/TokenUsageDisplay';\nimport AgentInfoModal from './components/AgentInfoModal';\nimport { MenuIcon } from './components/icons/MenuIcon';\nimport { DocumentIcon } from './components/icons/DocumentIcon';\nimport { BotIcon } from './components/icons/BotIcon';\nimport { InfoIcon } from './components/icons/InfoIcon';\nimport { documentAgentSuggestions, codeAgentSuggestions, suggestionAgentSuggestions } from './suggestions';\nimport { Conversation, Message, AgentType } from './types';\nimport { KeyIcon } from './components/icons/KeyIcon';\nimport { CloseIcon } from './components/icons/CloseIcon';\nimport { EyeIcon } from './components/icons/EyeIcon';\nimport { EyeSlashIcon } from './components/icons/EyeSlashIcon';\n\n// ForgotPasswordModal Component\nconst ForgotPasswordModal: React.FC<{ isOpen: boolean; onClose: () => void; }> = ({ isOpen, onClose }) => {\n    const [email, setEmail] = useState('');\n    const { sendPasswordResetEmail, authLoading, authError, authMessage } = useChatStore();\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        sendPasswordResetEmail(email);\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4\" onClick={onClose}>\n            <div className=\"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md\" onClick={(e) => e.stopPropagation()}>\n                <header className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n                    <div className=\"flex items-center gap-3\">\n                         <div className=\"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-gray-700\">\n                            <KeyIcon className=\"w-6 h-6 text-yellow-400\" />\n                        </div>\n                        <h2 className=\"text-lg font-semibold text-white\">Redefinir Senha</h2>\n                    </div>\n                    <button onClick={onClose} className=\"p-1 text-gray-400 hover:bg-gray-700 rounded-full\">\n                        <CloseIcon className=\"w-6 h-6\" />\n                    </button>\n                </header>\n                <div className=\"p-6\">\n                    {!authMessage ? (\n                    <form onSubmit={handleSubmit}>\n                        <p className=\"text-sm text-gray-400 mb-4\">\n                            Digite o endereço de e-mail associado à sua conta e enviaremos um link para redefinir sua senha.\n                        </p>\n                        <div>\n                            <label htmlFor=\"reset-email\" className=\"block text-sm font-medium text-gray-300\">\n                                Email\n                            </label>\n                            <input\n                                id=\"reset-email\" name=\"email\" type=\"email\" autoComplete=\"email\" required\n                                value={email} onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full px-4 py-2.5 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                            />\n                        </div>\n                        {authError && (\n                            <div className=\"p-3 mt-4 text-sm text-red-300 bg-red-900/20 rounded-lg\">\n                                <p className=\"font-bold\">Ocorreu um erro:</p>\n                                <pre className=\"mt-1 font-sans text-xs whitespace-pre-wrap\">{authError.message}</pre>\n                            </div>\n                        )}\n                        <div className=\"mt-6\">\n                            <button type=\"submit\" disabled={authLoading}\n                                    className=\"w-full px-4 py-2.5 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 transition-all duration-300\">\n                                {authLoading ? 'Enviando...' : 'Enviar Link de Redefinição'}\n                            </button>\n                        </div>\n                    </form>\n                    ) : (\n                        <div>\n                             <div className=\"p-4 text-sm text-center text-green-300 bg-green-900/20 rounded-lg\">\n                                <p className=\"font-bold\">Verifique seu E-mail!</p>\n                                <p className=\"mt-2\">{authMessage}</p>\n                            </div>\n                            <button onClick={onClose} className=\"w-full mt-6 px-4 py-2.5 font-semibold text-white bg-gray-600 rounded-lg hover:bg-gray-500\">\n                                Fechar\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// LoginPage Component\nconst LoginPage: React.FC<{ onNavigateToSignup: () => void; onNavigateToForgotPassword: () => void; }> = ({ onNavigateToSignup, onNavigateToForgotPassword }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const { signIn, authLoading, authError } = useChatStore();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    signIn(email, password);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-4 flex items-center justify-center\">\n      <div className=\"w-full max-w-4xl mx-auto bg-gray-800 rounded-2xl shadow-2xl flex overflow-hidden\">\n        {/* Coluna de Branding */}\n        <div className=\"hidden md:flex flex-col items-center justify-center w-1/2 bg-blue-600 p-8 text-center\">\n          <BotIcon className=\"w-24 h-24 mb-4\" />\n          <h1 className=\"text-3xl font-bold mb-2\">Gênesis Agente IA</h1>\n          <p className=\"text-blue-200\">Sua expertise fiscal, potencializada por IA.</p>\n        </div>\n        {/* Coluna do Formulário */}\n        <div className=\"w-full md:w-1/2 p-8 sm:p-12\">\n           <h1 className=\"text-3xl font-bold text-white mb-2\">\n            Bem-vindo de volta!\n          </h1>\n          <p className=\"mb-8 text-sm text-gray-400\">\n            Faça login para acessar o assistente.\n          </p>\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-300\">\n                Email\n              </label>\n              <input\n                id=\"email\" name=\"email\" type=\"email\" autoComplete=\"email\" required\n                value={email} onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-4 py-2.5 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              />\n            </div>\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-300\">\n                  Senha\n                </label>\n                <div className=\"text-sm\">\n                  <button type=\"button\" onClick={onNavigateToForgotPassword} className=\"font-medium text-blue-400 hover:underline\">\n                    Esqueci minha senha\n                  </button>\n                </div>\n              </div>\n              <div className=\"relative mt-1\">\n                <input\n                  id=\"password\" name=\"password\" type={showPassword ? 'text' : 'password'} autoComplete=\"current-password\" required\n                  value={password} onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-4 py-2.5 pr-10 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-white\"\n                  aria-label={showPassword ? \"Ocultar senha\" : \"Mostrar senha\"}\n                >\n                  {showPassword ? (\n                    <EyeSlashIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <EyeIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n            {authError && (\n                <div className=\"p-3 my-2 text-sm text-red-300 bg-red-900/20 rounded-lg\">\n                    <p className=\"font-bold\">Ocorreu um erro:</p>\n                    <pre className=\"mt-1 font-sans text-xs whitespace-pre-wrap\">{authError.message}</pre>\n                </div>\n            )}\n            <div>\n              <button type=\"submit\" disabled={authLoading}\n                      className=\"w-full px-4 py-2.5 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 transition-all duration-300\">\n                {authLoading ? 'Entrando...' : 'Entrar'}\n              </button>\n            </div>\n          </form>\n          <p className=\"text-sm text-center text-gray-400 mt-8\">\n            Não tem uma conta?{' '}\n            <button onClick={onNavigateToSignup}\n                    className=\"font-medium text-blue-400 hover:underline\">\n              Cadastre-se\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// SignupPage Component\nconst SignupPage: React.FC<{ onNavigateToLogin: () => void; }> = ({ onNavigateToLogin }) => {\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [userType, setUserType] = useState('Contador');\n  const { signUp, authLoading, authError, authMessage } = useChatStore();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    signUp(email, password, { full_name: fullName, user_type: userType });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-4 flex items-center justify-center\">\n      <div className=\"w-full max-w-4xl mx-auto bg-gray-800 rounded-2xl shadow-2xl flex overflow-hidden\">\n        {/* Coluna de Branding */}\n        <div className=\"hidden md:flex flex-col items-center justify-center w-1/2 bg-blue-600 p-8 text-center\">\n          <BotIcon className=\"w-24 h-24 mb-4\" />\n          <h1 className=\"text-3xl font-bold mb-2\">Gênesis Agente IA</h1>\n          <p className=\"text-blue-200\">Comece a transformar sua análise tributária.</p>\n        </div>\n        {/* Coluna do Formulário */}\n        <div className=\"w-full md:w-1/2 p-8 sm:p-12\">\n            <h1 className=\"text-3xl font-bold text-white mb-2\">\n                Crie sua Conta\n            </h1>\n            <p className=\"mb-6 text-sm text-gray-400\">\n                Junte-se a nós e simplifique suas tarefas fiscais.\n            </p>\n            <form className=\"space-y-4\" onSubmit={handleSubmit}>\n            <fieldset disabled={authLoading || !!authMessage}>\n                <div>\n                  <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-gray-300\">Nome Completo</label>\n                  <input id=\"fullName\" name=\"fullName\" type=\"text\" required value={fullName} onChange={(e) => setFullName(e.target.value)}\n                         className=\"w-full px-4 py-2.5 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"/>\n                </div>\n                <div>\n                  <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-300\">Email</label>\n                  <input id=\"email\" name=\"email\" type=\"email\" autoComplete=\"email\" required value={email} onChange={(e) => setEmail(e.target.value)}\n                         className=\"w-full px-4 py-2.5 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"/>\n                </div>\n                <div>\n                  <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-300\">Senha</label>\n                  <div className=\"relative mt-1\">\n                    <input id=\"password\" name=\"password\" type={showPassword ? 'text' : 'password'} required value={password} onChange={(e) => setPassword(e.target.value)}\n                            className=\"w-full px-4 py-2.5 pr-10 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"/>\n                    <button\n                        type=\"button\"\n                        onClick={() => setShowPassword(!showPassword)}\n                        className=\"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-white\"\n                        aria-label={showPassword ? \"Ocultar senha\" : \"Mostrar senha\"}\n                    >\n                        {showPassword ? (\n                        <EyeSlashIcon className=\"h-5 w-5\" />\n                        ) : (\n                        <EyeIcon className=\"h-5 w-5\" />\n                        )}\n                    </button>\n                  </div>\n                </div>\n                <div>\n                  <label htmlFor=\"userType\" className=\"block text-sm font-medium text-gray-300\">Tipo de Usuário</label>\n                  <select id=\"userType\" name=\"userType\" value={userType} onChange={(e) => setUserType(e.target.value)}\n                          className=\"w-full px-4 py-2.5 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\">\n                    <option>Contador</option>\n                    <option>Advogado</option>\n                    <option>Empresário</option>\n                    <option>Desenvolvedor</option>\n                    <option>Estudante</option>\n                    <option>Outro</option>\n                  </select>\n                </div>\n                \n                {authMessage && !authError && (\n                  <div className=\"p-3 my-2 text-sm text-green-300 bg-green-900/20 rounded-lg\">\n                      <p className=\"font-bold\">Sucesso!</p>\n                      <p className=\"mt-1\">{authMessage}</p>\n                  </div>\n                )}\n\n                {authError && (\n                  <div className=\"p-3 my-2 text-sm text-red-300 bg-red-900/20 rounded-lg\">\n                      <p className=\"font-bold\">Ocorreu um erro ao cadastrar:</p>\n                      <pre className=\"mt-1 font-sans text-xs whitespace-pre-wrap\">{authError.message}</pre>\n                  </div>\n                )}\n\n                <div>\n                  <button type=\"submit\" disabled={authLoading || !!authMessage}\n                          className=\"w-full px-4 py-2.5 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 transition-all duration-300\">\n                    {authLoading ? 'Cadastrando...' : 'Cadastrar'}\n                  </button>\n                </div>\n              </fieldset>\n            </form>\n            <p className=\"text-sm text-center text-gray-400 mt-6\">\n              Já tem uma conta?{' '}\n              <button onClick={onNavigateToLogin} className=\"font-medium text-blue-400 hover:underline\">\n                Faça login\n              </button>\n            </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n// Main Chat Application Component\nconst ChatApplication: React.FC = () => {\n    const { \n    documentConversations, \n    codeConversations,\n    suggestionConversations,\n    activeDocumentConversationId,\n    activeCodeConversationId,\n    activeSuggestionConversationId,\n    sendMessage, \n    isLoading, \n    activeAgent,\n    setActiveAgent,\n    setMessageFeedback,\n    loadInitialData,\n    signOut,\n  } = useChatStore();\n  const { documents } = useDocumentStore();\n  \n  const [theme, setTheme] = useState<'light' | 'dark'>('dark');\n  const [isHistoryOpen, setIsHistoryOpen] = useState(false);\n  const [isDocumentsOpen, setIsDocumentsOpen] = useState(false);\n  const [isAgentInfoOpen, setIsAgentInfoOpen] = useState(false);\n  const [isInitializing, setIsInitializing] = useState(true);\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  \n  let activeConversationId: string | null = null;\n  let conversations: Record<string, Conversation> = {};\n  let agentName = '';\n  let suggestions: string[] = [];\n\n  switch (activeAgent) {\n    case 'code':\n      activeConversationId = activeCodeConversationId;\n      conversations = codeConversations;\n      agentName = 'Gerador de Código';\n      suggestions = codeAgentSuggestions;\n      break;\n    case 'suggestion':\n      activeConversationId = activeSuggestionConversationId;\n      conversations = suggestionConversations;\n      agentName = 'Otimizador de Prompt';\n      suggestions = suggestionAgentSuggestions;\n      break;\n    case 'document':\n    default:\n      activeConversationId = activeDocumentConversationId;\n      conversations = documentConversations;\n      agentName = 'Consultor Fiscal';\n      suggestions = documentAgentSuggestions;\n      break;\n  }\n  \n  const activeConversation: Conversation | undefined = activeConversationId ? conversations[activeConversationId] : undefined;\n  const messages: Message[] = activeConversation?.messages || [];\n\n  useEffect(() => {\n    const initializeApp = async () => {\n      await loadInitialData();\n      setIsInitializing(false);\n    };\n    initializeApp();\n  }, [loadInitialData]);\n\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [theme]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const toggleTheme = () => {\n    setTheme(theme === 'light' ? 'dark' : 'light');\n  };\n\n  const handleSendMessage = (message: string) => {\n    sendMessage(message, documents);\n  };\n  \n  const handleSuggestionClick = (suggestion: string) => {\n    handleSendMessage(suggestion);\n  };\n  \n  const handleFeedback = (messageId: string, feedback: 'good' | 'bad') => {\n    if (activeConversationId) {\n        setMessageFeedback(activeAgent, activeConversationId, messageId, feedback);\n    }\n  };\n\n  const AgentTabButton: React.FC<{ agent: AgentType, label: string }> = ({ agent, label }) => (\n    <button\n        onClick={() => setActiveAgent(agent)}\n        className={`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 ${\n            activeAgent === agent\n                ? 'bg-blue-600 text-white shadow'\n                : 'text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\n        }`}\n    >\n        {label}\n    </button>\n);\n\n\n  if (isInitializing) {\n    return (\n      <div className=\"flex h-screen w-full items-center justify-center bg-gray-100 dark:bg-gray-900\">\n        <div className=\"flex flex-col items-center\">\n          <BotIcon className=\"w-16 h-16 text-blue-500 animate-pulse\" />\n          <p className=\"mt-4 text-lg text-gray-700 dark:text-gray-300\">\n            Carregando assistente...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const renderWelcomeScreen = () => (\n    <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\n      <div className=\"w-20 h-20 mb-6 rounded-full flex items-center justify-center bg-gray-200 dark:bg-gray-700\">\n        <BotIcon className=\"w-12 h-12 text-gray-600 dark:text-gray-300\" />\n      </div>\n      <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n        {agentName}\n      </h2>\n      <p className=\"text-gray-600 dark:text-gray-400 mb-8 max-w-md\">\n        Comece uma conversa, envie um documento ou escolha uma das sugestões abaixo.\n      </p>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-2xl\">\n        {suggestions.map((s, i) => (\n          <button\n            key={i}\n            onClick={() => handleSuggestionClick(s)}\n            className=\"p-4 bg-white dark:bg-gray-800 rounded-lg text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors shadow\"\n          >\n            <p className=\"text-sm font-medium text-gray-800 dark:text-gray-200\">{s}</p>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className={`flex h-screen font-sans bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors`}>\n      <HistorySidebar isOpen={isHistoryOpen} onClose={() => setIsHistoryOpen(false)} />\n\n      <main className=\"flex-1 flex flex-col h-screen relative\">\n        <header className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm z-10\">\n          <div className=\"flex items-center gap-4\">\n            <button onClick={() => setIsHistoryOpen(true)} className=\"lg:hidden p-1 text-gray-500 dark:text-gray-400\">\n              <MenuIcon className=\"w-6 h-6\" />\n            </button>\n             <div className=\"flex items-center p-1 bg-gray-200/50 dark:bg-gray-900/50 rounded-lg\">\n                <AgentTabButton agent=\"document\" label=\"Consultor\" />\n                <AgentTabButton agent=\"code\" label=\"Código\" />\n                <AgentTabButton agent=\"suggestion\" label=\"Sugestão\" />\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button onClick={() => setIsAgentInfoOpen(true)} className=\"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700\">\n                <InfoIcon className=\"w-5 h-5\"/>\n            </button>\n            <TokenUsageDisplay />\n            <ThemeToggle theme={theme} toggleTheme={toggleTheme} />\n             <button onClick={signOut} className=\"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700\" title=\"Sair\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3h12\" />\n                </svg>\n            </button>\n            {activeAgent === 'document' && (\n              <button onClick={() => setIsDocumentsOpen(true)} className=\"lg:hidden p-1 text-gray-500 dark:text-gray-400\">\n                <DocumentIcon className=\"w-6 h-6\" />\n              </button>\n            )}\n          </div>\n        </header>\n\n        <div className=\"flex-1 overflow-y-auto p-4 pb-24\">\n          {messages.length === 0 ? renderWelcomeScreen() : (\n            <div>\n              <h1 className=\"text-center text-xl font-semibold text-gray-700 dark:text-gray-300 mb-6\">\n                 {activeConversation?.title}\n              </h1>\n              {messages.map((msg) => (\n                <ChatMessage \n                  key={msg.id} \n                  message={msg} \n                  onFeedback={(feedback) => handleFeedback(msg.id, feedback)} \n                />\n              ))}\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-gray-100 dark:from-gray-900 to-transparent\">\n          <ChatInput \n            onSendMessage={handleSendMessage} \n            isLoading={isLoading} \n            onUploadClick={() => setIsDocumentsOpen(true)}\n            activeAgent={activeAgent}\n          />\n        </div>\n      </main>\n\n      {activeAgent === 'document' && <DocumentSidebar isOpen={isDocumentsOpen} onClose={() => setIsDocumentsOpen(false)} />}\n      \n      <AgentInfoModal \n        isOpen={isAgentInfoOpen}\n        onClose={() => setIsAgentInfoOpen(false)}\n        agentType={activeAgent}\n      />\n    </div>\n  );\n};\n\n// App Router\nconst App: React.FC = () => {\n    const { session, authLoading, initAuth, clearAuthFeedback } = useChatStore();\n    const [page, setPage] = useState<'login' | 'signup'>('login');\n    const [isForgotPasswordOpen, setIsForgotPasswordOpen] = useState(false);\n\n    useEffect(() => {\n        const unsubscribe = initAuth();\n        return () => unsubscribe();\n    }, [initAuth]);\n\n    const handleCloseForgotPassword = () => {\n        setIsForgotPasswordOpen(false);\n        clearAuthFeedback();\n    };\n\n    if (authLoading) {\n        return (\n            <div className=\"flex h-screen w-full items-center justify-center bg-gray-100 dark:bg-gray-900\">\n                <div className=\"flex flex-col items-center\">\n                    <BotIcon className=\"w-16 h-16 text-blue-500 animate-pulse\" />\n                    <p className=\"mt-4 text-lg text-gray-700 dark:text-gray-300\">Carregando...</p>\n                </div>\n            </div>\n        );\n    }\n    \n    if (!session) {\n        return (\n            <>\n                {page === 'login' ? (\n                    <LoginPage \n                        onNavigateToSignup={() => { clearAuthFeedback(); setPage('signup'); }} \n                        onNavigateToForgotPassword={() => { clearAuthFeedback(); setIsForgotPasswordOpen(true); }}\n                    />\n                ) : (\n                    <SignupPage \n                        onNavigateToLogin={() => { clearAuthFeedback(); setPage('login'); }} \n                    />\n                )}\n                <ForgotPasswordModal \n                    isOpen={isForgotPasswordOpen} \n                    onClose={handleCloseForgotPassword}\n                />\n            </>\n        );\n    }\n\n    return <ChatApplication />;\n};\n\n\nexport default App;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6304, "column": 0}, "map": {"version":3,"sources":["file:///media/elso/dev/projects/genesisEnterprise/genesis.specific/frontend/genesis-agente-tributario-ia/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport App from '../App';\n\nexport default function Page() {\n  return <App />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,6LAAC,kHAAG;;;;;AACb;KAFwB"}}]
}